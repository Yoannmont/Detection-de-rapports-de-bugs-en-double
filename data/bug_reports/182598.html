<!DOCTYPE html>
<html lang="en">
  <head>
    <title>182598 &ndash; assertion failed in gtktreestore.c</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link href="https://bugs.eclipse.org/bugs/data/assets/03c4bb46b12126a79867f9a9f5323634.css?1593441374" rel="stylesheet" type="text/css">



    
<script type="text/javascript" src="https://bugs.eclipse.org/bugs/data/assets/a7c2f3a028f17a9aa60f56dc9d6e732d.js?1593441374"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/bugs',
                maxusermatches: 10
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    "You must enter a Description for this attachment.",
                component_required:
                    "You must select a Component for this bug.",
                description_required:
                    "You must enter a Description for this bug.",
                short_desc_required:
                    "You must enter a Summary for this bug.",
                version_required:
                    "You must select a Version for this bug."
            }
              , api_token: ''
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null,
                             "182598 – assertion failed in gtktreestore.c",
                             "show_bug.cgi?id=182598" );
        document.title = "182598 – assertion failed in gtktreestore.c";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "182598 – assertion failed in gtktreestore.c", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();

    });
    // -->
    </script>
<script type="text/javascript" src="https://bugs.eclipse.org/bugs/data/assets/daf5e0fb6826e6a35280e622913f0c4a.js?1593441374"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico">
  </head>

  <body 
        class="bugs-eclipse-org-bugs
                 bz_bug
                 bz_status_VERIFIED
                 bz_product_Platform
                 bz_component_SWT
                 bz_bug_182598 yui-skin-sam">

  <div id="header"><!-- 1.0@bugzilla.org -->





<!--  START OF SOLSTICE HEADER -->
 <link rel="stylesheet" type="text/css" href="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/stylesheets/vendor/cookieconsent/cookieconsent.min.css" />
 <script src="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/vendor/cookieconsent/default.min.js"></script>
 <style type="text/css">
    @import url('https://www.eclipse.org/eclipse.org-common/themes/solstice/public/stylesheets/barebone.min.css')
    </style>
    <script
      src="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/barebone.min.js">
    </script><header role="banner" class="barebone-layout thin-header padding-top-5 padding-bottom-5"  id="header-wrapper">
  <div class="container-fluid reset">
    <div class="row-fluid" id="header-row">
            <div class="col-sm-8 col-md-6 col-lg-4" id="header-left">
        <div class="wrapper-logo-default"><a href="https://www.eclipse.org/"><img class="logo-eclipse-default img-responsive hidden-xs" alt="logo" src="https://bugs.eclipse.org/eclipse.org-common/themes/solstice/public/images/logo/eclipse-426x100.png"/></a></div>
      </div>            <div class="col-sm-16 col-md-18 col-lg-20" id="main-menu-wrapper">
  <div class="navbar yamm" id="main-menu">
    <div id="navbar-collapse-1" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li class="visible-thin"><a href="https://www.eclipse.org/downloads/" target="_self">Download</a></li><li><a href="https://www.eclipse.org/users/" target="_self">Getting Started</a></li><li><a href="https://www.eclipse.org/membership/" target="_self">Members</a></li><li><a href="https://www.eclipse.org/projects/" target="_self">Projects</a></li>                  <li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Community <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="http://marketplace.eclipse.org">Marketplace</a></li><li><a href="http://events.eclipse.org">Events</a></li><li><a href="http://www.planeteclipse.org/">Planet Eclipse</a></li><li><a href="https://www.eclipse.org/community/eclipse_newsletter/">Newsletter</a></li><li><a href="https://www.youtube.com/user/EclipseFdn">Videos</a></li></ul></li><li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Participate <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="https://bugs.eclipse.org/bugs/">Report a Bug</a></li><li><a href="https://www.eclipse.org/forums/">Forums</a></li><li><a href="https://www.eclipse.org/mail/">Mailing Lists</a></li><li><a href="https://wiki.eclipse.org/">Wiki</a></li><li><a href="https://wiki.eclipse.org/IRC">IRC</a></li><li><a href="https://www.eclipse.org/contribute/">How to Contribute</a></li></ul></li><li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Working Groups <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="http://wiki.eclipse.org/Auto_IWG">Automotive</a></li><li><a href="http://iot.eclipse.org">Internet of Things</a></li><li><a href="http://locationtech.org">LocationTech</a></li><li><a href="http://lts.eclipse.org">Long-Term Support</a></li><li><a href="http://polarsys.org">PolarSys</a></li><li><a href="http://science.eclipse.org">Science</a></li><li><a href="http://www.openmdm.org">OpenMDM</a></li></ul></li>          <!-- More -->
          <li class="dropdown eclipse-more hidden-xs">
            <a data-toggle="dropdown" class="dropdown-toggle">More<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li>
                <!-- Content container to add padding -->
                <div class="yamm-content">
                  <div class="row">
                    <ul class="col-sm-8 list-unstyled"><li><p><strong>Community</strong></p></li><li><a href="http://marketplace.eclipse.org">Marketplace</a></li><li><a href="http://events.eclipse.org">Events</a></li><li><a href="http://www.planeteclipse.org/">Planet Eclipse</a></li><li><a href="https://www.eclipse.org/community/eclipse_newsletter/">Newsletter</a></li><li><a href="https://www.youtube.com/user/EclipseFdn">Videos</a></li></ul><ul class="col-sm-8 list-unstyled"><li><p><strong>Participate</strong></p></li><li><a href="https://bugs.eclipse.org/bugs/">Report a Bug</a></li><li><a href="https://www.eclipse.org/forums/">Forums</a></li><li><a href="https://www.eclipse.org/mail/">Mailing Lists</a></li><li><a href="https://wiki.eclipse.org/">Wiki</a></li><li><a href="https://wiki.eclipse.org/IRC">IRC</a></li><li><a href="https://www.eclipse.org/contribute/">How to Contribute</a></li></ul><ul class="col-sm-8 list-unstyled"><li><p><strong>Working Groups</strong></p></li><li><a href="http://wiki.eclipse.org/Auto_IWG">Automotive</a></li><li><a href="http://iot.eclipse.org">Internet of Things</a></li><li><a href="http://locationtech.org">LocationTech</a></li><li><a href="http://lts.eclipse.org">Long-Term Support</a></li><li><a href="http://polarsys.org">PolarSys</a></li><li><a href="http://science.eclipse.org">Science</a></li><li><a href="http://www.openmdm.org">OpenMDM</a></li></ul>                  </div>
                </div>
              </li>
            </ul>
          </li>
              </ul>
    </div>
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      </button>
      <div class="wrapper-logo-mobile"><a class="navbar-brand visible-xs" href="https://www.eclipse.org/"><img class="logo-eclipse-default-mobile img-responsive" alt="logo" src="https://bugs.eclipse.org/eclipse.org-common/themes/solstice/public/images/logo/eclipse-800x188.png"/></a></div>    </div>
  </div>
</div>
    </div>
  </div>
</header>
<!--  END OF SOLSTICE HEADER -->

    <div id="titles">
      <span id="title">Bugzilla &ndash; Bug&nbsp;182598</span>

        <span id="subtitle" class="subheader">assertion failed in gtktreestore.c</span>

        <span id="information" class="header_addl_info">Last modified: 2021-06-02 18:18:35 EDT</span>
    </div>


    <div id="common_links"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_top" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_top");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_top" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_top"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_top">
  <span class="separator">| </span>
  <a id="login_link_top" href="show_bug.cgi?id=182598&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_top')">Log In</a>

  <form action="show_bug.cgi?id=182598" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_top">
    <input id="Bugzilla_login_top" required
           name="Bugzilla_login" class="bz_login"
        placeholder="Login">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_top" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_top">
    <a href="#" onclick="return hide_mini_login_form('_top')">[x]</a>
  </form>
</li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
</ul>
    </div>
  </div>

  <div id="bugzilla-body">


<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2021-06-02 18:18:35">
  <input type="hidden" name="id" value="182598">
  <input type="hidden" name="token" value="1629860956-T_ep7RhxVEw_kIPMRL21iI1EqcKmj1B2H7789NA2d4A">
<div class="bz_short_desc_container edit_form">
     <a href="show_bug.cgi?id=182598"><b>Bug&nbsp;182598</b></a> <span id="summary_container" class="bz_default_hidden">
      - <span id="short_desc_nonedit_display">assertion failed in gtktreestore.c</span>
     </span>

    <div id="summary_input"><span class="field_label "
    id="field_label_short_desc">


  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>

</span>assertion failed in gtktreestore.c
    </div>
  </div>
  <script type="text/javascript">
    hideEditableField('summary_container',
                      'summary_input',
                      'summary_edit_action',
                      'short_desc',
                      'assertion failed in gtktreestore.c' );
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">VERIFIED
          FIXED
      </span>
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_alias">


  <a 
      title="A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#alias"
  >Alias:</a>

</th>
    <td>
        None
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components. Select a Classification to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Platform

</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Eclipse Project

</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=Platform"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >SWT

  (<a href="buglist.cgi?component=SWT&amp;product=Platform&amp;bug_status=__open__"
      target="_blank">show other bugs</a>)
</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">


  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=fields.html#version"
  >Version:</a>

</th>

      <td>4.7 &#160; <a href="https://dev.eclipse.org/committers/bugs/bugz_manager.php"><img src="//dev.eclipse.org/small_icons/apps/accessories-text-editor.png" alt="Edit" title="Edit these values" /></a></td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">


  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>

</th>
      <td class="field_value">PC
        Linux
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label  accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>P3
       major<span id="votes_container">
    (<a href="page.cgi?id=voting/user.html&amp;bug_id=182598#vote_182598">vote</a>)
  </span>
      </td>
    </tr>

      <tr><th class="field_label "
    id="field_label_target_milestone">


  <a 
      title="The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it."
      class="field_help_link"
      href="page.cgi?id=fields.html#target_milestone"
  >Target Milestone:</a>

</th>
        <td>4.12 M1 &#160; <a href="https://dev.eclipse.org/committers/bugs/bugz_manager.php"><img src="//dev.eclipse.org/small_icons/apps/accessories-text-editor.png" alt="Edit" title="Edit these values" /></a></td>
      </tr>
          
          <tr><th class="field_label "
    id="field_label_assigned_to">


  <a 
      title="The person in charge of resolving the bug."
      class="field_help_link"
      href="page.cgi?id=fields.html#assigned_to"
  >Assignee:</a>

</th>
      <td><span class="vcard"><span class="fn">Simeon Andreev</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=simeon.danailov.andreev&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=simeon.danailov.andreev&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
      </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_qa_contact">


  <a 
      title="The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#qa_contact"
  >QA Contact:</a>

</th>
      <td><span class="vcard"><span class="fn">Eric Williams</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ericwill&#64;redhat.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ericwill&#64;redhat.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
      </td>
    </tr>
    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'platform-swt-inbox\x40eclipse.org',
        '');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">


  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>

</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>

    <tr><th class="field_label "
    id="field_label_status_whiteboard">


  <a 
      title="Each bug has a free-form single line text entry box for adding tags and status information."
      class="field_help_link"
      href="page.cgi?id=fields.html#status_whiteboard"
  >Whiteboard:</a>

</th><td>  
  </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_keywords">


  <a 
      title="You can add keywords from a defined list to bugs, in order to easily identify and group them."
      class="field_help_link"
      href="describekeywords.cgi"
  >Keywords:</a>

</th>
  <td class="field_value "
      id="field_container_keywords" >triaged

</td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          <tr>
    <th class="field_label">
      <label>Duplicates (2)</label>:
    </th>
    <td class="field_value">
      <span id="duplicates"><a class="bz_bug_link 
          bz_status_CLOSED  bz_closed"
   title="CLOSED DUPLICATE - (Gtk) JVM Crashs during resizing Composite"
   href="show_bug.cgi?id=218877">218877</a> <a class="bz_bug_link 
          bz_status_CLOSED  bz_closed"
   title="CLOSED DUPLICATE - [GTK3] SWT crashes when setting TreeItem item count during TreeItem destruction callback"
   href="show_bug.cgi?id=545919">545919</a> 
      </span>
      (<a href="buglist.cgi?bug_id=218877,545919">view as bug list</a>)
    </td>
  </tr>
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>

  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>

  </td>
  </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table>
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2007-04-16 13:58 EDT by <span class="vcard"><span class="fn">Boris Bokowski</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=bokowski&#64;google.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=bokowski&#64;google.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2021-06-02 18:18 EDT
      (<a href="show_activity.cgi?id=182598">History</a>)
    </td>
  
  </tr>
<tr>
      <th class="field_label">
        <label  accesskey="a">
          CC List:
        </label>
      </th>
      <td>7 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5" >
                <option value="cocoakevin">cocoakevin</option>
                <option value="ericwill">ericwill</option>
                <option value="loskutov">loskutov</option>
                <option value="Silenio_Quarti">Silenio_Quarti</option>
                <option value="simeon.danailov.andreev">simeon.danailov.andreev</option>
                <option value="snorthov">snorthov</option>
                <option value="steffen.kloessel">steffen.kloessel</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ><ul class="bug_urls">
          <li><img src="//dev.eclipse.org/images/gerrit-16x16.gif"> <a href="https://git.eclipse.org/r/79294">
        Gerrit Change</a>
          </li>
          <li><img src="//dev.eclipse.org/images/bugs-16x16.png"> <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - GTK Error calling TreeItem.getExpanded() on a tree item being disposed."
   href="show_bug.cgi?id=39443">39443</a>
          </li>
          <li><img src="//dev.eclipse.org/images/bugs-16x16.png"> <a class="bz_bug_link 
          bz_status_CLOSED  bz_closed"
   title="CLOSED DUPLICATE - [GTK3] SWT crashes when setting TreeItem item count during TreeItem destruction callback"
   href="show_bug.cgi?id=545919">545919</a>
          </li>
          <li><img src="//dev.eclipse.org/images/gerrit-16x16.gif"> <a href="https://git.eclipse.org/r/139847">
        Gerrit Change</a>
          </li>
          <li><img src="//dev.eclipse.org/images/git-16x16.png"> <a href="https://git.eclipse.org/c/platform/eclipse.platform.swt.git/commit/?id=cb06a2f04ad9dc609519396126b5400dbbaf8063">
        Git Commit</a>
          </li>
          <li><img src="//dev.eclipse.org/images/gerrit-16x16.gif"> <a href="https://git.eclipse.org/r/140045">
        Gerrit Change</a>
          </li>
          <li><img src="//dev.eclipse.org/images/git-16x16.png"> <a href="https://git.eclipse.org/c/platform/eclipse.platform.swt.git/commit/?id=f47aa33d971816803c1bcb5bb4c01e3cad5b3cc2">
        Git Commit</a>
          </li>
          <li><img src="//dev.eclipse.org/images/bugs-16x16.png"> <a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - [GTK][Virtual Table] &quot;Widget is disposed&quot; on removing items from table"
   href="show_bug.cgi?id=547623">547623</a>
          </li>
          <li><img src="//dev.eclipse.org/images/bugs-16x16.png"> <a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - [GTK] JVM crash in Table.createColumn() in virtual tables"
   href="show_bug.cgi?id=573932">573932</a>
          </li></ul>

</td>
    </tr> 

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>



        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts">
  <tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table">
  <tr id="a0">
    <th colspan="3" class="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_text_plain">
        <td>
            <a href="attachment.cgi?id=63931"
               title="View the content of the attachment">
          <b>thread dump</b></a>

          <span class="bz_attach_extra_info">
              (94.73 KB,
                text/plain)

            <br>
            <a href="#attach_63931"
               title="Go to the comment associated with the attachment">2007-04-16 13:59 EDT</a>,

            <span class="vcard"><span class="fn">Boris Bokowski</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=bokowski&#64;google.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=bokowski&#64;google.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=63931&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a2" class="bz_contenttype_text_x-java">
        <td>
            <a href="attachment.cgi?id=278071"
               title="View the content of the attachment">
          <b>Snippet to reproduce the problem with. Run and click on the only button, observe standard error output.</b></a>

          <span class="bz_attach_extra_info">
              (2.01 KB,
                text/x-java)

            <br>
            <a href="#attach_278071"
               title="Go to the comment associated with the attachment">2019-03-29 10:16 EDT</a>,

            <span class="vcard"><span class="fn">Simeon Andreev</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=simeon.danailov.andreev&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=simeon.danailov.andreev&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=278071&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a3" class="bz_contenttype_video_mp4">
        <td>
            <a href="attachment.cgi?id=278072"
               title="View the content of the attachment">
          <b>Video showing the problem when using the attached snippet in Eclipse 4.7.3. Behaviour varies based on number of elements in the tree.</b></a>

          <span class="bz_attach_extra_info">
              (1.03 MB,
                video/mp4)

            <br>
            <a href="#attach_278072"
               title="Go to the comment associated with the attachment">2019-03-29 11:15 EDT</a>,

            <span class="vcard"><span class="fn">Simeon Andreev</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=simeon.danailov.andreev&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=simeon.danailov.andreev&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=278072&amp;action=edit">Details</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="3">
        <span class="bz_attach_view_hide">
            <a id="view_all" href="attachment.cgi?bugid=182598&amp;action=viewall">View All</a>
        </span>
        <a href="attachment.cgi?bugid=182598&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>
<div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=182598&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>
  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="https://bugs.eclipse.org/bugs/js/comments.js?1463425338" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the 'comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>


<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table">
<tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Boris Bokowski</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=bokowski&#64;google.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=bokowski&#64;google.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-04-16 13:58:40 EDT
        </span>

      </div>




<pre class="bz_comment_text">Using I20070323-1616, and running the SWT/JFace snippet from <a class="bz_bug_link 
          bz_status_VERIFIED  bz_closed"
   title="VERIFIED FIXED - [Viewers] Virtual TreeViewer/ILazyTreePathContentProvider: preservingSelection and refresh not always working"
   href="show_bug.cgi?id=172640">bug 172640</a> after applying the latest JFace patch from that bug, I got this:

Gtk-ERROR **: file gtktreestore.c: line 579 (gtk_tree_store_get_path): assertion failed: (G_NODE (iter-&gt;user_data)-&gt;parent != NULL)
aborting...
JVMDG217: Dump Handler is Processing Signal 6 - Please Wait.
JVMDG303: JVM Requesting Java core file
JVMDG304: Java core file written to /home/bokowski/TheWorkspace/snip/javacore.20070416.135336.19339.txt
JVMDG215: Dump Handler has Processed Error Signal 6.</pre>
    </div>

    <div id="c1" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Boris Bokowski</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=bokowski&#64;google.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=bokowski&#64;google.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-04-16 13:59:13 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=63931" name="attach_63931" title="thread dump">attachment 63931</a> <a href="attachment.cgi?id=63931&amp;action=edit" title="thread dump">[details]</a></span>
thread dump</pre>
    </div>

    <div id="c2" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Boris Bokowski</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=bokowski&#64;google.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=bokowski&#64;google.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-04-16 14:00:04 EDT
        </span>

      </div>




<pre class="bz_comment_text">To reproduce, run the snippet, expand all nodes in the tree, scroll down, and click on &quot;Sort&quot; multiple times.</pre>
    </div>

    <div id="c3" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Boris Bokowski</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=bokowski&#64;google.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=bokowski&#64;google.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-04-16 14:28:24 EDT
        </span>

      </div>




<pre class="bz_comment_text">Steps to reproduce:

1. Run the snippet
2. Expand all nodes top-down
3. Scroll all the way to the last item
4. Click on Sort
5. Click on Sort -&gt; Crash</pre>
    </div>

    <div id="c4" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kevin Barnes</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=cocoakevin&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=cocoakevin&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-04-17 18:36:45 EDT
        </span>

      </div>




<pre class="bz_comment_text">I cannot reproduce this without jface code. If we can find an SWT only test case it would really help us isolate the bug. Seems that GTK model is changing and  the view is not getting updated properly. 
Also I haven't crashed on GTK 2.10.4 (but Bogdan has).</pre>
    </div>

    <div id="c5" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kevin Barnes</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=cocoakevin&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=cocoakevin&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-04-18 14:54:48 EDT
        </span>

      </div>




<pre class="bz_comment_text">The jface code is calling setItemCount on the item's parent within a SetData call back. The result of this is that while processing the callback, the item is destroyed causing the failure. 
<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED WONTFIX - Tree crashes when item.dispose() called during SetData callback"
   href="show_bug.cgi?id=158052">Bug 158052</a> is similar.

A similar SWT only test case that does the same thing and also crashes:
	public static void main(String[] args) {
		final Display display = new Display();
		Shell shell = new Shell(display);
		final Tree tree = new Tree(shell, SWT.VIRTUAL);
		tree.setItemCount(2);
		tree.setSelection(tree.getItem(1));
		tree.clearAll(true);
		tree.addListener(SWT.SetData, new Listener() {
			public void handleEvent(Event event) {
				TreeItem item = (TreeItem) event.item;
				if (item.getParentItem() == null) {
					item.setText(&quot;item - &quot; + event.index);
				} else { 
					TreeItem parent = item.getParentItem();
					int parentIndex = tree.indexOf(parent);
					item.setText(&quot;child &quot; + parentIndex + &quot;/&quot; + event.index);
				}
				if (event.index == 1) {
					Thread.dumpStack();
					tree.setItemCount(1);							
				}
			}
		});
		shell.setSize(250, 150);
		tree.setBounds(10, 10, 200, 100);
		shell.open();
		while (!shell.isDisposed()) {
			if (!display.readAndDispatch()) {
				display.sleep();
			}
		}
		display.dispose();
	}</pre>
    </div>

    <div id="c6" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Boris Bokowski</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=bokowski&#64;google.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=bokowski&#64;google.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-04-19 14:53:26 EDT
        </span>

      </div>




<pre class="bz_comment_text">This is no longer blocking <a class="bz_bug_link 
          bz_status_VERIFIED  bz_closed"
   title="VERIFIED FIXED - [Viewers] Virtual TreeViewer/ILazyTreePathContentProvider: preservingSelection and refresh not always working"
   href="show_bug.cgi?id=172640">bug 172640</a>, but it would be good if the crash could be prevented by detecting this case and throwing an exception.</pre>
    </div>

    <div id="c7" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eric Williams</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ericwill&#64;redhat.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ericwill&#64;redhat.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-08-05 13:57:20 EDT
        </span>

      </div>




<pre class="bz_comment_text">This bug is still reproducible for me. Assigning to Ian.</pre>
    </div>

    <div id="c8" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eric Williams</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ericwill&#64;redhat.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ericwill&#64;redhat.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-08-17 14:10:39 EDT
        </span>

      </div>




<pre class="bz_comment_text">*** <a class="bz_bug_link 
          bz_status_CLOSED  bz_closed"
   title="CLOSED DUPLICATE - (Gtk) JVM Crashs during resizing Composite"
   href="show_bug.cgi?id=218877">Bug 218877</a> has been marked as a duplicate of this bug. ***</pre>
    </div>

    <div id="c9" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eclipse Genie</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=genie&#64;eclipse.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=genie&#64;eclipse.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-08-18 15:50:08 EDT
        </span>

      </div>




<pre class="bz_comment_text">New Gerrit change created: <a href="https://git.eclipse.org/r/79294">https://git.eclipse.org/r/79294</a></pre>
    </div>

    <div id="c10" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ian Pun</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ipun&#64;redhat.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ipun&#64;redhat.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2017-05-30 16:35:37 EDT
        </span>

      </div>




<pre class="bz_comment_text">Hi, due to some other matters I have not been able to follow up with the bug. I will reassign this back to anyone who is interested in working on this.</pre>
    </div>

    <div id="c11" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andrey Loskutov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=loskutov&#64;gmx.de" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=loskutov&#64;gmx.de" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-03-28 06:28:47 EDT
        </span>

      </div>




<pre class="bz_comment_text">We probably hit this one in our application based on 4.10. Strange enough, there were no JVM dump file, but Eclipse disappears without a comment and the only trace I've found was the line printed to standard error:

**
Gtk:ERROR:gtktreestore.c:596:gtk_tree_store_get_path: assertion failed: (G_NODE (iter-&gt;user_data)-&gt;parent != NULL)

The snippet from <a href="show_bug.cgi?id=182598#c5">comment 5</a> crashes perfectly with the current SWT head, BUT I see the JVM dump and the GTK errors are *different*:

(SWT:25478): Gtk-CRITICAL **: gtk_cell_area_apply_attributes: assertion 'iter != NULL' failed

(SWT:25478): Gtk-CRITICAL **: gtk_tree_model_get_path: assertion 'iter != NULL' failed

(SWT:25478): Gtk-CRITICAL **: gtk_tree_model_get_path: assertion 'iter != NULL' failed

(SWT:25478): Gtk-CRITICAL **: gtk_tree_view_row_expanded: assertion 'path != NULL' failed
#
# A fatal error has been detected by the Java Runtime Environment:
[...]

The original example <span class=""><a href="attachment.cgi?id=63930" name="attach_63930" title="Standalone snippet">attachment 63930</a> <a href="attachment.cgi?id=63930&amp;action=edit" title="Standalone snippet">[details]</a></span> from <a class="bz_bug_link 
          bz_status_VERIFIED  bz_closed"
   title="VERIFIED FIXED - [Viewers] Virtual TreeViewer/ILazyTreePathContentProvider: preservingSelection and refresh not always working"
   href="show_bug.cgi?id=172640">bug 172640</a> does NOT crash SWT today.

We will investigate.</pre>
    </div>

    <div id="c12" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andrey Loskutov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=loskutov&#64;gmx.de" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=loskutov&#64;gmx.de" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-03-28 08:44:59 EDT
        </span>

      </div>




<pre class="bz_comment_text"><a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - GTK Error calling TreeItem.getExpanded() on a tree item being disposed."
   href="show_bug.cgi?id=39443">Bug 39443</a> (fixed) is similar but example doesn't crash SWT from today.</pre>
    </div>

    <div id="c13" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eric Williams</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ericwill&#64;redhat.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ericwill&#64;redhat.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-03-28 09:02:32 EDT
        </span>

      </div>




<pre class="bz_comment_text">I used to experience this bug pretty frequently, IIRC it was more reproducible when debugging TreeItem code (I think it was TreeItem.setImage()) but I don't have any conclusive proof.</pre>
    </div>

    <div id="c14" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andrey Loskutov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=loskutov&#64;gmx.de" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=loskutov&#64;gmx.de" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-03-28 09:05:47 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Eric Williams from <a href="show_bug.cgi?id=182598#c13">comment #13</a>)
<span class="quote">&gt; I used to experience this bug pretty frequently, IIRC it was more
&gt; reproducible when debugging TreeItem code (I think it was
&gt; TreeItem.setImage()) but I don't have any conclusive proof.</span >

Was SWT crashing or only some GTK errors were reported?</pre>
    </div>

    <div id="c15" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eric Williams</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ericwill&#64;redhat.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ericwill&#64;redhat.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-03-28 09:09:16 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Andrey Loskutov from <a href="show_bug.cgi?id=182598#c14">comment #14</a>)
<span class="quote">&gt; (In reply to Eric Williams from <a href="show_bug.cgi?id=182598#c13">comment #13</a>)
&gt; &gt; I used to experience this bug pretty frequently, IIRC it was more
&gt; &gt; reproducible when debugging TreeItem code (I think it was
&gt; &gt; TreeItem.setImage()) but I don't have any conclusive proof.
&gt; 
&gt; Was SWT crashing or only some GTK errors were reported?</span >

SWT was crashing without an hs_err*.log file and when I tried doing it in a child Eclipse the same assertions as here were reported.

IIRC this was in 2015 so it would have been Mars/Neon times. And again, I didn't find a conclusive way to reproduce it, but I was working on TreeItem bugs at the time and it seemed to crash a lot when debugging that code.</pre>
    </div>

    <div id="c16" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andrey Loskutov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=loskutov&#64;gmx.de" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=loskutov&#64;gmx.de" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-03-28 11:09:10 EDT
        </span>

      </div>




<pre class="bz_comment_text">We are closer now to reproduce it in our software.

It must be a virtual tree. The tree must enter org.eclipse.swt.widgets.Tree.setItemCount(long, int) twice with parentIter == 0 and the second call must have count == 0.

Means, while Tree.setItemCount call we get a callback from GTK which is dispatched to the clients which again call Tree.setItemCount on the *same* tree. This most likely invalidates iterator and as soon as the inner Tree.setItemCount call is done, the outer one crashes VM.

I'm working on creating a standalone reproducer.</pre>
    </div>

    <div id="c17" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simeon Andreev</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=simeon.danailov.andreev&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=simeon.danailov.andreev&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-03-29 08:22:02 EDT
        </span>

      </div>




<pre class="bz_comment_text">So far no luck with the SWT reproduction snippet; I'm unable to reproduce this sequence:

	at org.eclipse.swt.widgets.Tree.checkData(Tree.java:331)
	at org.eclipse.swt.widgets.Tree.cellDataProc(Tree.java:264)
	at org.eclipse.swt.widgets.Display.cellDataProc(Display.java:884)
	at org.eclipse.swt.internal.gtk.GTK._gtk_tree_store_remove(Native Method)
	at org.eclipse.swt.internal.gtk.GTK.gtk_tree_store_remove(GTK.java:7283)
	at org.eclipse.swt.widgets.Tree.destroyItem(Tree.java:1123)

The GTK+ call just doesn't cause a Display.cellDataProc(). Eric any idea why removing an item in the GTK+ tree model would cause Dislay.cellDataProc() in the same call? I tried with different selections in the tree, scrollbars and so on. But the Display.cellDataProc calls come only after the Tree.destroyItem() code is fully through.</pre>
    </div>

    <div id="c18" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eric Williams</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ericwill&#64;redhat.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ericwill&#64;redhat.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-03-29 08:28:06 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Simeon Andreev from <a href="show_bug.cgi?id=182598#c17">comment #17</a>)
<span class="quote">&gt; So far no luck with the SWT reproduction snippet; I'm unable to reproduce
&gt; this sequence:
&gt; 
&gt; 	at org.eclipse.swt.widgets.Tree.checkData(Tree.java:331)
&gt; 	at org.eclipse.swt.widgets.Tree.cellDataProc(Tree.java:264)
&gt; 	at org.eclipse.swt.widgets.Display.cellDataProc(Display.java:884)
&gt; 	at org.eclipse.swt.internal.gtk.GTK._gtk_tree_store_remove(Native Method)
&gt; 	at org.eclipse.swt.internal.gtk.GTK.gtk_tree_store_remove(GTK.java:7283)
&gt; 	at org.eclipse.swt.widgets.Tree.destroyItem(Tree.java:1123)
&gt; 
&gt; The GTK+ call just doesn't cause a Display.cellDataProc(). Eric any idea why
&gt; removing an item in the GTK+ tree model would cause Dislay.cellDataProc() in
&gt; the same call? I tried with different selections in the tree, scrollbars and
&gt; so on. But the Display.cellDataProc calls come only after the
&gt; Tree.destroyItem() code is fully through.</span >

CellDataProc is callback that only gets registered when the tree model changes, i.e. the content of the tree.

The GTK docs about this callback are here: <a href="https://developer.gnome.org/gtk3/stable/GtkTreeViewColumn.html#GtkTreeCellDataFunc">https://developer.gnome.org/gtk3/stable/GtkTreeViewColumn.html#GtkTreeCellDataFunc</a>

You can see where we enable it by doing a call hierarchy on gtk_tree_view_column_set_cell_data_func().</pre>
    </div>

    <div id="c19" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simeon Andreev</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=simeon.danailov.andreev&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=simeon.danailov.andreev&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-03-29 10:13:55 EDT
        </span>

      </div>




<pre class="bz_comment_text">Well, after trying to write a JFace snippet and failing, I did notice that we have a TreeViewer.refresh() on the stack (in fact at the beginning of the stack). This refresh calls TreeItem.clearAll() on the tree input object.

After playing around with calling Tree.clearAll() and TreeItem.clearAll(), here is a snippet which (at least on my workstation) reproduces the crash reported here:

public class <a class="bz_bug_link 
          bz_status_VERIFIED  bz_closed"
   title="VERIFIED FIXED - assertion failed in gtktreestore.c"
   href="show_bug.cgi?id=182598">Bug182598</a>_GTK_crash_recursive_set_item_count {

	// If we want to have a Java dump on crash, we need to set a different number of tree items on SWT.SetData callback.
	private static final boolean CRASH_WITH_DUMP = false;

	public static void main(String[] args) {
		
		Display display = new Display();
		Shell shell = new Shell(display);
		shell.setSize(300, 200);
		shell.setLayout(new FillLayout());

		final Tree tree = new Tree(shell, SWT.VIRTUAL);
		tree.addListener(SWT.SetData, new Listener() {
			&#64;Override
			public void handleEvent(Event event) {
				int itemCount = CRASH_WITH_DUMP ? 0 : 1;
				tree.setItemCount(itemCount);
			}
		});

		int N = 7;
		for (int i = 0; i &lt; N; ++i) {
			TreeItem item = new TreeItem(tree, SWT.NONE);
			int c = i + 1;
			item.setText(&quot;item &quot; + c);
			if (i &gt;= 5) {
				item.setText(&quot;very long long long long long long item &quot; + c);
			}
			item.setData(&quot;something &quot; + c);
			tree.setSelection(item);
		}

		Button button = new Button(shell, SWT.NONE);
		button.setText(&quot;Tree.clearAll()&quot;);
		button.addSelectionListener(new SelectionListener() {
			&#64;Override
			public void widgetSelected(SelectionEvent e) {
				tree.clearAll(true);
			}

			&#64;Override
			public void widgetDefaultSelected(SelectionEvent e) {
			}
		});

		shell.open();

		while (!shell.isDisposed()) {
			if (!display.readAndDispatch()) {
				display.sleep();
			}
		}
		display.dispose();
	}
}

Result (all on standard error):


(SWT:10595): Gtk-CRITICAL **: gtk_box_gadget_distribute: assertion 'size &gt;= 0' failed in GtkScrollbar
**
Gtk:ERROR:gtktreestore.c:596:gtk_tree_store_get_path: assertion failed: (G_NODE (iter-&gt;user_data)-&gt;parent != NULL)


Note that the display size and number of items in the tree and the text of the items seems to be magical; changing those changes the nature of the crash (crash dump vs. no crash dump). Either we need the scrollbars or its timing related.

Changing CRASH_WITH_DUMP=true also causes a crash dump to be produced. The difference with this flag set to true, is that during the SWT.SetData callback we set 0 tree elements instead of 1.

I.e. set CRASH_WITH_DUMP=true and the snippet reproduces <a class="bz_bug_link 
          bz_status_CLOSED  bz_closed"
   title="CLOSED DUPLICATE - [GTK3] SWT crashes when setting TreeItem item count during TreeItem destruction callback"
   href="show_bug.cgi?id=545919">bug 545919</a>. Set it to =false and the snippet reproduces this bug.

Note that in our product we ran into this with a different stack trace:

	at org.eclipse.swt.widgets.Tree.setItemCount(Tree.java:3211)
	at org.eclipse.swt.widgets.TreeItem.setItemCount(TreeItem.java:1634)
	at org.eclipse.jface.viewers.TreeViewer.lambda$2(TreeViewer.java:392)
	at org.eclipse.jface.viewers.TreeViewer.preservingSelection(TreeViewer.java:358)
	at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1410)
	at org.eclipse.jface.viewers.TreeViewer.setChildCount(TreeViewer.java:384)
	at XXX                   // *** OUR PRODUCT SPECIFIES CHILD COUNT HERE
	at org.eclipse.jface.viewers.TreeViewer.virtualLazyUpdateWidget(TreeViewer.java:992)
	at org.eclipse.jface.viewers.TreeViewer.lambda$1(TreeViewer.java:258)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:89)
	at org.eclipse.swt.widgets.Display.sendEvent(Display.java:5664)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1386)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1412)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1395)
	at org.eclipse.swt.widgets.Tree.checkData(Tree.java:331)
	at org.eclipse.swt.widgets.Tree.cellDataProc(Tree.java:264)
	at org.eclipse.swt.widgets.Display.cellDataProc(Display.java:884)
	at org.eclipse.swt.internal.gtk.GTK._gtk_tree_store_remove(Native Method)
	at org.eclipse.swt.internal.gtk.GTK.gtk_tree_store_remove(GTK.java:7283)
	at org.eclipse.swt.widgets.Tree.destroyItem(Tree.java:1123)
	at org.eclipse.swt.widgets.TreeItem.destroyWidget(TreeItem.java:372)
	at org.eclipse.swt.widgets.Widget.release(Widget.java:1213)
	at org.eclipse.swt.widgets.Widget.dispose(Widget.java:522)
	at org.eclipse.swt.widgets.Tree.remove(Tree.java:2718)
	at org.eclipse.swt.widgets.Tree.setItemCount(Tree.java:3226)
	at org.eclipse.swt.widgets.TreeItem.setItemCount(TreeItem.java:1634)
	at org.eclipse.jface.viewers.TreeViewer.lambda$2(TreeViewer.java:392)
	at org.eclipse.jface.viewers.TreeViewer.preservingSelection(TreeViewer.java:358)
	at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1410)
	at org.eclipse.jface.viewers.TreeViewer.setChildCount(TreeViewer.java:384)
	at XXX                   // *** OUR PRODUCT SPECIFIES CHILD COUNT HERE
	at org.eclipse.jface.viewers.TreeViewer.virtualLazyUpdateWidget(TreeViewer.java:992)
	at org.eclipse.jface.viewers.TreeViewer.lambda$1(TreeViewer.java:258)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:89)
	at org.eclipse.swt.widgets.Display.sendEvent(Display.java:5664)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1386)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1412)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1395)
	at org.eclipse.swt.widgets.Tree.checkData(Tree.java:331)
	at org.eclipse.swt.widgets.TreeItem.getItemCount(TreeItem.java:779)
	at org.eclipse.jface.viewers.TreeViewer.replace(TreeViewer.java:463)
	at XXX                   // *** OUR PRODUCT REPLACES A TREE ITEM HERE
	at org.eclipse.jface.viewers.TreeViewer.virtualLazyUpdateWidget(TreeViewer.java:992)
	at org.eclipse.jface.viewers.TreeViewer.lambda$1(TreeViewer.java:258)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:89)
	at org.eclipse.swt.widgets.Display.sendEvent(Display.java:5664)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1386)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1412)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1395)
	at org.eclipse.swt.widgets.Tree.checkData(Tree.java:331)
	at org.eclipse.swt.widgets.Tree.cellDataProc(Tree.java:264)
	at org.eclipse.swt.widgets.Display.cellDataProc(Display.java:884)
	at org.eclipse.swt.internal.gtk.GTK._gtk_tree_store_remove(Native Method)
	at org.eclipse.swt.internal.gtk.GTK.gtk_tree_store_remove(GTK.java:7283)
	at org.eclipse.swt.widgets.Tree.destroyItem(Tree.java:1123)
	at org.eclipse.swt.widgets.TreeItem.destroyWidget(TreeItem.java:372)
	at org.eclipse.swt.widgets.Widget.release(Widget.java:1213)
	at org.eclipse.swt.widgets.Widget.dispose(Widget.java:522)
	at org.eclipse.swt.widgets.Tree.remove(Tree.java:2718)
	at org.eclipse.swt.widgets.Tree.setItemCount(Tree.java:3226)
	at org.eclipse.swt.widgets.Tree.setItemCount(Tree.java:3269)
	at org.eclipse.jface.viewers.TreeViewer.lambda$2(TreeViewer.java:386)
	at org.eclipse.jface.viewers.TreeViewer.preservingSelection(TreeViewer.java:358)
	at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1410)
	at org.eclipse.jface.viewers.TreeViewer.setChildCount(TreeViewer.java:384)
	at XXX                   // *** OUR PRODUCT SPECIFIES CHILD COUNT HERE
	at org.eclipse.jface.viewers.TreeViewer.virtualLazyUpdateChildCount(TreeViewer.java:1019)
	at org.eclipse.jface.viewers.TreeViewer.virtualRefreshExpandedItems(TreeViewer.java:695)
	at org.eclipse.jface.viewers.TreeViewer.internalRefreshStruct(TreeViewer.java:674)
	at org.eclipse.jface.viewers.AbstractTreeViewer.internalRefresh(AbstractTreeViewer.java:1929)
	at org.eclipse.jface.viewers.AbstractTreeViewer.internalRefresh(AbstractTreeViewer.java:1886)
	at org.eclipse.jface.viewers.AbstractTreeViewer.internalRefresh(AbstractTreeViewer.java:1872)
	at org.eclipse.jface.viewers.StructuredViewer.lambda$2(StructuredViewer.java:1510)
	at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1449)
	at org.eclipse.jface.viewers.TreeViewer.preservingSelection(TreeViewer.java:363)
	at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1410)
	at org.eclipse.jface.viewers.StructuredViewer.refresh(StructuredViewer.java:1510)
	at org.eclipse.jface.viewers.ColumnViewer.refresh(ColumnViewer.java:526)
	at org.eclipse.jface.viewers.StructuredViewer.refresh(StructuredViewer.java:1469)
        ...
        Data changes in out product, which triggers a tree viewer update in a UI job

This stack trace is very clear cut, there is an item being destroyed on the stack trace and then a chain of listeners is called.

In my snippet the call to the SWT.SetData listener is coming from the main GTK+ loop. There is no item destruction on the stack.</pre>
    </div>

    <div id="c20" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simeon Andreev</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=simeon.danailov.andreev&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=simeon.danailov.andreev&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-03-29 10:16:13 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=278071" name="attach_278071" title="Snippet to reproduce the problem with. Run and click on the only button, observe standard error output.">attachment 278071</a> <a href="attachment.cgi?id=278071&amp;action=edit" title="Snippet to reproduce the problem with. Run and click on the only button, observe standard error output.">[details]</a></span>
Snippet to reproduce the problem with. Run and click on the only button, observe standard error output.</pre>
    </div>

    <div id="c21" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simeon Andreev</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=simeon.danailov.andreev&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=simeon.danailov.andreev&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-03-29 11:05:44 EDT
        </span>

      </div>




<pre class="bz_comment_text">This is definitely timing related. Play around with the original number of items in the tree, right now I can't reproduce with 7 but I can reproduce with 10.</pre>
    </div>

    <div id="c22" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c22">Comment 22</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simeon Andreev</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=simeon.danailov.andreev&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=simeon.danailov.andreev&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-03-29 11:15:10 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=278072" name="attach_278072" title="Video showing the problem when using the attached snippet in Eclipse 4.7.3. Behaviour varies based on number of elements in the tree.">attachment 278072</a> <a href="attachment.cgi?id=278072&amp;action=edit" title="Video showing the problem when using the attached snippet in Eclipse 4.7.3. Behaviour varies based on number of elements in the tree.">[details]</a></span>
Video showing the problem when using the attached snippet in Eclipse 4.7.3. Behaviour varies based on number of elements in the tree.

I can also reproduce on:

Eclipse SDK
Version: Oxygen.3 (4.7.3)
Build id: M20180221-1700

Again, the initial number of elements in the tree varies. Play around with some numbers between 10 and 50.

Do note that on 4.7.3 setting the last element to be selected (done by the reproduction snippet) does not automatically scroll the tree to the bottom. I have to scroll manually to the button, before clicking on the snippet button, in order to reproduce the behaviour with 4.7.3.</pre>
    </div>

    <div id="c23" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c23">Comment 23</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simeon Andreev</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=simeon.danailov.andreev&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=simeon.danailov.andreev&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-04-01 10:04:43 EDT
        </span>

      </div>




<pre class="bz_comment_text">Stack trace in GTK:

Thread #22 [java] 28324 [core: 0] (Suspended : Breakpoint)	
	gtk_tree_store_get_path() at gtktreestore.c:597 0x7fffa84bade3	
	gtk_cell_area_real_apply_attributes() at gtkcellarea.c:1,290 0x7fffa82a9bdf	
	gtk_cell_area_box_apply_attributes() at gtkcellareabox.c:1,311 0x7fffa82af8af	
	_gtk_marshal_VOID__OBJECT_BOXED_BOOLEAN_BOOLEANv() at gtkmarshalers.c:5,027 0x7fffa83a53f8	
	_g_closure_invoke_va() at gclosure.c:867 0x7fffa08acb97	
	g_signal_emit_valist() at gsignal.c:3,300 0x7fffa08c6157	
	g_signal_emit() at gsignal.c:3,447 0x7fffa08c6ddf	
	gtk_cell_area_apply_attributes() at gtkcellarea.c:2,373 0x7fffa82ab824	
	gtk_tree_view_column_cell_set_cell_data() at gtktreeviewcolumn.c:2,820 0x7fffa84dc3d9	
	gtk_tree_view_bin_draw() at gtktreeview.c:5,173 0x7fffa84d30d7	
	draw_bin() at gtktreeview.c:5,608 0x7fffa84d475d	
	_gtk_pixel_cache_repaint() at gtkpixelcache.c:357 0x7fffa83f8bff	
	_gtk_pixel_cache_draw() at gtkpixelcache.c:447 0x7fffa83f8bff	
	gtk_tree_view_draw() at gtktreeview.c:5,651 0x7fffa84c0988	
	_gtk_marshal_BOOLEAN__BOXED() at gtkmarshalers.c:86 0x7fffa839f055	
	gtk_widget_draw_marshaller() at gtkwidget.c:939 0x7fffa84e22ff	
	g_closure_invoke() at gclosure.c:804 0x7fffa08ac8e2	
	signal_emit_unlocked_R() at gsignal.c:3,673 0x7fffa08be83b	
	g_signal_emit_valist() at gsignal.c:3,401 0x7fffa08c67dc	
	g_signal_emit() at gsignal.c:3,447 0x7fffa08c6ddf	
	gtk_widget_draw_internal() at gtkwidget.c:7,011 0x7fffa84ed04a	
	gtk_container_propagate_draw() at gtkcontainer.c:3,838 0x7fffa82de084	
	gtk_container_draw() at gtkcontainer.c:3,658 0x7fffa82de132	
	gtk_scrolled_window_render() at gtkscrolledwindow.c:2,089 0x7fffa842530b	
	gtk_css_custom_gadget_draw() at gtkcsscustomgadget.c:159 0x7fffa82e2ee1	
	gtk_css_gadget_draw() at gtkcssgadget.c:877 0x7fffa82e7dd1	
	gtk_scrolled_window_draw() at gtkscrolledwindow.c:3,001 0x7fffa8423881	
	gtk_widget_draw_internal() at gtkwidget.c:7,018 0x7fffa84ece28	
	gtk_container_propagate_draw() at gtkcontainer.c:3,838 0x7fffa82de084	
	gtk_container_draw() at gtkcontainer.c:3,658 0x7fffa82de132	
	gtk_widget_draw_internal() at gtkwidget.c:7,018 0x7fffa84ece28	
	gtk_container_propagate_draw() at gtkcontainer.c:3,838 0x7fffa82de084	
	gtk_container_draw() at gtkcontainer.c:3,658 0x7fffa82de132	
	_gtk_marshal_BOOLEAN__BOXED() at gtkmarshalers.c:86 0x7fffa839f055	
	gtk_widget_draw_marshaller() at gtkwidget.c:939 0x7fffa84e22ff	
	g_closure_invoke() at gclosure.c:804 0x7fffa08ac968	
	signal_emit_unlocked_R() at gsignal.c:3,673 0x7fffa08be83b	
	g_signal_emit_valist() at gsignal.c:3,401 0x7fffa08c67dc	
	g_signal_emit() at gsignal.c:3,447 0x7fffa08c6ddf	
	gtk_widget_draw_internal() at gtkwidget.c:7,011 0x7fffa84ed04a	
	gtk_container_propagate_draw() at gtkcontainer.c:3,838 0x7fffa82de084	
	gtk_container_draw() at gtkcontainer.c:3,658 0x7fffa82de132	
	gtk_scrolled_window_render() at gtkscrolledwindow.c:2,089 0x7fffa842530b	
	gtk_css_custom_gadget_draw() at gtkcsscustomgadget.c:159 0x7fffa82e2ee1	
	gtk_css_gadget_draw() at gtkcssgadget.c:877 0x7fffa82e7dd1	
	gtk_scrolled_window_draw() at gtkscrolledwindow.c:3,001 0x7fffa8423881	
	gtk_widget_draw_internal() at gtkwidget.c:7,018 0x7fffa84ece28	
	gtk_container_propagate_draw() at gtkcontainer.c:3,838 0x7fffa82de084	
	gtk_container_draw() at gtkcontainer.c:3,658 0x7fffa82de132	
	gtk_box_draw_contents() at gtkbox.c:448 0x7fffa8291064	
	gtk_css_custom_gadget_draw() at gtkcsscustomgadget.c:159 0x7fffa82e2ee1	
	gtk_css_gadget_draw() at gtkcssgadget.c:877 0x7fffa82e7dd1	
	gtk_box_draw() at gtkbox.c:457 0x7fffa82938f1	
	gtk_widget_draw_internal() at gtkwidget.c:7,018 0x7fffa84ece28	
	gtk_container_propagate_draw() at gtkcontainer.c:3,838 0x7fffa82de084	
	gtk_container_draw() at gtkcontainer.c:3,658 0x7fffa82de132	
	gtk_window_draw() at gtkwindow.c:10,212 0x7fffa84fc6c9	
	gtk_widget_draw_internal() at gtkwidget.c:7,018 0x7fffa84ece28	
	gtk_widget_render() at gtkwidget.c:17,514 0x7fffa84f80ce	
	gtk_main_do_event() at gtkmain.c:1,824 0x7fffa839e14b	
	Java_org_eclipse_swt_internal_gtk_GTK__1gtk_1main_1do_1event() at 0x7fffd44dc10d	
	0x7fffe1018407	
	0x7ffff7fcbb70	
	0x7ffff7fcba68	
	0x7ffff7fcba70	
	0x0

Not really enlightening so far.</pre>
    </div>

    <div id="c24" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c24">Comment 24</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simeon Andreev</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=simeon.danailov.andreev&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=simeon.danailov.andreev&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-04-01 10:11:16 EDT
        </span>

      </div>




<pre class="bz_comment_text">Eric, on the GTK+ stack trace I see we are emitting the signal: SIGNAL_APPLY_ATTRIBUTES

In the SWT code for there is a blocked signal: &quot;row-changed&quot; (see org.eclipse.swt.widgets.Tree.checkData(TreeItem))

Should we maybe also block the signal which is on the GTK+ stack trace (SIGNAL_APPLY_ATTRIBUTES)? I do see the following code:

boolean checkData (TreeItem item) {
	if (item.cached) return true;
	if ((style &amp; SWT.VIRTUAL) != 0) {
		item.cached = true;

Since TreeItem.cached is set to true, maybe its expected that Tree.checkData loads/applies attributes?</pre>
    </div>

    <div id="c25" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c25">Comment 25</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eric Williams</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ericwill&#64;redhat.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ericwill&#64;redhat.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-04-01 10:13:07 EDT
        </span>

      </div>




<pre class="bz_comment_text">Do you mean the &quot;apply-attributes&quot; signal in GtkCellArea? It's worth a try, though I have a feeling it could have other consequences.</pre>
    </div>

    <div id="c26" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c26">Comment 26</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eclipse Genie</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=genie&#64;eclipse.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=genie&#64;eclipse.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-04-01 10:52:03 EDT
        </span>

      </div>




<pre class="bz_comment_text">New Gerrit change created: <a href="https://git.eclipse.org/r/139847">https://git.eclipse.org/r/139847</a></pre>
    </div>

    <div id="c27" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c27">Comment 27</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eclipse Genie</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=genie&#64;eclipse.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=genie&#64;eclipse.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-04-03 09:53:47 EDT
        </span>

      </div>




<pre class="bz_comment_text">Gerrit change <a href="https://git.eclipse.org/r/139847">https://git.eclipse.org/r/139847</a> was merged to [master].
Commit: <a href="http://git.eclipse.org/c/platform/eclipse.platform.swt.git/commit/?id=cb06a2f04ad9dc609519396126b5400dbbaf8063">http://git.eclipse.org/c/platform/eclipse.platform.swt.git/commit/?id=cb06a2f04ad9dc609519396126b5400dbbaf8063</a></pre>
    </div>

    <div id="c28" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c28">Comment 28</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eric Williams</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ericwill&#64;redhat.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ericwill&#64;redhat.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-04-03 09:55:26 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Eclipse Genie from <a href="show_bug.cgi?id=182598#c27">comment #27</a>)
<span class="quote">&gt; Gerrit change <a href="https://git.eclipse.org/r/139847">https://git.eclipse.org/r/139847</a> was merged to [master].
&gt; Commit:
&gt; <a href="http://git.eclipse.org/c/platform/eclipse.platform.swt.git/commit/">http://git.eclipse.org/c/platform/eclipse.platform.swt.git/commit/</a>
&gt; ?id=cb06a2f04ad9dc609519396126b5400dbbaf8063</span >

In master now, thanks for the patch!</pre>
    </div>

    <div id="c29" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c29">Comment 29</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andrey Loskutov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=loskutov&#64;gmx.de" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=loskutov&#64;gmx.de" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-04-04 03:11:37 EDT
        </span>

      </div>




<pre class="bz_comment_text">We have 2 regressions in UI tests on all 3 GTK builds (means: the fails are stable).

<a href="https://download.eclipse.org/eclipse/downloads/drops4/I20190403-1800/testresults/html/org.eclipse.ui.tests_ep412I-unit-cen64-gtk3-java8_linux.gtk.x86_64_8.0.html">https://download.eclipse.org/eclipse/downloads/drops4/I20190403-1800/testresults/html/org.eclipse.ui.tests_ep412I-unit-cen64-gtk3-java8_linux.gtk.x86_64_8.0.html</a>

Cannot remove a tree item while its data is being set. At item 0 in range [0, 10). 

org.eclipse.swt.SWTException: Cannot remove a tree item while its data is being set. At item 0 in range [0, 10).
at org.eclipse.swt.widgets.Tree.checkSetDataInProcessBeforeRemoval(Tree.java:4221)
at org.eclipse.swt.widgets.Tree.remove(Tree.java:2832)
at org.eclipse.swt.widgets.Tree.setItemCount(Tree.java:3359)
at org.eclipse.swt.widgets.TreeItem.setItemCount(TreeItem.java:1659)
at org.eclipse.jface.viewers.TreeViewer.lambda$2(TreeViewer.java:392)
at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1448)
at org.eclipse.jface.viewers.TreeViewer.preservingSelection(TreeViewer.java:363)
at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1409)
at org.eclipse.jface.viewers.TreeViewer.setChildCount(TreeViewer.java:384)
at org.eclipse.jface.tests.viewers.TestModelLazyTreeContentProvider.updateElement(TestModelLazyTreeContentProvider.java:37)
at org.eclipse.jface.viewers.TreeViewer.virtualLazyUpdateWidget(TreeViewer.java:992)
at org.eclipse.jface.viewers.TreeViewer.createChildren(TreeViewer.java:596)
at org.eclipse.jface.viewers.AbstractTreeViewer.createChildren(AbstractTreeViewer.java:766)
at org.eclipse.jface.viewers.AbstractTreeViewer.internalExpand(AbstractTreeViewer.java:1681)
at org.eclipse.jface.viewers.AbstractTreeViewer.setSelectionToWidget(AbstractTreeViewer.java:2545)
at org.eclipse.jface.viewers.AbstractTreeViewer.setSelectionToWidget(AbstractTreeViewer.java:3014)
at org.eclipse.jface.viewers.TreeViewer.replace(TreeViewer.java:490)
at org.eclipse.jface.tests.viewers.TestModelLazyTreeContentProvider.updateElement(TestModelLazyTreeContentProvider.java:36)
at org.eclipse.jface.viewers.TreeViewer.virtualLazyUpdateWidget(TreeViewer.java:992)
at org.eclipse.jface.viewers.TreeViewer.lambda$1(TreeViewer.java:258)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:89)
at org.eclipse.swt.widgets.Display.sendEvent(Display.java:5933)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1399)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1425)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1408)
at org.eclipse.swt.widgets.Tree.checkData(Tree.java:333)
at org.eclipse.swt.widgets.Tree.cellDataProc(Tree.java:265)
at org.eclipse.swt.widgets.Display.cellDataProc(Display.java:893)
at org.eclipse.swt.internal.gtk.GTK._gtk_main_do_event(Native Method)
at org.eclipse.swt.internal.gtk.GTK.gtk_main_do_event(GTK.java:4179)
at org.eclipse.swt.widgets.Display.eventProc(Display.java:1409)
at org.eclipse.swt.internal.gtk.OS._g_main_context_iteration(Native Method)
at org.eclipse.swt.internal.gtk.OS.g_main_context_iteration(OS.java:1609)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:4721)
at org.eclipse.ui.tests.harness.util.DisplayHelper.driveEventQueue(DisplayHelper.java:177)
at org.eclipse.ui.tests.harness.util.DisplayHelper.waitForCondition(DisplayHelper.java:78)
at org.eclipse.jface.tests.viewers.StructuredViewerTest.bulkChange(StructuredViewerTest.java:124)
at org.eclipse.jface.tests.viewers.StructuredViewerTest.testWorldChanged(StructuredViewerTest.java:526)
at org.eclipse.jface.tests.viewers.VirtualLazyTreeViewerTest.testWorldChanged(VirtualLazyTreeViewerTest.java:224)


Cannot remove a tree item while its data is being set. At item 0 in range [0, 10). 

org.eclipse.swt.SWTException: Cannot remove a tree item while its data is being set. At item 0 in range [0, 10).
at org.eclipse.swt.widgets.Tree.checkSetDataInProcessBeforeRemoval(Tree.java:4221)
at org.eclipse.swt.widgets.Tree.remove(Tree.java:2832)
at org.eclipse.swt.widgets.Tree.setItemCount(Tree.java:3359)
at org.eclipse.swt.widgets.TreeItem.setItemCount(TreeItem.java:1659)
at org.eclipse.jface.viewers.TreeViewer.lambda$2(TreeViewer.java:392)
at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1448)
at org.eclipse.jface.viewers.TreeViewer.preservingSelection(TreeViewer.java:363)
at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1409)
at org.eclipse.jface.viewers.TreeViewer.setChildCount(TreeViewer.java:384)
at org.eclipse.jface.tests.viewers.TestModelLazyTreeContentProvider.updateElement(TestModelLazyTreeContentProvider.java:37)
at org.eclipse.jface.viewers.TreeViewer.virtualLazyUpdateWidget(TreeViewer.java:992)
at org.eclipse.jface.viewers.TreeViewer.createChildren(TreeViewer.java:596)
at org.eclipse.jface.viewers.AbstractTreeViewer.createChildren(AbstractTreeViewer.java:766)
at org.eclipse.jface.viewers.AbstractTreeViewer.internalExpand(AbstractTreeViewer.java:1681)
at org.eclipse.jface.viewers.AbstractTreeViewer.setSelectionToWidget(AbstractTreeViewer.java:2545)
at org.eclipse.jface.viewers.AbstractTreeViewer.setSelectionToWidget(AbstractTreeViewer.java:3014)
at org.eclipse.jface.viewers.TreeViewer.replace(TreeViewer.java:490)
at org.eclipse.jface.tests.viewers.TestModelLazyTreeContentProvider.updateElement(TestModelLazyTreeContentProvider.java:36)
at org.eclipse.jface.viewers.TreeViewer.virtualLazyUpdateWidget(TreeViewer.java:992)
at org.eclipse.jface.viewers.TreeViewer.lambda$1(TreeViewer.java:258)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:89)
at org.eclipse.swt.widgets.Display.sendEvent(Display.java:5933)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1399)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1425)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1408)
at org.eclipse.swt.widgets.Tree.checkData(Tree.java:333)
at org.eclipse.swt.widgets.Tree.cellDataProc(Tree.java:265)
at org.eclipse.swt.widgets.Display.cellDataProc(Display.java:893)
at org.eclipse.swt.internal.gtk.GTK._gtk_main_do_event(Native Method)
at org.eclipse.swt.internal.gtk.GTK.gtk_main_do_event(GTK.java:4179)
at org.eclipse.swt.widgets.Display.eventProc(Display.java:1409)
at org.eclipse.swt.internal.gtk.OS._g_main_context_iteration(Native Method)
at org.eclipse.swt.internal.gtk.OS.g_main_context_iteration(OS.java:1609)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:4721)
at org.eclipse.ui.tests.harness.util.DisplayHelper.driveEventQueue(DisplayHelper.java:177)
at org.eclipse.ui.tests.harness.util.DisplayHelper.waitForCondition(DisplayHelper.java:78)
at org.eclipse.jface.tests.viewers.StructuredViewerTest.bulkChange(StructuredViewerTest.java:124)
at org.eclipse.jface.tests.viewers.StructuredViewerTest.testSomeChildrenChanged(StructuredViewerTest.java:503)</pre>
    </div>

    <div id="c30" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c30">Comment 30</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simeon Andreev</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=simeon.danailov.andreev&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=simeon.danailov.andreev&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-04-04 03:27:00 EDT
        </span>

      </div>




<pre class="bz_comment_text">I'll take a look today.</pre>
    </div>

    <div id="c31" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c31">Comment 31</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simeon Andreev</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=simeon.danailov.andreev&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=simeon.danailov.andreev&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-04-04 08:38:27 EDT
        </span>

      </div>




<pre class="bz_comment_text">The initial patch was located directly after the following code in Tree.remove():

	GTK.gtk_tree_model_iter_nth_child (modelHandle, iter, parentIter, start);
	int[] value = new int[1];
	GTK.gtk_tree_model_get (modelHandle, iter, ID_COLUMN, value, -1);
	TreeItem item = value [0] != -1 ? items [value [0]] : null;

My change which uses Tree.items is too naive it seems. I'll try asking the GTK+ model for the item, as in this code.</pre>
    </div>

    <div id="c32" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c32">Comment 32</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eclipse Genie</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=genie&#64;eclipse.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=genie&#64;eclipse.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-04-04 09:19:46 EDT
        </span>

      </div>




<pre class="bz_comment_text">New Gerrit change created: <a href="https://git.eclipse.org/r/140045">https://git.eclipse.org/r/140045</a></pre>
    </div>

    <div id="c33" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c33">Comment 33</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eclipse Genie</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=genie&#64;eclipse.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=genie&#64;eclipse.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-04-04 10:08:05 EDT
        </span>

      </div>




<pre class="bz_comment_text">Gerrit change <a href="https://git.eclipse.org/r/140045">https://git.eclipse.org/r/140045</a> was merged to [master].
Commit: <a href="http://git.eclipse.org/c/platform/eclipse.platform.swt.git/commit/?id=f47aa33d971816803c1bcb5bb4c01e3cad5b3cc2">http://git.eclipse.org/c/platform/eclipse.platform.swt.git/commit/?id=f47aa33d971816803c1bcb5bb4c01e3cad5b3cc2</a></pre>
    </div>

    <div id="c34" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c34">Comment 34</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simeon Andreev</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=simeon.danailov.andreev&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=simeon.danailov.andreev&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-04-05 03:24:16 EDT
        </span>

      </div>




<pre class="bz_comment_text">Wait a bit and close this then?</pre>
    </div>

    <div id="c35" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c35">Comment 35</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andrey Loskutov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=loskutov&#64;gmx.de" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=loskutov&#64;gmx.de" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-04-05 03:30:20 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Simeon Andreev from <a href="show_bug.cgi?id=182598#c34">comment #34</a>)
<span class="quote">&gt; Wait a bit and close this then?</span >

Yes. I'm building new snapshot for us, and will run all tests over the weekend. On Monday we will see :-)

NB: Please check if this patch also addresses <a class="bz_bug_link 
          bz_status_CLOSED  bz_closed"
   title="CLOSED DUPLICATE - [GTK3] SWT crashes when setting TreeItem item count during TreeItem destruction callback"
   href="show_bug.cgi?id=545919">bug 545919</a>.</pre>
    </div>

    <div id="c36" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c36">Comment 36</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simeon Andreev</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=simeon.danailov.andreev&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=simeon.danailov.andreev&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-04-05 03:37:25 EDT
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; NB: Please check if this patch also addresses <a class="bz_bug_link 
          bz_status_CLOSED  bz_closed"
   title="CLOSED DUPLICATE - [GTK3] SWT crashes when setting TreeItem item count during TreeItem destruction callback"
   href="show_bug.cgi?id=545919">bug 545919</a>.</span >

Checked, I see an SWT exception instead of a crash. I'll close <a class="bz_bug_link 
          bz_status_CLOSED  bz_closed"
   title="CLOSED DUPLICATE - [GTK3] SWT crashes when setting TreeItem item count during TreeItem destruction callback"
   href="show_bug.cgi?id=545919">bug 545919</a> as duplicate.</pre>
    </div>

    <div id="c37" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c37">Comment 37</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simeon Andreev</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=simeon.danailov.andreev&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=simeon.danailov.andreev&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-04-05 03:37:38 EDT
        </span>

      </div>




<pre class="bz_comment_text">*** <a class="bz_bug_link 
          bz_status_CLOSED  bz_closed"
   title="CLOSED DUPLICATE - [GTK3] SWT crashes when setting TreeItem item count during TreeItem destruction callback"
   href="show_bug.cgi?id=545919">Bug 545919</a> has been marked as a duplicate of this bug. ***</pre>
    </div>

    <div id="c38" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c38">Comment 38</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andrey Loskutov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=loskutov&#64;gmx.de" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=loskutov&#64;gmx.de" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-04-05 03:56:13 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Simeon Andreev from <a href="show_bug.cgi?id=182598#c36">comment #36</a>)
<span class="quote">&gt; &gt; NB: Please check if this patch also addresses <a class="bz_bug_link 
          bz_status_CLOSED  bz_closed"
   title="CLOSED DUPLICATE - [GTK3] SWT crashes when setting TreeItem item count during TreeItem destruction callback"
   href="show_bug.cgi?id=545919">bug 545919</a>.
&gt; 
&gt; Checked, I see an SWT exception instead of a crash.</span >

Perfect.</pre>
    </div>

    <div id="c39" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c39">Comment 39</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andrey Loskutov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=loskutov&#64;gmx.de" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=loskutov&#64;gmx.de" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-04-08 10:35:52 EDT
        </span>

      </div>




<pre class="bz_comment_text">Looks good, we have no issues with tests on eclipse.org and with our own product builds.</pre>
    </div>

    <div id="c40" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=182598#c40">Comment 40</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andrey Loskutov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=loskutov&#64;gmx.de" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=loskutov&#64;gmx.de" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-04-08 10:39:25 EDT
        </span>

      </div>




<pre class="bz_comment_text">Verified in I20190407-1800.</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=182598">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=182598">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=182598">Clone This Bug</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>

<br>
</div>

    <div id="footer">
      <div class="intro"></div>
<ul id="useful-links">
  <li id="links-actions"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_bottom" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_bottom");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_bottom" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_bottom"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_bottom">
  <span class="separator">| </span>
  <a id="login_link_bottom" href="show_bug.cgi?id=182598&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_bottom')">Log In</a>

  <form action="show_bug.cgi?id=182598" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_bottom">
    <input id="Bugzilla_login_bottom" required
           name="Bugzilla_login" class="bz_login"
        placeholder="Login">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_bottom" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_bottom">
    <a href="#" onclick="return hide_mini_login_form('_bottom')">[x]</a>
  </form>
</li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
</ul>
  </li>

  




  
</ul>

      <div class="outro"></div>
    </div>

  </body>
</html>