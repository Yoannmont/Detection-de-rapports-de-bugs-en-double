<!DOCTYPE html>
<html lang="en">
  <head>
    <title>51693 &ndash; String drawing/measuring bench</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link href="https://bugs.eclipse.org/bugs/data/assets/03c4bb46b12126a79867f9a9f5323634.css?1593441374" rel="stylesheet" type="text/css">



    
<script type="text/javascript" src="https://bugs.eclipse.org/bugs/data/assets/a7c2f3a028f17a9aa60f56dc9d6e732d.js?1593441374"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/bugs',
                maxusermatches: 10
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    "You must enter a Description for this attachment.",
                component_required:
                    "You must select a Component for this bug.",
                description_required:
                    "You must enter a Description for this bug.",
                short_desc_required:
                    "You must enter a Summary for this bug.",
                version_required:
                    "You must select a Version for this bug."
            }
              , api_token: ''
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null,
                             "51693 – String drawing\/measuring bench",
                             "show_bug.cgi?id=51693" );
        document.title = "51693 – String drawing\/measuring bench";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "51693 – String drawing\/measuring bench", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();

    });
    // -->
    </script>
<script type="text/javascript" src="https://bugs.eclipse.org/bugs/data/assets/daf5e0fb6826e6a35280e622913f0c4a.js?1593441374"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico">
  </head>

  <body 
        class="bugs-eclipse-org-bugs
                 bz_bug
                 bz_status_CLOSED
                 bz_product_Platform
                 bz_component_SWT
                 bz_bug_51693 yui-skin-sam">

  <div id="header"><!-- 1.0@bugzilla.org -->





<!--  START OF SOLSTICE HEADER -->
 <link rel="stylesheet" type="text/css" href="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/stylesheets/vendor/cookieconsent/cookieconsent.min.css" />
 <script src="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/vendor/cookieconsent/default.min.js"></script>
 <style type="text/css">
    @import url('https://www.eclipse.org/eclipse.org-common/themes/solstice/public/stylesheets/barebone.min.css')
    </style>
    <script
      src="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/barebone.min.js">
    </script><header role="banner" class="barebone-layout thin-header padding-top-5 padding-bottom-5"  id="header-wrapper">
  <div class="container-fluid reset">
    <div class="row-fluid" id="header-row">
            <div class="col-sm-8 col-md-6 col-lg-4" id="header-left">
        <div class="wrapper-logo-default"><a href="https://www.eclipse.org/"><img class="logo-eclipse-default img-responsive hidden-xs" alt="logo" src="https://bugs.eclipse.org/eclipse.org-common/themes/solstice/public/images/logo/eclipse-426x100.png"/></a></div>
      </div>            <div class="col-sm-16 col-md-18 col-lg-20" id="main-menu-wrapper">
  <div class="navbar yamm" id="main-menu">
    <div id="navbar-collapse-1" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li class="visible-thin"><a href="https://www.eclipse.org/downloads/" target="_self">Download</a></li><li><a href="https://www.eclipse.org/users/" target="_self">Getting Started</a></li><li><a href="https://www.eclipse.org/membership/" target="_self">Members</a></li><li><a href="https://www.eclipse.org/projects/" target="_self">Projects</a></li>                  <li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Community <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="http://marketplace.eclipse.org">Marketplace</a></li><li><a href="http://events.eclipse.org">Events</a></li><li><a href="http://www.planeteclipse.org/">Planet Eclipse</a></li><li><a href="https://www.eclipse.org/community/eclipse_newsletter/">Newsletter</a></li><li><a href="https://www.youtube.com/user/EclipseFdn">Videos</a></li></ul></li><li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Participate <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="https://bugs.eclipse.org/bugs/">Report a Bug</a></li><li><a href="https://www.eclipse.org/forums/">Forums</a></li><li><a href="https://www.eclipse.org/mail/">Mailing Lists</a></li><li><a href="https://wiki.eclipse.org/">Wiki</a></li><li><a href="https://wiki.eclipse.org/IRC">IRC</a></li><li><a href="https://www.eclipse.org/contribute/">How to Contribute</a></li></ul></li><li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Working Groups <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="http://wiki.eclipse.org/Auto_IWG">Automotive</a></li><li><a href="http://iot.eclipse.org">Internet of Things</a></li><li><a href="http://locationtech.org">LocationTech</a></li><li><a href="http://lts.eclipse.org">Long-Term Support</a></li><li><a href="http://polarsys.org">PolarSys</a></li><li><a href="http://science.eclipse.org">Science</a></li><li><a href="http://www.openmdm.org">OpenMDM</a></li></ul></li>          <!-- More -->
          <li class="dropdown eclipse-more hidden-xs">
            <a data-toggle="dropdown" class="dropdown-toggle">More<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li>
                <!-- Content container to add padding -->
                <div class="yamm-content">
                  <div class="row">
                    <ul class="col-sm-8 list-unstyled"><li><p><strong>Community</strong></p></li><li><a href="http://marketplace.eclipse.org">Marketplace</a></li><li><a href="http://events.eclipse.org">Events</a></li><li><a href="http://www.planeteclipse.org/">Planet Eclipse</a></li><li><a href="https://www.eclipse.org/community/eclipse_newsletter/">Newsletter</a></li><li><a href="https://www.youtube.com/user/EclipseFdn">Videos</a></li></ul><ul class="col-sm-8 list-unstyled"><li><p><strong>Participate</strong></p></li><li><a href="https://bugs.eclipse.org/bugs/">Report a Bug</a></li><li><a href="https://www.eclipse.org/forums/">Forums</a></li><li><a href="https://www.eclipse.org/mail/">Mailing Lists</a></li><li><a href="https://wiki.eclipse.org/">Wiki</a></li><li><a href="https://wiki.eclipse.org/IRC">IRC</a></li><li><a href="https://www.eclipse.org/contribute/">How to Contribute</a></li></ul><ul class="col-sm-8 list-unstyled"><li><p><strong>Working Groups</strong></p></li><li><a href="http://wiki.eclipse.org/Auto_IWG">Automotive</a></li><li><a href="http://iot.eclipse.org">Internet of Things</a></li><li><a href="http://locationtech.org">LocationTech</a></li><li><a href="http://lts.eclipse.org">Long-Term Support</a></li><li><a href="http://polarsys.org">PolarSys</a></li><li><a href="http://science.eclipse.org">Science</a></li><li><a href="http://www.openmdm.org">OpenMDM</a></li></ul>                  </div>
                </div>
              </li>
            </ul>
          </li>
              </ul>
    </div>
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      </button>
      <div class="wrapper-logo-mobile"><a class="navbar-brand visible-xs" href="https://www.eclipse.org/"><img class="logo-eclipse-default-mobile img-responsive" alt="logo" src="https://bugs.eclipse.org/eclipse.org-common/themes/solstice/public/images/logo/eclipse-800x188.png"/></a></div>    </div>
  </div>
</div>
    </div>
  </div>
</header>
<!--  END OF SOLSTICE HEADER -->

    <div id="titles">
      <span id="title">Bugzilla &ndash; Bug&nbsp;51693</span>

        <span id="subtitle" class="subheader">String drawing/measuring bench</span>

        <span id="information" class="header_addl_info">Last modified: 2019-10-10 16:54:36 EDT</span>
    </div>


    <div id="common_links"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_top" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_top");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_top" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_top"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_top">
  <span class="separator">| </span>
  <a id="login_link_top" href="show_bug.cgi?id=51693&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_top')">Log In</a>

  <form action="show_bug.cgi?id=51693" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_top">
    <input id="Bugzilla_login_top" required
           name="Bugzilla_login" class="bz_login"
        placeholder="Login">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_top" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_top">
    <a href="#" onclick="return hide_mini_login_form('_top')">[x]</a>
  </form>
</li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
</ul>
    </div>
  </div>

  <div id="bugzilla-body">


<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2019-10-10 16:54:36">
  <input type="hidden" name="id" value="51693">
  <input type="hidden" name="token" value="1629860594-ADO4jm9iImIeol_NmeKgrXPb4O4ov_Sg55iVogP2BYA">
<div class="bz_short_desc_container edit_form">
     <a href="show_bug.cgi?id=51693"><b>Bug&nbsp;51693</b></a> <span id="summary_container" class="bz_default_hidden">
      - <span id="short_desc_nonedit_display">String drawing/measuring bench</span>
     </span>

    <div id="summary_input"><span class="field_label "
    id="field_label_short_desc">


  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>

</span>String drawing/measuring bench
    </div>
  </div>
  <script type="text/javascript">
    hideEditableField('summary_container',
                      'summary_input',
                      'summary_edit_action',
                      'short_desc',
                      'String drawing\/measuring bench' );
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">CLOSED
          WORKSFORME
      </span>
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_alias">


  <a 
      title="A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#alias"
  >Alias:</a>

</th>
    <td>
        None
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components. Select a Classification to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Platform

</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Eclipse Project

</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=Platform"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >SWT

  (<a href="buglist.cgi?component=SWT&amp;product=Platform&amp;bug_status=__open__"
      target="_blank">show other bugs</a>)
</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">


  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=fields.html#version"
  >Version:</a>

</th>

      <td>3.0 &#160; <a href="https://dev.eclipse.org/committers/bugs/bugz_manager.php"><img src="//dev.eclipse.org/small_icons/apps/accessories-text-editor.png" alt="Edit" title="Edit these values" /></a></td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">


  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>

</th>
      <td class="field_value">PC
        All
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label  accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>P3
       normal<span id="votes_container">
      with
      <a href="page.cgi?id=voting/bug.html&amp;bug_id=51693">5 
            votes</a>
    (<a href="page.cgi?id=voting/user.html&amp;bug_id=51693#vote_51693">vote</a>)
  </span>
      </td>
    </tr>

      <tr><th class="field_label "
    id="field_label_target_milestone">


  <a 
      title="The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it."
      class="field_help_link"
      href="page.cgi?id=fields.html#target_milestone"
  >Target Milestone:</a>

</th>
        <td>--- &#160; <a href="https://dev.eclipse.org/committers/bugs/bugz_manager.php"><img src="//dev.eclipse.org/small_icons/apps/accessories-text-editor.png" alt="Edit" title="Edit these values" /></a></td>
      </tr>
          
          <tr><th class="field_label "
    id="field_label_assigned_to">


  <a 
      title="The person in charge of resolving the bug."
      class="field_help_link"
      href="page.cgi?id=fields.html#assigned_to"
  >Assignee:</a>

</th>
      <td><span class="vcard"><span class="fn">Silenio Quarti</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=Silenio_Quarti&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=Silenio_Quarti&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
      </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_qa_contact">


  <a 
      title="The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#qa_contact"
  >QA Contact:</a>

</th>
      <td><span class="vcard">
</span>
      </td>
    </tr>
    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'platform-swt-inbox\x40eclipse.org',
        '');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">


  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>

</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>

    <tr><th class="field_label "
    id="field_label_status_whiteboard">


  <a 
      title="Each bug has a free-form single line text entry box for adding tags and status information."
      class="field_help_link"
      href="page.cgi?id=fields.html#status_whiteboard"
  >Whiteboard:</a>

</th><td>  
  </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_keywords">


  <a 
      title="You can add keywords from a defined list to bugs, in order to easily identify and group them."
      class="field_help_link"
      href="describekeywords.cgi"
  >Keywords:</a>

</th>
  <td class="field_value "
      id="field_container_keywords" >

</td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          <tr>
    <th class="field_label">
      <label>Duplicates (2)</label>:
    </th>
    <td class="field_value">
      <span id="duplicates"><a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - GC Text/String related API slow (1G7P8V4)"
   href="show_bug.cgi?id=4585">4585</a> <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Optimize draw/measure text APIs in GC (1GAVO65)"
   href="show_bug.cgi?id=4615">4615</a> 
      </span>
      (<a href="buglist.cgi?bug_id=4585,4615">view as bug list</a>)
    </td>
  </tr>
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>

  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>

  </td>
  </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table>
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2004-02-11 12:57 EST by <span class="vcard"><span class="fn">Silenio Quarti</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=Silenio_Quarti&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=Silenio_Quarti&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2019-10-10 16:54 EDT
      (<a href="show_activity.cgi?id=51693">History</a>)
    </td>
  
  </tr>
<tr>
      <th class="field_label">
        <label  accesskey="a">
          CC List:
        </label>
      </th>
      <td>26 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5" >
                <option value="andrea.aime">andrea.aime</option>
                <option value="andre_weinand">andre_weinand</option>
                <option value="billy.biggs">billy.biggs</option>
                <option value="bpasero">bpasero</option>
                <option value="bradleyjames">bradleyjames</option>
                <option value="carolynmacleod4">carolynmacleod4</option>
                <option value="cocoakevin">cocoakevin</option>
                <option value="digulla">digulla</option>
                <option value="djo">djo</option>
                <option value="eclipse.felipe">eclipse.felipe</option>
                <option value="eclipse">eclipse</option>
                <option value="eclipse">eclipse</option>
                <option value="gblock">gblock</option>
                <option value="grant_gayed">grant_gayed</option>
                <option value="gunnar">gunnar</option>
                <option value="irbull">irbull</option>
                <option value="jasc">jasc</option>
                <option value="martin.gutschelhofer">martin.gutschelhofer</option>
                <option value="Mike_Wilson">Mike_Wilson</option>
                <option value="mlists">mlists</option>
                <option value="skovatch">skovatch</option>
                <option value="snorthov">snorthov</option>
                <option value="ssahuc">ssahuc</option>
                <option value="steen">steen</option>
                <option value="stefan.zechmeister">stefan.zechmeister</option>
                <option value="tromey">tromey</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" >

</td>
    </tr> 

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>



        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts">
  <tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table">
  <tr id="a0">
    <th colspan="3" class="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_application_octet-stream">
        <td>
            <a href="attachment.cgi?id=8198"
               title="View the content of the attachment">
          <b>V3 of the Java/C benchmark</b></a>

          <span class="bz_attach_extra_info">
              (10.44 KB,
                application/octet-stream)

            <br>
            <a href="#attach_8198"
               title="Go to the comment associated with the attachment">2004-02-26 16:42 EST</a>,

            <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=8198&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a2" class="bz_contenttype_application_octet-stream">
        <td>
            <a href="attachment.cgi?id=8279"
               title="View the content of the attachment">
          <b>StyledText benchmark</b></a>

          <span class="bz_attach_extra_info">
              (3.06 KB,
                application/octet-stream)

            <br>
            <a href="#attach_8279"
               title="Go to the comment associated with the attachment">2004-03-02 16:18 EST</a>,

            <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=8279&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a3" class="bz_contenttype_text_plain bz_patch">
        <td>
            <a href="attachment.cgi?id=8318"
               title="View the content of the attachment">
          <b>Patch against M07 SWT source</b></a>

          <span class="bz_attach_extra_info">
              (2.71 KB,
                patch)

            <br>
            <a href="#attach_8318"
               title="Go to the comment associated with the attachment">2004-03-03 16:06 EST</a>,

            <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=8318&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=8318&amp;action=diff">Diff</a>
        </td>
      </tr>
      <tr id="a4" class="bz_contenttype_text_plain">
        <td>
            <a href="attachment.cgi?id=8332"
               title="View the content of the attachment">
          <b>Felipe's benchmark</b></a>

          <span class="bz_attach_extra_info">
              (8.45 KB,
                text/plain)

            <br>
            <a href="#attach_8332"
               title="Go to the comment associated with the attachment">2004-03-04 12:21 EST</a>,

            <span class="vcard"><span class="fn">Felipe Heidrich</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.felipe&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.felipe&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=8332&amp;action=edit">Details</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="3">
        <span class="bz_attach_view_hide">
            <a id="view_all" href="attachment.cgi?bugid=51693&amp;action=viewall">View All</a>
        </span>
        <a href="attachment.cgi?bugid=51693&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>
<div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=51693&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>
  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="https://bugs.eclipse.org/bugs/js/comments.js?1463425338" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the 'comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>


<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table">
<tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Silenio Quarti</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=Silenio_Quarti&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=Silenio_Quarti&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-11 12:57:25 EST
        </span>

      </div>




<pre class="bz_comment_text">This is a bench mark for string drawing and measuring. I will run it on 
different platforms and add the result here.

import org.eclipse.swt.graphics.*;
import org.eclipse.swt.widgets.*;


public class StringBench {
	
static final int COUNT = 100000;
	
static void test(String msg, GC gc) {
	long time;
	String s1 = &quot;Hello&quot;, s2 = &quot;There&quot;;
	time = -System.currentTimeMillis();
	for (int i=0; i&lt;COUNT; i++) {
		gc.drawString(s1, 10, 50, true);
		gc.drawString(s2, 10, 150, true);
	}
	System.out.println (msg + &quot; drawString() - count=&quot; + COUNT + &quot; time=&quot; 
+ (System.currentTimeMillis() + time) + &quot; ms&quot;);
	time = -System.currentTimeMillis();
	for (int i=0; i&lt;COUNT; i++) {
		gc.stringExtent(s1);
		gc.stringExtent(s2);
	}
	System.out.println (msg + &quot; stringExtent() - count=&quot; + COUNT + &quot; 
time=&quot; + (System.currentTimeMillis() + time) + &quot; ms&quot;);
}

public static void main (String [] args) {
	Display display = new Display ();
	Shell shell = new Shell (display);
	shell.setSize(500, 500);
	shell.open ();
	GC gc = new GC (shell);
	test(&quot;Control&quot;, gc);
	gc.dispose ();
	Image image = new Image(display, 500, 500);
	gc = new GC(image);
	test(&quot;Image&quot;, gc);
	gc.dispose();
	image.dispose();
//	while (!shell.isDisposed ()) {
//		if (!display.readAndDispatch ()) display.sleep ();
//	}
	display.dispose ();
}
}</pre>
    </div>

    <div id="c1" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Silenio Quarti</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=Silenio_Quarti&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=Silenio_Quarti&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-11 13:00:16 EST
        </span>

      </div>




<pre class="bz_comment_text">Windows Xp Professinal Version 2002 Service Pack 1
Pentium 4 CPU 2.00GHz
512MB of RAM

Control drawString() - count=100000 time=1563 ms
Control stringExtent() - count=100000 time=672 ms
Image drawString() - count=100000 time=1313 ms
Image stringExtent() - count=100000 time=656 ms
</pre>
    </div>

    <div id="c2" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Silenio Quarti</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=Silenio_Quarti&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=Silenio_Quarti&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-11 13:03:00 EST
        </span>

      </div>




<pre class="bz_comment_text">Mac OS X Version 10.3.1
Dual 1.25 GHz PowerPC G4
2 MB L3 cache per processor
1GB DDR SDRAM

Control drawString() - count=100000 time=15905 ms
Control stringExtent() - count=100000 time=10701 ms
Image drawString() - count=100000 time=13494 ms
Image stringExtent() - count=100000 time=10562 ms
</pre>
    </div>

    <div id="c3" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Silenio Quarti</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=Silenio_Quarti&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=Silenio_Quarti&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-11 13:28:16 EST
        </span>

      </div>




<pre class="bz_comment_text">Mac OS X Version 10.2.8
Dual 1.25 GHz PowerPC G4
2 MB L3 cache per processor
1GB DDR SDRAM

Control drawString() - count=100000 time=29251 ms
Control stringExtent() - count=100000 time=15897 ms
Image drawString() - count=100000 time=23810 ms
Image stringExtent() - count=100000 time=15392 ms</pre>
    </div>

    <div id="c4" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-11 13:59:41 EST
        </span>

      </div>




<pre class="bz_comment_text">PowerBook G4 AL
Mac OS X Version 10.3.2
1.25 GHz PowerPC G4
512k L2 cache
0 MB L3 cache
1.5GB DDR SDRAM

java version &quot;1.4.2_03&quot;
Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_03-117.1)
Java HotSpot(TM) Client VM (build 1.4.2-34, mixed mode)

Control drawString() - count=100000 time=19218 ms
Control stringExtent() - count=100000 time=11150 ms
Image drawString() - count=100000 time=13708 ms
Image stringExtent() - count=100000 time=11085 ms
</pre>
    </div>

    <div id="c5" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mike Wilson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=Mike_Wilson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=Mike_Wilson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-11 14:28:47 EST
        </span>

      </div>




<pre class="bz_comment_text">Note: One line of the bench was wrapped at a bad spot (inside a string literal).</pre>
    </div>

    <div id="c6" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mike Wilson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=Mike_Wilson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=Mike_Wilson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-11 14:43:19 EST
        </span>

      </div>




<pre class="bz_comment_text">That's definately faster than me, Andre ;-)

PowerBook G4 AL
Mac OS X Version 10.3.2
1 GHz PowerPC G4
512k L2 cache
0 MB L3 cache
1.5GB DDR SDRAM

java version &quot;1.4.2_03&quot;
Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_03-117.1)
Java HotSpot(TM) Client VM (build 1.4.2-34, mixed mode)

Control drawString() - count=100000 time=22934 ms
Control stringExtent() - count=100000 time=15211 ms
Image drawString() - count=100000 time=18847 ms
Image stringExtent() - count=100000 time=14706 ms
</pre>
    </div>

    <div id="c7" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Silenio Quarti</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=Silenio_Quarti&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=Silenio_Quarti&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-12 13:17:15 EST
        </span>

      </div>




<pre class="bz_comment_text">GTK - glib2-2.2.1-1/gtk2-2.2.1-4/pango-1.2.1-3
Intel(R) Pentium(R) 4 CPU 2.53GHz
Mem 512Mb

Control drawString() - count=100000 time=28093 ms
Control stringExtent() - count=100000 time=11064 ms
Image drawString() - count=100000 time=16439 ms
Image stringExtent() - count=100000 time=10852 ms</pre>
    </div>

    <div id="c8" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Silenio Quarti</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=Silenio_Quarti&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=Silenio_Quarti&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-12 15:22:31 EST
        </span>

      </div>




<pre class="bz_comment_text">Motif
Intel(R) Pentium(R) 4 CPU 2.53GHz
Mem 512Mb

Control drawString() - count=100000 time=6959 ms
Control stringExtent() - count=100000 time=1768 ms
Image drawString() - count=100000 time=2643 ms
Image stringExtent() - count=100000 time=1736 ms</pre>
    </div>

    <div id="c9" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-13 19:45:16 EST
        </span>

      </div>




<pre class="bz_comment_text">This is a funny (sad?) one:

Windows 2000 on Virtual PC 6.1 on my PowerBook
(same configuration as <a href="show_bug.cgi?id=51693#c4">comment 4</a>)
JRE 1.4.1

Control drawString() - count=100000 time=8732 ms
Control stringExtent() - count=100000 time=1382 ms
Image drawString() - count=100000 time=3896 ms
Image stringExtent() - count=100000 time=1022 ms</pre>
    </div>

    <div id="c10" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">MarkPalmer</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=bikerx1969&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=bikerx1969&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-24 19:13:25 EST
        </span>

      </div>




<pre class="bz_comment_text">My results for Windows xp thinkpad celeron 1Ghz 512ram eclipse 3.0M7

Control drawString() - count=100000 time=1071 ms
Control stringExtent() - count=100000time=361 ms
Image drawString() - count=100000 time=1222 ms
Image stringExtent() - count=100000time=310 ms

I will post my results for same machine next</pre>
    </div>

    <div id="c11" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">MarkPalmer</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=bikerx1969&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=bikerx1969&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-24 20:15:26 EST
        </span>

      </div>




<pre class="bz_comment_text">These are my results for linux on the same thinkpad celeron 1Ghz 512ram as above
with eclipse 3.0M7

GTK 2.2.4 gnome 2.4 blackdown jvm 1.4

Control drawString() - count=100000 time=14662 ms
Control stringExtent() - count=100000time=9836 ms
Image drawString() - count=100000 time=17375 ms
Image stringExtent() - count=100000time=9944 ms

quite a performance difference</pre>
    </div>

    <div id="c12" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steen Jansdal</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=steen&#64;jansdal.dk" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=steen&#64;jansdal.dk" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-25 03:44:17 EST
        </span>

      </div>




<pre class="bz_comment_text">Comment to #7:

Note: Pango 1.2.5 is much faster than 1.2.1</pre>
    </div>

    <div id="c13" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-25 18:45:33 EST
        </span>

      </div>




<pre class="bz_comment_text">I've added an attachment to <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED INVALID - Address platform-specific UI performance problems"
   href="show_bug.cgi?id=37683">Bug #37683</a> which should contain gc.drawString() 
from SWT. This attachment should have been made here. Sorry for that. 
 
There is a bug (I admit, it's a quick hack based on an example from GTK+) 
which slows it down tremendously but maybe this &quot;bug&quot; helps us to find why 
it's slow in SWT. 
 
See my comments at 
<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED INVALID - Address platform-specific UI performance problems"
   href="show_bug.cgi?id=37683#c156">https://bugs.eclipse.org/bugs/show_bug.cgi?id=37683#c156</a> 
 
I guess if someone who knows about SWT can look at my code, he should be able 
to find the problem very quickly. If it looks OK, we can pass the benchmark on 
to Owen Taylor so he can have a look. Timings are with Pango 1.2.5. 
 
(Owen Taylor is responsible for Pango). 
 
See also 
<a href="http://bugzilla.gnome.org/show_bug.cgi?id=129473">http://bugzilla.gnome.org/show_bug.cgi?id=129473</a> 
(Bug report at GNOME). </pre>
    </div>

    <div id="c14" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-26 16:36:33 EST
        </span>

      </div>




<pre class="bz_comment_text">There has been some confusion why my test contains gdk_draw_text(). The reason 
is that I wanted to see how fast string rendering can get (without AA, complex 
layout, etc). gdk_draw_text() is (almost) the fastest way to render a string, 
so no matter how much we improve Pango, we'll never get better than that. 
 
Basically, this test is there to decide whether we must avoid to render at all 
to get decent performance. 
 
I'll attach a new test in a minute which changes the numbers slightly: Now, 
they will show how many call/second the test can make. Benchmark3.java runs 
each test for 10 seconds, the C version for a fixed amount of time. 
 
Here are some figures: 
 
Java version: 
 
gc.drawText 1939 
gc.drawText 2 5409 
gc.stringExtent 6215 
gc.textExtent 6251 
 
C version: 
 
gc.gdk_draw_text 79923 
gc.drawText 1407 
gc.stringExtent 8600 
 
Notes: I've omitted textExtend because it's basically the same as stringExtent 
in SWT 3.0 
 
As you can clearly see, rendering directly is about ten times faster (80K 
against 8.6K) than getting the extent of the string via Pango which doesn't 
make sense in my eyes. I mean: It should take more time to copy a lot of pixel 
information into a complex bitmap than to add some numbers!? Even if you take 
the gfx hardward into account, my main CPU should still add numbers quicker 
than that. 
 
I'll add a comment to the respective bug in Pango. </pre>
    </div>

    <div id="c15" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-26 16:42:02 EST
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=8198" name="attach_8198" title="V3 of the Java/C benchmark">attachment 8198</a> <a href="attachment.cgi?id=8198&amp;action=edit" title="V3 of the Java/C benchmark">[details]</a></span>
V3 of the Java/C benchmark

Run the C version with &quot;make c&quot; and the Java version with &quot;make gtk&quot; after
copying all *.so and *.jar files from eclipse.swt.gtk_3.0.0 into the directory
Benchmark3/swt-gtk/</pre>
    </div>

    <div id="c16" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-26 17:06:05 EST
        </span>

      </div>




<pre class="bz_comment_text">I've now started to take the code of GC.java apart. My benchmark already 
contains copies of the relevant code used in the tests in a class called 
MyGC.java which allows me to do some quick hacks. 
 
While doing so, I noticed something which made my worry: All methods on 
OS.java are synchronized. Why is that? Doesn't SWT already make sure that 
everything is single threaded? Creating such a tremendous amount of locks (we 
call these methods by the ton) is probably biting a big chunk out of the 
performance. 
 
Can one of the SWT developers, who can compile the C code of SWT, try to 
remove all the synchronized strings out of OS.java and run my benchmark once 
before and once after? </pre>
    </div>

    <div id="c17" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Silenio Quarti</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=Silenio_Quarti&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=Silenio_Quarti&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-26 18:15:29 EST
        </span>

      </div>




<pre class="bz_comment_text">OS must be synchronized because SWT graphics can happen in any thread.  If there
is more than a single thread in GTK at a time, it will GP.

On GTK, by commenting out OS.gdk_draw_layout_with_colors() in GC from
drawString() and OS.pango_layout_get_size() from stringExtent() it is clear that
all of the time is in these two Pango calls. Compare these results to <a href="show_bug.cgi?id=51693#c7">comment #7</a>.

GTK - glib2-2.2.1-1/gtk2-2.2.1-4/pango-1.2.1-3
Intel(R) Pentium(R) 4 CPU 2.53GHz
Mem 512Mb

Control drawString() - count=100000 time=1182 ms
Control stringExtent() - count=100000 time=1022 ms
Image drawString() - count=100000 time=962 ms
Image stringExtent() - count=100000 time=1005 ms</pre>
    </div>

    <div id="c18" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-26 18:18:21 EST
        </span>

      </div>




<pre class="bz_comment_text">Aaron, the benchmark we are using for string drawing and measuring is 
StringBench.  It's much simpler.  Feel free to construct a similar C benchmark 
and post the times.  Thanks.</pre>
    </div>

    <div id="c19" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-26 18:27:53 EST
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; <a href="show_bug.cgi?id=51693#c17">comment #17</a>: 
&gt; OS must be synchronized because SWT graphics can happen in any thread. 
&gt; If there is more than a single thread in GTK at a time, it will GP. </span >
 
I know; the interesting question is: How much performance would this give? 
 
It should be simple to create a version of OS.java without synchronization. If 
that gives &gt;&gt; 10%, then it might be worth it to create OS and UOS 
(unsynchronized). The latter calls could be used when SWT components render 
themselves. 
 
<span class="quote">&gt; On GTK, by commenting out OS.gdk_draw_layout_with_colors() in GC from 
&gt; drawString() and OS.pango_layout_get_size() from stringExtent() it is 
&gt; clear that all of the time is in these two Pango calls. Compare these 
&gt; results to <a href="show_bug.cgi?id=51693#c7">comment #7</a> </span >
 
Yes, I can second that. Taking all code out of MyGC.java except these two 
calls doesn't change the timing much. 
 
<span class="quote">&gt; <a href="show_bug.cgi?id=51693#c18">comment #18</a>: 
&gt; Use StringBench </span >
 
Well, I guess we have nailed it down but I can have a look if StringBench is 
really different from my benchmark. Where can I find it? </pre>
    </div>

    <div id="c20" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-26 18:33:43 EST
        </span>

      </div>




<pre class="bz_comment_text">It's in this bug report (but not as an attachment).

You can't have some methods synchronized and some not or you will GP.  Only 
one thread, GUI or non-GUI can be in GTK at a time.</pre>
    </div>

    <div id="c21" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-26 18:47:21 EST
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; StringBench </span >
 
My benchmark does basically the same thing; turning StringBench into C 
wouldn't yield any new insights because the complex stuff was to convert 
drawString() from SWT to C. 
 
<span class="quote">&gt; Synchronized stuff </span >
 
Ok, then how about a more global lock? SWT components could get the lock in 
the redraw() method (or repaint() or whatever it is called). Then, java 
wouldn't need to sync for every OS call. IIRC, Java just ignores a lock which 
you already own. 
 
But the point here is: Would it be worth it? Can someone please give it a try? 
maybe the performance impact of this is so small that this whole discussion is 
mute. OTOH, if the impact is big, it might be worth it. But unless this 
question is answered, all conclusions are useless. </pre>
    </div>

    <div id="c22" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c22">Comment 22</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-26 19:03:42 EST
        </span>

      </div>




<pre class="bz_comment_text">After a little more thinking, the solution is quite simple: Just add 
 
....synchronized (OS.class) { 
 
....} 
 
around the rendering code; that's what the &quot;native synchronized&quot; statements do 
in OS.java. The results are interesting: Simple calls like gc.setLineWidth() 
get 10 times faster while gc.drawText() almost doesn't change. Overall, I'd 
say the speedup is roughly 5-10%. 
 
Since it's simple to apply, I'd suggest to post a comment on the SWT developer 
list. Components with a complex redraw method can then add these two lines and 
get some extra speed (almost) for free. </pre>
    </div>

    <div id="c23" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c23">Comment 23</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-26 19:52:21 EST
        </span>

      </div>




<pre class="bz_comment_text">We already have the lock in paint because paint happens when the event is 
dispatched and dispatching acquires the lock.  Simple calls get faster because 
the time is in acquiring the lock, not querying the OS.

Over all, I don't think it's worth it.  Perhaps you could try running 
Benchmark2 from #32683 and publishing the results there?  This report concerns 
string draw.  Thanks.</pre>
    </div>

    <div id="c24" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c24">Comment 24</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-02-26 19:53:31 EST
        </span>

      </div>




<pre class="bz_comment_text">Oops, <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED INVALID - Address platform-specific UI performance problems"
   href="show_bug.cgi?id=37683">bug #37683</a> ...</pre>
    </div>

    <div id="c25" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c25">Comment 25</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-01 14:33:26 EST
        </span>

      </div>




<pre class="bz_comment_text">Re: #23 and #24: My benchmark tests string drawing and line drawing to make 
sure that I test the same things as Benchmark2. So the timings of Benchmark3 
are in fact compatible to Benchmark2 (my tests just show how many calls can be 
made per second while Bench2 shows how long 1 million calls take; the latter 
is IMHO easier to compare). 
 
As for the lock: I've searched the whole source with grep -r and couldn't find 
a place where a lock to OS.class is acquired, so I think that you're wrong 
there: You get a new lock each time you call on gtk function and that can be 
expensive. 
 
For a fix, I suggest to add a lock in Display.readAndDispatch(). Should give 
any SWT app on GTK a free performance boost of about 2-5%. </pre>
    </div>

    <div id="c26" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c26">Comment 26</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-01 15:12:44 EST
        </span>

      </div>




<pre class="bz_comment_text">Owen Taylor of GNOME fame answered my questions regarding to Pango. Here is 
what he said (see the full reply at 
<a href="http://bugzilla.gnome.org/show_bug.cgi?id=129473">http://bugzilla.gnome.org/show_bug.cgi?id=129473</a>): 
 
- [...] Text drawing is another matter, I know plenty of things 
  that could be done to make AA text drawing 10 times or 
  more faster, but X development is a huge mess at the moment. 
 
So text rendering is just plain slow, especially when we want to use AA text 
rendering. 
 
Then I asked how about a special handler for ASCII. His reply: 
 
- Special casing ASCII is not interesting to me, because 
  as soon as I do that, application authors lose touch 
  with how their app will perform for many of their  
  users. 
 
- Modern processors do well in tight loops. This is why 
  it's easy to make blitting a few bitmap characters 
  faster than analyzing the same characters and laying 
  them out. Plus XDrawText tends to be HW accelerated 
  (though it's plenty fast enough in software) 
 
Comment: XDrawText is fast because it's in HW while AA rendering is usually 
not accelerated. 
 
- Your timings above indicate that in your benchmark, the 
  real bottleneck is Xft drawing, not Pango layout.  
  By doing measurements of what Eclipse does in real 
  applications, you'd be able to figure out if that 
  is the case in real life as well. 
 
Comment: So I guess this means that using Xft directly won't help much. 
 
- I took a short look at the C benchmark yesterday, and other 
  than setting the background in draw_layout_line_with_colors() 
  it's not doing anything obviously stupid that would  
  cause noticeable performance updates. 
 
Comment: Clearing the background can be expensive. That is why most apps draw 
the background and then just render the text over it. 
 
- Applications that want to look reasonable usually draw 
  to a backing pixmap, this prevents the user seeing 
  clear/redraw flashing. I assume that SWT does this 
  in some fashion, but then again, maybe not... 
 
  GDK provides a nice convenient interface to this 
  with gdk_window_begin_paint_rect/region(), though 
  apps can also do it manually if they want. 
 
Comment: I haven't seen any place where SWT renders to an offscreen bitmap. 
Does it? 
 
If it doesn't, is that an option? 
 
- Whether drawing to an offscreen pixmap is faster 
  or not than drawing to the screen depends a lot 
  on particular system details. Because of deficencies 
  in XFree86, it is occasionally *much* faster, but 
  it's not reliably faster. 
 
Comment: Since X allows to redirect the display to another computer, it must 
make some compromises. When you look at it as a client/server architecture, 
then the app is a client of a server which can draw on a screen. This means 
that any drawing command must be converted to a network format (a binary 
string), transported over some kind of socket (TCP/IP or a socket on disk 
in /tmp/.X11-unix/) and then the server can execute it. 
 
That's the reason why avoiding drawing something saves so much time. 
 
Just in the last few years, things like shared memory have started to come up 
which enhanve performance considerably. So today, it's possible to request a 
shared pixmap from the server (only locally, so you cannot start a program 
which uses this over a network) and render directly to it. This is fast but 
not very portable. 
 
Conclusion: The only way to get SWT text rendering faster by an order or two 
(which is what we're after), we must drop Pango and AA text rendering or wait 
for someone to optimize XFree86. </pre>
    </div>

    <div id="c27" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c27">Comment 27</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-01 15:48:03 EST
        </span>

      </div>




<pre class="bz_comment_text">Arron, WRT <a href="show_bug.cgi?id=51693#c25">comment #25</a>, the method OS.gtk_main_iteration() inside of 
Display.readAndDispatch() acquires the lock when it dispatches an operating 
system event.</pre>
    </div>

    <div id="c28" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c28">Comment 28</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-01 15:53:44 EST
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; Conclusion: The only way to get SWT text rendering faster by an
&gt; order or two (which is what we're after), we must drop Pango and
&gt; AA text rendering or wait for someone to optimize XFree86. </span >

We are never dropping Pango as long as GTK embraces it.</pre>
    </div>

    <div id="c29" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c29">Comment 29</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-01 16:22:09 EST
        </span>

      </div>




<pre class="bz_comment_text">Re #27: What about the rendering in runDeferredEvents()? Doesn't SWT collect 
all rendering events and then dispatch them all at once? </pre>
    </div>

    <div id="c30" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c30">Comment 30</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-01 16:25:16 EST
        </span>

      </div>




<pre class="bz_comment_text">No.  Some events are queued, some are not.  Paint events are not queued.</pre>
    </div>

    <div id="c31" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c31">Comment 31</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-01 17:04:14 EST
        </span>

      </div>




<pre class="bz_comment_text">Re #28: If we must use Pango, then the only options are to heavily optimize  
Eclipse to make sure that we never draw anything unecessarily and to try to  
render the text widget to an offscreen bitmap.  </pre>
    </div>

    <div id="c32" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c32">Comment 32</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-02 16:18:45 EST
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=8279" name="attach_8279" title="StyledText benchmark">attachment 8279</a> <a href="attachment.cgi?id=8279&amp;action=edit" title="StyledText benchmark">[details]</a></span>
StyledText benchmark

This is a simple benchmark which shows how fast StyledText is during rendering.
Here are the timings on my Linux box:

set no text 1567
setText 1 line 549
setText 2 lines 437

Whether I lock OS or not doesn't change the results much.</pre>
    </div>

    <div id="c33" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c33">Comment 33</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-02 16:26:55 EST
        </span>

      </div>




<pre class="bz_comment_text">When you look at the timings in <a href="show_bug.cgi?id=51693#c32">comment 32</a> and the ones in V3 of the 
benchmark, you can see that drawing using drawString() is four to ten times 
faster than styledText.getContent().setText(&quot;two\nlines&quot;); 
styledText.repaint(); 
 
Can someone with a working profiles run StyledText benchmark, please? I'd like 
to see in which calls the time gets lost. I mean, drawString() is slow 
already ... 
 
And something else which I noticed: On Windows, text rendering is non-AA. 
Maybe someone can investigate how to disable AA in Pango? </pre>
    </div>

    <div id="c34" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c34">Comment 34</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-03 04:12:44 EST
        </span>

      </div>




<pre class="bz_comment_text">On a WinNT 4.0SP6a system with Pentium III/1Ghz and onboard Intel gfx, I get 
this:

WinNT 4.0 without OS lock

set no text 471
setText 1 line 226
setText 2 lines 221

WinNT 4.0 with OS lock

set no text 502
setText 1 line 236
setText 2 lines 223

Again, the OS lock doesn't seem to change much. What is interesting, though, is 
the fact that Eclipse feels more responsive on this HW, while it still is much 
inferiour to my PC at home (dual P-III with 1GHz and an NVIDIA gfx card).

The UI of Eclipse 3.0M7 still feels much less responive than 2.1.2 on it except 
for some things: Speed of the text rendering feels OK but input sometimes lags 
begind. Also, java completion is sometimes instantly and sometimes takes a 
rather long coffee break.

From these observations, I conclude that the speed of string rendering alone is 
not the sole cause of the performance problems which we experience on Linux.

So again, the old saying hold true: It's impossible to say where the 
performance goes to by looking at the source and guessing. One must use a 
profiler.

Can someone direct me to a (free/OSS) profiler which I can download and run 
Eclipse in so I can get some real numbers?</pre>
    </div>

    <div id="c35" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c35">Comment 35</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-03 08:02:50 EST
        </span>

      </div>




<pre class="bz_comment_text">After running StyledText benchmark on WINDOWS(!) in hyades, I find that 75% of 
the time is spent in these three methods:

- Display.getLastEventTime() (called from Widget.sendEvent())
- StyledText.performPaint() calls OS.getDC() (via GC.GC() -&gt;
  Image.internal_new_GC() -&gt; Display.internal_new_GC(GCData))
- StyledText.performPaint() eventually gc.dispose() which calls OS.releaseDC()

It seems to me that (like on Unix), getting the current system time and 
creating/disposing GCs is expensive.

So I tried to optimize these two. Sun did put some effort into enhancing 
System.currentTimeMillis(), so I thought I could use that instead of 
getLastEventTime() (a benchmark shows that cTM() is 2-3 times faster than gLET
()) but I don't know the semantics of gLET() and there is no javadoc comment in 
Display.java. Anyone?

Next, I cached the image and GC in performPaint(). Here are the timings for 
this:

WinNT 4.0 without caching:

set no text 502
setText 1 line 236
setText 2 lines 223

With cached line buffer:

set no text 832
setText 1 line 399
setText 2 lines 384

That's about 1.6 times faster. Tonight, I'll try the same on Linux and send you 
a patch for StyledText so everyone can have a look.</pre>
    </div>

    <div id="c36" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c36">Comment 36</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-03 08:42:22 EST
        </span>

      </div>




<pre class="bz_comment_text">I don't know whether the following is relevant to you, but StyledText (probably the biggest and most 
important client of string rendering), implements its own double buffering mechanism.
See StyledText.performPaint(...).</pre>
    </div>

    <div id="c37" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c37">Comment 37</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-03 10:51:43 EST
        </span>

      </div>




<pre class="bz_comment_text">Yes, fixing string drawing won't fix Eclipse.  This problem report is focusing 
on string drawing because it is a known area where Windows is faster than 
every other platform.</pre>
    </div>

    <div id="c38" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c38">Comment 38</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-03 10:57:40 EST
        </span>

      </div>




<pre class="bz_comment_text">Is your Profiler lying?  Try making Display.getLastEventTime() return zero.  
Is everything faster?  Also, your benchmarks should measure times over one 
second (longer times are better).  This helps with benchmark stability.</pre>
    </div>

    <div id="c39" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c39">Comment 39</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-03 16:06:34 EST
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=8318&amp;action=diff" name="attach_8318" title="Patch against M07 SWT source">attachment 8318</a> <a href="attachment.cgi?id=8318&amp;action=edit" title="Patch against M07 SWT source">[details]</a></span>
Patch against M07 SWT source

Ok, I've now verified my patch. On linux, I get about 80-100% better
performance from my StyledText benchmark when using a cache for the GC and the
Image used in StyledText to do double buffering in performPaint().

Some background: The patch caches the image which is created in performPaint.
Next time when the method is called, the patch checks if the image is large
enough (the widget might have been resized), allocates a larger image if
necessary, and then copies the damaged part of the image into the destination
drawable.

Please have a look and if you like the patch (except for the indentation ;-),
include it in M8.</pre>
    </div>

    <div id="c40" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c40">Comment 40</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-03 16:09:03 EST
        </span>

      </div>




<pre class="bz_comment_text">Re <a href="show_bug.cgi?id=51693#c38">comment 38</a>: 
 
<span class="quote">&gt; Is your Profiler lying? </span >
 
Well, it seems that hyades has an issue with Display.getLastEventTime(). You 
can ignore this part of my post. </pre>
    </div>

    <div id="c41" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c41">Comment 41</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-03 18:49:38 EST
        </span>

      </div>




<pre class="bz_comment_text">Felipe, can you check out the M07 SWT source patch and associated benchmark.  
Thanks.</pre>
    </div>

    <div id="c42" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c42">Comment 42</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steen Jansdal</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=steen&#64;jansdal.dk" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=steen&#64;jansdal.dk" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-04 02:17:57 EST
        </span>

      </div>




<pre class="bz_comment_text">Re #39:

Wow, 80-100% better performance. I'll definitely try
your patch later. Right now I'm very busy.

One comment: Is there any particularly reason to test if 1 == 0?

+                  if (1 == 0 || lineBuffer == null
+                    || lastLineSize.x &lt; clientArea.width
+                    || lastLineSize.y &lt; renderHeight
+
+                )
</pre>
    </div>

    <div id="c43" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c43">Comment 43</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steen Jansdal</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=steen&#64;jansdal.dk" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=steen&#64;jansdal.dk" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-04 02:27:54 EST
        </span>

      </div>




<pre class="bz_comment_text">Re #37:

<span class="quote">&gt;&gt; This problem report is focusing 
&gt;&gt; on string drawing because it is a known area where Windows is faster than 
&gt;&gt; every other platform.</span >

Windows isn't necessarily faster than every other platform. FOX is
actually faster at string drawing.</pre>
    </div>

    <div id="c44" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c44">Comment 44</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-04 04:20:28 EST
        </span>

      </div>




<pre class="bz_comment_text">Re #42: 

<span class="quote">&gt; 1 == 0</span >

That was just to be able to disable the test quickly :-) I missed that when I 
cleaned the patch.</pre>
    </div>

    <div id="c45" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c45">Comment 45</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steen Jansdal</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=steen&#64;jansdal.dk" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=steen&#64;jansdal.dk" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-04 04:34:47 EST
        </span>

      </div>




<pre class="bz_comment_text">Re #44 :

Nah, I done buy that ;-)  You can't disable the test by
altering 1==0 to 1==1 or something else. 

But any way, forget it, I'm only teasing. I'm really looking
forward to try your patch. :-)
</pre>
    </div>

    <div id="c46" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c46">Comment 46</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Felipe Heidrich</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.felipe&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.felipe&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-04 12:19:58 EST
        </span>

      </div>




<pre class="bz_comment_text">I tested Aaron's patch and it made StyledText slower for me.
My testcase is to put a whole bunch of text and a few styles on the StyledText
and measure the time to draw/update 200 times.
My machine is a IBM IntelliStation Z Pro running RedHat 9.
Results:
No Patch:
Time: 7401 (ms), Time: 7319 (ms), Time: 7775 (ms), Time: 6935 (ms)

Patch:
Time: 10127 (ms), Time: 9818 (ms), Time: 10138 (ms), Time: 10156 (ms)
</pre>
    </div>

    <div id="c47" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c47">Comment 47</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Felipe Heidrich</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.felipe&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.felipe&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-04 12:21:01 EST
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=8332" name="attach_8332" title="Felipe's benchmark">attachment 8332</a> <a href="attachment.cgi?id=8332&amp;action=edit" title="Felipe's benchmark">[details]</a></span>
Felipe's benchmark</pre>
    </div>

    <div id="c48" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c48">Comment 48</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-04 14:16:21 EST
        </span>

      </div>




<pre class="bz_comment_text">Re #46: 
 
<span class="quote">&gt; Patch makes things slower in Felipe's benchmark </span >
 
I can second that, here are my numbers: 
 
With: 9475 7368 7180 7119 
Without: 7997 6366 6861 6296 6177 
 
Observations: 
 
1. The test becomes faster with every iteration. Why is this? 
 
2. I've added a counter in GC(Drawable,boolean). It shows that during each 
test run, about 500 GCs are created. Is it possible that the syntax 
highlightning always creates new GCs? 
 
When I start Eclipse and scroll around a bit, about 100 GCs/s are created (and 
destrory). 
 
Since my benchmark shows that creating GCs is costly, I'll run Felipe's 
benchmark with the profiler to see where these GCs are created. </pre>
    </div>

    <div id="c49" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c49">Comment 49</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steen Jansdal</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=steen&#64;jansdal.dk" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=steen&#64;jansdal.dk" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-05 02:24:13 EST
        </span>

      </div>




<pre class="bz_comment_text">Aaron, I've tried your patch, but I'm afraid I havn't
been able to measure any significant difference.

I've measured the time spent in performPaint by inserting

long start = System.currentTimeMillis(); 

as the first line and

long stop = System.currentTimeMillis(); 
System.out.println ( &quot; &quot; + (stop-start) ); 

as the last lines. By scrolling up and down in the javaviewer
example I haven't seen performPaint go faster than 45 ms
(on my 233 Hz dinosaur), with or without your patch.

What is interesting is that even thou performPaint uses
45 ms to do a redraw there is approx. 1/2 sec from I hit 
the PageDown key until I see the update on the screen. 

Something very rotten is going on and I think we shall find
the answer somewhere in GTK or how the event queue are 
implemented. String drawing or measuring are very slow but 
I actually don't think its our biggest problem.
</pre>
    </div>

    <div id="c50" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c50">Comment 50</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aaron Digulla</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=digulla&#64;hepe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=digulla&#64;hepe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-05 15:23:38 EST
        </span>

      </div>




<pre class="bz_comment_text">Re #49: 
 
<span class="quote">&gt; Routine doesn't get faster with patch </span >
 
Steen, this is simply not possible. There must be a speed difference. (for 
example, I allocate the image just once). Can you put a System.out in there to 
see how often the image is created? Here, it's created two times: Once, when 
the component is created and then again, when it is scrolled for the first 
time. 
 
A possible explanation could be that currentTimeMillis() can't time something 
with less than 45ms on your hardware. Because of some optimizations which Sun 
has made in this call, it's not reliable with small timings (I have a 
&quot;resolution&quot; here of about 10ms). 
 
Suggestion: Add a counter and print the time only after 10 or 100 invocations. </pre>
    </div>

    <div id="c51" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c51">Comment 51</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-03-05 17:16:48 EST
        </span>

      </div>




<pre class="bz_comment_text">In order to get real numbers, you need to measure things that are greater than 
one second (the longer the better).</pre>
    </div>

    <div id="c52" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c52">Comment 52</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-10-04 12:59:09 EDT
        </span>

      </div>




<pre class="bz_comment_text">*** <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - GC Text/String related API slow (1G7P8V4)"
   href="show_bug.cgi?id=4585">Bug 4585</a> has been marked as a duplicate of this bug. ***</pre>
    </div>

    <div id="c53" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c53">Comment 53</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-10-04 13:00:51 EDT
        </span>

      </div>




<pre class="bz_comment_text">*** <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Optimize draw/measure text APIs in GC (1GAVO65)"
   href="show_bug.cgi?id=4615">Bug 4615</a> has been marked as a duplicate of this bug. ***</pre>
    </div>

    <div id="c54" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c54">Comment 54</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-03-25 12:22:11 EST
        </span>

      </div>




<pre class="bz_comment_text">PowerBook G4 AL
Mac OS X 10.4 (8A393)
1.25 GHz PowerPC G4
512k L2 cache
0 MB L3 cache
2GB DDR SDRAM

java version &quot;1.4.2_07&quot;
Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_07-200)
Java HotSpot(TM) Client VM (build 1.4.2-49, mixed mode)

Control drawString() - count=100000 time=15363 ms
Control stringExtent() - count=100000 time=10073 ms
Image drawString() - count=100000 time=14187 ms
Image stringExtent() - count=100000 time=10030 ms</pre>
    </div>

    <div id="c55" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c55">Comment 55</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-02-18 04:59:10 EST
        </span>

      </div>




<pre class="bz_comment_text">iMac	Intel Core Duo 1.83 GHz
Mac OS X 10.4.5 (8G1454)
L2 Cache (shared): 2 MB
Memory: 1.5 GB
Bus Speed: 667 MHz

java version &quot;1.5.0_06&quot;
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_06-103)
Java HotSpot(TM) Client VM (build 1.5.0_06-57, mixed mode)

Control drawString() - count=100000 time=8228 ms
Control stringExtent() - count=100000 time=5054 ms
Image drawString() - count=100000 time=7456 ms
Image stringExtent() - count=100000 time=5094 ms</pre>
    </div>

    <div id="c56" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c56">Comment 56</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ian Bull</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=irbull&#64;eclipsesource.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=irbull&#64;eclipsesource.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-04-24 16:48:19 EDT
        </span>

      </div>




<pre class="bz_comment_text">Debian Unstable (AMD 2.4Ghz, 2G Ram, Nvidia GeForce FX 5200)
GTK 2.8.17-1
Pango 1.12.1-2
Cario 1.0.4-1

Control drawString() - count=100000 time=30911 ms
Control stringExtent() - count=100000time=9714 ms
Image drawString() - count=100000 time=30414 ms
Image stringExtent() - count=100000time=9628 ms

I enabled advanced graphics (gc.setAdvanced(true))
and got:

Control drawString() - count=100000 time=9646 ms
Control stringExtent() - count=100000time=10001 ms
Image drawString() - count=100000 time=8703 ms
Image stringExtent() - count=100000time=9710 ms

About 3x faster. However, enabling advanced (cairo) graphics slows down fill* routines considerably (things like fillRectangle, etc...).

One of the things I read about text performance is that AA is slow on linux (<a href="http://vektor.ca/eclipse/gtk-performance-notes.html">http://vektor.ca/eclipse/gtk-performance-notes.html</a>).  Owen Taylor said that pango is naturally slower than motif because it does a lot more.  I am wondering if we *have* to do a lot more.  I think Pango does a great job, but is there a way to (programmatically) turn some of these features off (or maybe this is a really bad idea).  I tired gc.setAntialias(SWT.OFF) but this had not effect on the performance numbers.  

I also tried to disable AA in my fonts.conf file, but again no change.  

Also, in <a href="http://bugzilla.gnome.org/show_bug.cgi?id=129473">http://bugzilla.gnome.org/show_bug.cgi?id=129473</a>, Owen says that Pango can draw about 9,000 8 digit numbers in a second.  The numbers in this bug report suggests that windows can draw close to 10x that amount in a second.  I don't know how much it will effect eclipse performance, but I am personally working on an application that requires animation and I am trying to get my FrameRate up :)

- ian</pre>
    </div>

    <div id="c57" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c57">Comment 57</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-04-24 16:57:37 EDT
        </span>

      </div>




<pre class="bz_comment_text">It's the 3.2 end game so we aren't really looking at this.  If you comment out all string drawing either in your application or in SWT (just make it do nothing), does your frame rate go up?</pre>
    </div>

    <div id="c58" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c58">Comment 58</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-04-24 18:06:03 EDT
        </span>

      </div>




<pre class="bz_comment_text">MacBook Pro    Intel Core Duo 2 GHz
Mac OS X 10.4.6 (8I1119)
L2 Cache (shared): 2 MB
Memory: 2 GB
Bus Speed: 667 MHz

java version &quot;1.5.0_06&quot;
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_06-112)
Java HotSpot(TM) Client VM (build 1.5.0_06-64, mixed mode, sharing)

Control drawString() - count=100000 time=7652 ms
Control stringExtent() - count=100000 time=4774 ms
Image drawString() - count=100000 time=6886 ms
Image stringExtent() - count=100000 time=4735 ms


And now the fun part:

Same benchmark on Windows XP Professional SP2
running on same hardware inside
Parallels Workstation 2.11 Beta4 for Mac OS X

java version &quot;1.5.0_06&quot;
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_06-b05)
Java HotSpot(TM) Client VM (build 1.5.0_06-b05, mixed mode, sharing)

Control drawString() - count=100000 time=2744 ms
Control stringExtent() - count=100000 time=100 ms
Image drawString() - count=100000 time=2123 ms
Image stringExtent() - count=100000 time=140 ms</pre>
    </div>

    <div id="c59" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c59">Comment 59</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ian Bull</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=irbull&#64;eclipsesource.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=irbull&#64;eclipsesource.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-04-24 19:11:08 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=51693#c57">comment #57</a>)
<span class="quote">&gt; It's the 3.2 end game so we aren't really looking at this.  If you comment out
&gt; all string drawing either in your application or in SWT (just make it do
&gt; nothing), does your frame rate go up?
&gt; </span >

Thanks for the quick reply Steve.
I know the end game is here, and I am not expecting a fix anytime soon, I just wanted to post these numbers while I had them available. I am not even sure this is an SWT problem.  I think SWT performance on GTK+ has improved tenfold since the early days of eclipse :)

As for my FPS, yep it more than doubles when I remove the text rendering.  It goes from about 8 to 16 FPS when I am not rendering the text.  It is currently rendering about 5,000 chars.  This doesn't tell us much because I would expect it to improve without the text rendering.  An interesting note is that when I remove the text drawing from windows it doesn't change the performance much.

- ian</pre>
    </div>

    <div id="c60" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c60">Comment 60</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Billy Biggs</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=billy.biggs&#64;eclipse.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=billy.biggs&#64;eclipse.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-04-26 00:03:47 EDT
        </span>

      </div>




<pre class="bz_comment_text">Pango can be slow, but we did some good work to make it faster
in pango 1.12.  For more details and pointers, see Federico's activity
log from October:

  <a href="http://primates.ximian.com/~federico/news-2005-10.html">http://primates.ximian.com/~federico/news-2005-10.html</a>

If you want to know more about how to optimize pango, drop by
#performance on irc.gimp.org sometime and we can talk about it.
There are some more things in the profiles that can be brought
down if you're interested in hacking around.</pre>
    </div>

    <div id="c61" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c61">Comment 61</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ian Bull</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=irbull&#64;eclipsesource.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=irbull&#64;eclipsesource.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-19 15:36:08 EDT
        </span>

      </div>




<pre class="bz_comment_text">I have spent a few days hacking with GTK and Pango (Just using them to get some idea how they work).  I now have a better understanding of what Pango does and why it runs slower than Windows (and even AWT) font rendering.  Pango does a much better job of text layout than any of these other tools (especially for scripts and international fonts).  

However, in some application areas you just want to render labels (character arrays) at pre-determined X,Y locations without the full pango pipeline.  (For example: an information visualization tool for medical ontologys rendering and animating hundreds of medical terms).  Some GTK users have suggested I bypass Pango and just draw to X directly (I didn't mention to them I was doing this through SWT).  So this got me thinking, can we address this bug by adding a Quality flag to SWT that is a &quot;hint&quot; about how high quality we want the rendering?  If we want High Quality then SWT.GTK could use Pango (the default), and if we don't care about quality, then we can simply bypass it and use gdk_draw_string (I know it is deprecated) or some other lower level text primitive?

Cheers,
Ian</pre>
    </div>

    <div id="c62" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c62">Comment 62</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-26 10:24:36 EDT
        </span>

      </div>




<pre class="bz_comment_text">We looked into this a while back and decided against it (see <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED INVALID - Address platform-specific UI performance problems"
   href="show_bug.cgi?id=37683#c134">https://bugs.eclipse.org/bugs/show_bug.cgi?id=37683#c134</a>).

In your application, if you knew that you were on GTK, only drawing English text, didn't care about the font, etc, etc, you could call the low level X, xft, or GDK text drawing routines.</pre>
    </div>

    <div id="c63" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c63">Comment 63</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ian Bull</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=irbull&#64;eclipsesource.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=irbull&#64;eclipsesource.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-26 10:43:02 EDT
        </span>

      </div>




<pre class="bz_comment_text">Thanks Steve.

I am actually doing this in Draw2D / GEF.  I extended their label and I am now caching the entire label to an image.  I invalidate the image if the text changes (or the size changes) but since the most common operation is move, I can just reuse the image.  This has greatly improved performance.  When I do scaling animations, I do a mix of scaling the image and occasionally re-draw the text (like google maps).  

I may try your solution with the low level calls. Are these exposed through the GC or OS layer?  I didn't see them there, but there are a lot of routines.  ( I guess it would have to be in the OS layer since it is specific to GTK).

Cheers,
Ian</pre>
    </div>

    <div id="c64" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c64">Comment 64</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-26 11:42:00 EDT
        </span>

      </div>




<pre class="bz_comment_text">At one point the natives were there but Billy deleted them.</pre>
    </div>

    <div id="c65" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c65">Comment 65</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Scott Kovatch</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=skovatch&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=skovatch&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-08-17 11:17:54 EDT
        </span>

      </div>




<pre class="bz_comment_text">Adding to Java benchmarks for Leopard. This will make it more visible inside Apple.</pre>
    </div>

    <div id="c66" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c66">Comment 66</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ian Bull</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=irbull&#64;eclipsesource.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=irbull&#64;eclipsesource.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-12-19 17:43:39 EST
        </span>

      </div>




<pre class="bz_comment_text">Because nobody notices when things improve, I thought I would post this:
GTK+ Debian Unstable
Pango 2.14.8-3
AMD 3800+

Control drawString() - count=100000 time=14151 ms
Control stringExtent() - count=100000time=4865 ms
Image drawString() - count=100000 time=13790 ms
Image stringExtent() - count=100000time=4848 ms

This is about 2x faster than before.  Pango has come a long way.  And while it is still slower than Windows, I personally think the fonts look nicer.</pre>
    </div>

    <div id="c67" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c67">Comment 67</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Behdad Esfahbod</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse&#64;behdad.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse&#64;behdad.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-12-19 20:01:50 EST
        </span>

      </div>




<pre class="bz_comment_text">Interesting.  You should test Pango HEAD and cairo master branch.</pre>
    </div>

    <div id="c68" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c68">Comment 68</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-04 06:43:20 EST
        </span>

      </div>




<pre class="bz_comment_text">MacBook Pro    Intel Core 2 Duo 2.33 GHz
Mac OS X 10.4.8 (8N1037)
L2 Cache (shared): 4 MB
Memory: 3 GB
Bus Speed: 667 MHz

java version &quot;1.5.0_06&quot;
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_06-113)
Java HotSpot(TM) Client VM (build 1.5.0_06-68, mixed mode, sharing)

SWT 3320:

Control drawString() - count=100000 time=6352 ms
Control stringExtent() - count=100000 time=3604 ms
Image drawString() - count=100000 time=4747 ms
Image stringExtent() - count=100000 time=3607 ms

And again the fun part:

Same benchmark on Windows XP Professional SP2
running on same hardware inside
Parallels Desktop for Mac
Build 3106 Beta 3 (28. Dezember 2006)

java version &quot;1.5.0_10&quot;
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_10-b03)
Java HotSpot(TM) Client VM (build 1.5.0_10-b03, mixed mode, sharing)

Control drawString() - count=100000 time=1662 ms
Control stringExtent() - count=100000 time=80 ms
Image drawString() - count=100000 time=1512 ms
Image stringExtent() - count=100000 time=80 ms
</pre>
    </div>

    <div id="c69" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c69">Comment 69</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Behdad Esfahbod</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse&#64;behdad.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse&#64;behdad.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-04 11:15:06 EST
        </span>

      </div>




<pre class="bz_comment_text">Latest pango 1.15.x and cairo 1.3.x should give you something very near the Windows performance for extents, and not much worse for rendering.</pre>
    </div>

    <div id="c70" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c70">Comment 70</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-04 11:21:02 EST
        </span>

      </div>




<pre class="bz_comment_text">Behdad, please post the results.</pre>
    </div>

    <div id="c71" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c71">Comment 71</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Behdad Esfahbod</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse&#64;behdad.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse&#64;behdad.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-04 11:36:11 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=51693#c70">comment #70</a>)
<span class="quote">&gt; Behdad, please post the results.</span >

Umm, I've been trying to seduce someone to try and post results :).  Without being lazy, I'm far from that high in the stack to tinker with SWT (or Java for that matter).  Andrew, maybe you can do that?</pre>
    </div>

    <div id="c72" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c72">Comment 72</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andrew Overholt</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=overholt&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=overholt&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-04 11:41:57 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=51693#c71">comment #71</a>)
<span class="quote">&gt; (In reply to <a href="show_bug.cgi?id=51693#c70">comment #70</a>)
&gt; &gt; Behdad, please post the results.
&gt; 
&gt; Umm, I've been trying to seduce someone to try and post results :).  Without
&gt; being lazy, I'm far from that high in the stack to tinker with SWT (or Java for
&gt; that matter).  Andrew, maybe you can do that?</span >

Yeah, I've been meaning to do this.  I'll try to get to it today.

</pre>
    </div>

    <div id="c73" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c73">Comment 73</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Felipe Heidrich</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.felipe&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.felipe&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-04 12:27:47 EST
        </span>

      </div>




<pre class="bz_comment_text">Kevin, you also have an intel mac os running Parallels with vista and fc6. Check <a href="show_bug.cgi?id=51693#c68">comment #68</a>, can you test it too ?</pre>
    </div>

    <div id="c74" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c74">Comment 74</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ian Bull</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=irbull&#64;eclipsesource.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=irbull&#64;eclipsesource.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-04 13:49:27 EST
        </span>

      </div>




<pre class="bz_comment_text">I got the latest pango and cairo graphics and gave this a try.  With gc.setAdvanced(true) I get slightly better results, but still not near windows performance.  (with it set to false I get the same as before)

Control drawString() - count=100000 time=11221 ms
Control stringExtent() - count=100000time=5230 ms
Image drawString() - count=100000 time=11381 ms
Image stringExtent() - count=100000time=5506 ms

Maybe there is something wrong with my install:
(Everything else is from Debian unstable, pango and cairo and build from their latest release, SWT is from 3.3M4).

duff:~# ldconfig -v | grep cairo
        libsvg-cairo.so.1 -&gt; libsvg-cairo.so.1.0.1
        libpangocairo-1.0.so.0 -&gt; libpangocairo-1.0.so.0.1502.0
        libcairo.so.2 -&gt; libcairo.so.2.10.3

duff:~# ldconfig -v | grep pango
        libpangomm-1.4.so.1 -&gt; libpangomm-1.4.so.1.0.29
        libpangocairo-1.0.so.0 -&gt; libpangocairo-1.0.so.0.1502.0
        libpangoxft-1.0.so.0 -&gt; libpangoxft-1.0.so.0.1400.8
        libpangox-1.0.so.0 -&gt; libpangox-1.0.so.0.1400.8
        libpango-1.0.so.0 -&gt; libpango-1.0.so.0.1502.0
        libpangoft2-1.0.so.0 -&gt; libpangoft2-1.0.so.0.1502.0

Are these the versions you expect? 

What exactly does advanced graphics do for font rendering?



</pre>
    </div>

    <div id="c75" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c75">Comment 75</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Behdad Esfahbod</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse&#64;behdad.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse&#64;behdad.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-04 15:09:28 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=51693#c74">comment #74</a>)
<span class="quote">&gt; I got the latest pango and cairo graphics and gave this a try.  With
&gt; gc.setAdvanced(true) I get slightly better results, but still not near windows
&gt; performance.  (with it set to false I get the same as before)</span >

Ok, I need to dig into seeing what the test and SWT are doing then.  The 80ms time for extents computation for 100000 iterations can only mean one of two things: 1) bogus measurement, 2) cached extents.

If cached extents is the case, then it should be possible to do the same on pango.  Pango 1.15.2 caches layout extents if you use it properly, so now it's down to swt to use it properly (cache the layout, and use the readonly accessors).  Read:

  <a href="http://mail.gnome.org/archives/gtk-devel-list/2006-December/msg00105.html">http://mail.gnome.org/archives/gtk-devel-list/2006-December/msg00105.html</a>

<span class="quote">&gt; Control drawString() - count=100000 time=11221 ms
&gt; Control stringExtent() - count=100000time=5230 ms
&gt; Image drawString() - count=100000 time=11381 ms
&gt; Image stringExtent() - count=100000time=5506 ms
&gt; 
&gt; Maybe there is something wrong with my install:
&gt; (Everything else is from Debian unstable, pango and cairo and build from their
&gt; latest release, SWT is from 3.3M4).
&gt; 
&gt; duff:~# ldconfig -v | grep cairo
&gt;         libsvg-cairo.so.1 -&gt; libsvg-cairo.so.1.0.1
&gt;         libpangocairo-1.0.so.0 -&gt; libpangocairo-1.0.so.0.1502.0
&gt;         libcairo.so.2 -&gt; libcairo.so.2.10.3
&gt; 
&gt; duff:~# ldconfig -v | grep pango
&gt;         libpangomm-1.4.so.1 -&gt; libpangomm-1.4.so.1.0.29
&gt;         libpangocairo-1.0.so.0 -&gt; libpangocairo-1.0.so.0.1502.0
&gt;         libpangoxft-1.0.so.0 -&gt; libpangoxft-1.0.so.0.1400.8
&gt;         libpangox-1.0.so.0 -&gt; libpangox-1.0.so.0.1400.8
&gt;         libpango-1.0.so.0 -&gt; libpango-1.0.so.0.1502.0
&gt;         libpangoft2-1.0.so.0 -&gt; libpangoft2-1.0.so.0.1502.0
&gt; 
&gt; Are these the versions you expect? </span >

Assuming that SWT is using pangocairo, yes.

<span class="quote">&gt; What exactly does advanced graphics do for font rendering?</span >

No idea.
</pre>
    </div>

    <div id="c76" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c76">Comment 76</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ian Bull</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=irbull&#64;eclipsesource.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=irbull&#64;eclipsesource.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-04 16:13:01 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=51693#c75">comment #75</a>)
<span class="quote">&gt; &gt; What exactly does advanced graphics do for font rendering?
&gt; 
&gt; No idea.</span >

Sorry, that question was for the SWT team.  No worries, I have figured it out.  When advanced graphics is true SWT uses: (with some additional setup of course)

Cairo.cairo_move_to(cairo, x, y);
OS.pango_cairo_show_layout(cairo, data.layout

to actually render the text.

When it is set to false it uses:
int /*long*/ pixmap = OS.gdk_pixmap_new(OS.GDK_ROOT_PARENT(), width, height, -1);
if (pixmap == 0) SWT.error(SWT.ERROR_NO_HANDLES);
int /*long*/ gdkGC = OS.gdk_gc_new(pixmap);
OS.gdk_gc_set_foreground(gdkGC, black);
OS.gdk_draw_rectangle(pixmap, gdkGC, 1, 0, 0, width, height);
OS.gdk_gc_set_foreground(gdkGC, data.foreground);
OS.gdk_draw_layout_with_colors(pixmap, gdkGC, 0, 0, layout, null, background);
OS.g_object_unref(gdkGC);
OS.gdk_draw_drawable(data.drawable, handle, pixmap, 0, 0, x, y, width, height);
OS.g_object_unref(pixmap);

I am currently trying to strip out only the OS layer (the native methods) that SWT uses to perform the benchmark.  This may help determine if SWT is using Pango correctly.   
</pre>
    </div>

    <div id="c77" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c77">Comment 77</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Behdad Esfahbod</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse&#64;behdad.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse&#64;behdad.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-04 16:22:22 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=51693#c76">comment #76</a>)
<span class="quote">&gt; (In reply to <a href="show_bug.cgi?id=51693#c75">comment #75</a>)
&gt; &gt; &gt; What exactly does advanced graphics do for font rendering?
&gt; &gt; 
&gt; &gt; No idea.
&gt; 
&gt; Sorry, that question was for the SWT team.  No worries, I have figured it out. 
&gt; When advanced graphics is true SWT uses: (with some additional setup of course)
&gt; 
&gt; Cairo.cairo_move_to(cairo, x, y);
&gt; OS.pango_cairo_show_layout(cairo, data.layout</span >

This is fine, assuming that OS.pango_cairo_show_layout calls pango_cairo_show_layout().

<span class="quote">&gt; to actually render the text.
&gt; 
&gt; When it is set to false it uses:
&gt; int /*long*/ pixmap = OS.gdk_pixmap_new(OS.GDK_ROOT_PARENT(), width, height,
&gt; -1);
&gt; if (pixmap == 0) SWT.error(SWT.ERROR_NO_HANDLES);
&gt; int /*long*/ gdkGC = OS.gdk_gc_new(pixmap);
&gt; OS.gdk_gc_set_foreground(gdkGC, black);
&gt; OS.gdk_draw_rectangle(pixmap, gdkGC, 1, 0, 0, width, height);
&gt; OS.gdk_gc_set_foreground(gdkGC, data.foreground);
&gt; OS.gdk_draw_layout_with_colors(pixmap, gdkGC, 0, 0, layout, null, background);
&gt; OS.g_object_unref(gdkGC);
&gt; OS.gdk_draw_drawable(data.drawable, handle, pixmap, 0, 0, x, y, width, height);
&gt; OS.g_object_unref(pixmap);</span >

This is not optimal, to say the least.  No idea why a temp pixmap is used.

<span class="quote">&gt; I am currently trying to strip out only the OS layer (the native methods) that
&gt; SWT uses to perform the benchmark.  This may help determine if SWT is using
&gt; Pango correctly.   </span >

Thanks.  A tool you may find useful is the bprobe tool in GNOME svn.  With bprobe, you can write probes really quickly to see for example how many times pango_layout_new() is called, without recompiling pango or SWT.  Let me know if you need help with that.</pre>
    </div>

    <div id="c78" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c78">Comment 78</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ian Bull</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=irbull&#64;eclipsesource.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=irbull&#64;eclipsesource.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-04 16:54:37 EST
        </span>

      </div>




<pre class="bz_comment_text">I'll look into the profiler, it may help, but for now I have isolated a few lines that seem to be causing some of the slowness (at least on the text extent part).

time = -System.currentTimeMillis();
for (int i=0; i&lt;COUNT; i++) {
  OS.pango_layout_set_text(layout, new byte[]{'a','b','c','d','e'}, 5);
  int[] width = new int[1], height = new int[1];
  OS.pango_layout_get_size(data.layout, width, height);
  OS.pango_layout_set_text(layout, new byte[]{'f','g','h','i','j'}, 5);
  OS.pango_layout_get_size(data.layout, width, height);
}
System.out.println (msg + &quot; stringExtent() - count=&quot; + COUNT + &quot;time=&quot; + (System.currentTimeMillis() + time) + &quot; ms&quot;);

This takes about 5 seconds for 100,000 iterations.
The OS.* simply call the native methods with the same name.  This is (basically) the way SWT is using Pango to calculate text extents.  It is much faster if you don't change the text during each iteration, but I don't think that is realistic. 

If GTK is &lt; 2.8 it uses:

cairo_font_extents_t font_extents = new cairo_font_extents_t();
Cairo.cairo_font_extents(cairo, font_extents);
cairo_text_extents_t extents = new cairo_text_extents_t();
Cairo.cairo_text_extents(cairo, buffer, extents);


</pre>
    </div>

    <div id="c79" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c79">Comment 79</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andrew Overholt</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=overholt&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=overholt&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-04 17:12:09 EST
        </span>

      </div>




<pre class="bz_comment_text">I'm obviously doing something wrong but I can't think of what it is.  I can't get StringBench to run on gtk64.  I've got 3.3M4 and the 1.5 Sun 64-bit JVM.  3.3M4 runs fine but StringBench gives:

Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: memmove
	at org.eclipse.swt.internal.gtk.OS.memmove(Native Method)
	at org.eclipse.swt.internal.Converter.wcsToMbcs(Converter.java:67)
	at org.eclipse.swt.internal.Converter.wcsToMbcs(Converter.java:54)
	at org.eclipse.swt.widgets.Display.&lt;clinit&gt;(Display.java:126)
	at tests.StringBench.main(StringBench.java:30)

I'm using Fedora 6.  Any help appreciated.</pre>
    </div>

    <div id="c80" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c80">Comment 80</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ian Bull</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=irbull&#64;eclipsesource.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=irbull&#64;eclipsesource.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-04 17:33:26 EST
        </span>

      </div>




<pre class="bz_comment_text">How are you launching the Java application?  From within Eclipse?  Sorry, I am using the 32 bit version of everything.  Does anyone know if GTK64 properly gets the .SO file out of the JAR file (the work in <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Please remove 'Run as SWT Application' from the run menu"
   href="show_bug.cgi?id=166865">Bug #166865</a>)

Also, 
What happens if you wrote:
time = -System.currentTimeMillis();
for (int i=0; i&lt;COUNT; i++) {
  OS.pango_layout_set_text(layout, new byte[]{'a','b','c','d','e'}, 5);
  int[] width = new int[1], height = new int[1];
  OS.pango_layout_get_size(data.layout, width, height);
  OS.pango_layout_set_text(layout, new byte[]{'f','g','h','i','j'}, 5);
  OS.pango_layout_get_size(data.layout, width, height);
}
System.out.println (msg + &quot; stringExtent() - count=&quot; + COUNT + &quot;time=&quot; +
(System.currentTimeMillis() + time) + &quot; ms&quot;);

in C?  You can probably get a GTK app up and running faster than me that initializes pango and then does the set text (as above) followed by get_size.  Those numbers may help too.</pre>
    </div>

    <div id="c81" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c81">Comment 81</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Behdad Esfahbod</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse&#64;behdad.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse&#64;behdad.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-04 17:34:55 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=51693#c78">comment #78</a>)
<span class="quote">&gt; I'll look into the profiler, it may help, but for now I have isolated a few
&gt; lines that seem to be causing some of the slowness (at least on the text extent
&gt; part).</span >

Thanks.

<span class="quote">&gt; time = -System.currentTimeMillis();
&gt; for (int i=0; i&lt;COUNT; i++) {
&gt;   OS.pango_layout_set_text(layout, new byte[]{'a','b','c','d','e'}, 5);
&gt;   int[] width = new int[1], height = new int[1];
&gt;   OS.pango_layout_get_size(data.layout, width, height);
&gt;   OS.pango_layout_set_text(layout, new byte[]{'f','g','h','i','j'}, 5);
&gt;   OS.pango_layout_get_size(data.layout, width, height);
&gt; }
&gt; System.out.println (msg + &quot; stringExtent() - count=&quot; + COUNT + &quot;time=&quot; +
&gt; (System.currentTimeMillis() + time) + &quot; ms&quot;);
&gt; 
&gt; This takes about 5 seconds for 100,000 iterations.
&gt; The OS.* simply call the native methods with the same name.  This is
&gt; (basically) the way SWT is using Pango to calculate text extents.  It is much
&gt; faster if you don't change the text during each iteration, but I don't think
&gt; that is realistic. </span >

Right.  However, a extent calculation plus a rendering has become a lot cheaper in Pango 1.15.2.  That is, none of the two become much faster, but if you do both, one is almost free now.

I'm also curious in how you are measuring it on Windows (as in, the equivalent of the above code).

<span class="quote">&gt; If GTK is &lt; 2.8 it uses:
&gt; 
&gt; cairo_font_extents_t font_extents = new cairo_font_extents_t();
&gt; Cairo.cairo_font_extents(cairo, font_extents);
&gt; cairo_text_extents_t extents = new cairo_text_extents_t();
&gt; Cairo.cairo_text_extents(cairo, buffer, extents);</span >

This is totally broken for everything other than ASCII, but doesn't really matter I guess.</pre>
    </div>

    <div id="c82" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c82">Comment 82</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Felipe Heidrich</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.felipe&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.felipe&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-04 18:01:37 EST
        </span>

      </div>




<pre class="bz_comment_text">Hello Andrew, I believe the problem you have is not your fault but a bug in SWT. Grant, do you still have a 64bit linux machine ? Can you try the benchmark there ?

Ian &amp; Behdad: when you use advance graphics in SWT you are really using a different technology. For example, on windows it uses GDI for normal mode and GDI+ for advance mode. On GTK it uses GDK for normal mode and Cairo for advance mode. The application should set advance mode when it needs to use 'advance' features like transform or alpha.

Ian: Usually if you compare SWT PI code versus native C code you are really going to measure the time SWT waste to cross the JNI layer. In past benchmarks this number was close to zero.</pre>
    </div>

    <div id="c83" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c83">Comment 83</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ian Bull</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=irbull&#64;eclipsesource.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=irbull&#64;eclipsesource.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-04 18:17:59 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=51693#c82">comment #82</a>)
<span class="quote">&gt; Ian &amp; Behdad: when you use advance graphics in SWT you are really using a
&gt; different technology. For example, on windows it uses GDI for normal mode and
&gt; GDI+ for advance mode. On GTK it uses GDK for normal mode and Cairo for advance
&gt; mode. The application should set advance mode when it needs to use 'advance'
&gt; features like transform or alpha.</span >

Thanks Felipe, that is why I was confused about advanced graphics.  I have used SWT advanced graphics for other operations, but it seems that SWT (GTK version at least) handles text rendering differently when Advanced is set to true.  It seems to run faster, and according to Behdad (who knows a lot more about this than I ever will) the non-advanced way is not optimal. 

<span class="quote">&gt; Ian: Usually if you compare SWT PI code versus native C code you are really
&gt; going to measure the time SWT waste to cross the JNI layer. In past benchmarks
&gt; this number was close to zero.
&gt; </span >
Figured as much.  I was just hoping that by creating a C version with similar time measurements, the Pango guys may be able to tell us if we are using Pango correctly (especially now that they have done improvements in caching).

Thanks for the tips Felipe. Any help here is greatly appreciated :)</pre>
    </div>

    <div id="c84" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c84">Comment 84</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ian Bull</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=irbull&#64;eclipsesource.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=irbull&#64;eclipsesource.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-04 18:37:26 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=51693#c81">comment #81</a>)
<span class="quote">&gt; Right.  However, a extent calculation plus a rendering has become a lot cheaper
&gt; in Pango 1.15.2.  That is, none of the two become much faster, but if you do
&gt; both, one is almost free now.</span >
Makes sense. However, I would assume that if I just rendered the same text continually it should be fast then.  But even the following code takes &gt; 5 seconds:

for (int i=0; i&lt;COUNT; i++) {
  Cairo.cairo_move_to(cairo, 10, 50);
  OS.pango_cairo_show_layout(cairo, data.layout);
  Cairo.cairo_move_to(cairo, 10, 150);
  OS.pango_cairo_show_layout(cairo, data.layout);
}

(Note: I just move the location and draw the same text (&quot;Hello&quot;) repeatedly) 
 
<span class="quote">&gt; I'm also curious in how you are measuring it on Windows (as in, the equivalent
&gt; of the above code).</span >

Not sure exactly, but the benchmark basically moves the cursor, sets the text to &quot;Hello&quot; and renders it, then it moves the cursor, sets the text to &quot;There&quot; and renders it.  It repeats this 100,000 times.  I don't know if caching works here since the text continuously changes.

Then the benchmark does the same thing, but instead of rendering the text it just gets the extents.  Again the text continually changes.

I hope this helps, and thanks for following this Behdad!
</pre>
    </div>

    <div id="c85" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c85">Comment 85</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Felipe Heidrich</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.felipe&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.felipe&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-04 18:53:13 EST
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; I'm also curious in how you are measuring it on Windows (as in, the equivalent
&gt; of the above code).</span >

In normal mode:
OS.GetTextExtentPoint32W(handle, buffer, length, size);
In advance mode:
int format = Gdip.StringFormat_Clone(Gdip.StringFormat_GenericTypographic());
Gdip.StringFormat_SetFormatFlags(format, Gdip.StringFormat_GetFormatFlags(format) | Gdip.StringFormatFlagsMeasureTrailingSpaces);
Gdip.Graphics_MeasureString(data.gdipGraphics, buffer, buffer.length, data.gdipFont, pt, format, bounds);
Gdip.StringFormat_delete(format);

GTK has more code running really, you need to create a pangolayout before you can measure anything.
</pre>
    </div>

    <div id="c86" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c86">Comment 86</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Felipe Heidrich</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.felipe&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.felipe&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-04 18:58:37 EST
        </span>

      </div>




<pre class="bz_comment_text">Andrew: Please make sure you are running the 64bits version of SWT on your 64bits machine. In the download page look for Linux (x86_64/GTK 2). Personally I would run in a 32bits machine like everyone else in the problem report.</pre>
    </div>

    <div id="c87" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c87">Comment 87</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Felipe Heidrich</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.felipe&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.felipe&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-04 19:06:27 EST
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; This is not optimal, to say the least.  No idea why a temp pixmap is used.</span >

This code is doing XOR, the normal case it is only a call to:
gdk_draw_layout_with_colors()
</pre>
    </div>

    <div id="c88" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c88">Comment 88</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ian Bull</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=irbull&#64;eclipsesource.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=irbull&#64;eclipsesource.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-04 19:09:27 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=51693#c87">comment #87</a>)
<span class="quote">&gt; &gt; This is not optimal, to say the least.  No idea why a temp pixmap is used.
&gt; 
&gt; This code is doing XOR, the normal case it is only a call to:
&gt; gdk_draw_layout_with_colors()
&gt; </span >
Sorry about that guys... I didn't see that if statement.  That was my fault :(</pre>
    </div>

    <div id="c89" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c89">Comment 89</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andrew Overholt</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=overholt&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=overholt&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-05 09:19:11 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=51693#c86">comment #86</a>)
<span class="quote">&gt; Andrew: Please make sure you are running the 64bits version of SWT on your
&gt; 64bits machine.</span >

I am.  I eventually got it working by pointing LD_LIBRARY_PATH (it also worked with java.library.path) to the exploded 64-bit JNI .sos.

My times were similar to Ian's.  Behdad was working on an equivalent benchmark in C to compare.  I think he'll have further comments.</pre>
    </div>

    <div id="c90" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c90">Comment 90</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-05 18:26:02 EST
        </span>

      </div>




<pre class="bz_comment_text">Re <a href="show_bug.cgi?id=51693#c63">comment #63</a>:

Windows Vista Business
running inside Parallels Desktop for Mac
Build 3106 Beta 3 (28. Dezember 2006)
on
MacBook Pro  Intel Core 2 Duo 2.33 GHz
Mac OS X 10.4.8 (8N1037)
L2 Cache (shared): 4 MB
Memory: 3 GB
Bus Speed: 667 MHz

java version &quot;1.6.0&quot;
Java(TM) SE Runtime Environment (build 1.6.0-b105)
Java HotSpot(TM) Client VM (build 1.6.0-b105, mixed mode, sharing)

Control drawString() - count=100000 time=2894 ms
Control stringExtent() - count=100000 time=701 ms
Image drawString() - count=100000 time=1883 ms
Image stringExtent() - count=100000 time=211 ms</pre>
    </div>

    <div id="c91" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c91">Comment 91</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-05 18:27:56 EST
        </span>

      </div>




<pre class="bz_comment_text">Oops, my <a href="show_bug.cgi?id=51693#c90">comment #90</a> is a response to Felipe's <a href="show_bug.cgi?id=51693#c73">comment #73</a>, not <a href="show_bug.cgi?id=51693#c63">comment #63</a>.</pre>
    </div>

    <div id="c92" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c92">Comment 92</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kevin Barnes</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=cocoakevin&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=cocoakevin&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-07 16:01:35 EST
        </span>

      </div>




<pre class="bz_comment_text">Hardware:
  Processor: Intel Core 2 Duo 2.16 GHz
  L2 Cache:	4 MB
  Memory:	2 GB
  Bus Speed:	667 MHz

Mac OS X 10.4.8
Control drawString() - count=100000 time=6661 ms
Control stringExtent() - count=100000 time=3882 ms
Image drawString() - count=100000 time=5150 ms
Image stringExtent() - count=100000 time=3952 ms


Windows Vista (Parallels)
Control drawString() - count=100000 time=2464 ms
Control stringExtent() - count=100000 time=491 ms
Image drawString() - count=100000 time=2103 ms
Image stringExtent() - count=100000 time=392 ms



</pre>
    </div>

    <div id="c93" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c93">Comment 93</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kevin Barnes</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=cocoakevin&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=cocoakevin&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-07 16:08:18 EST
        </span>

      </div>




<pre class="bz_comment_text">Fedora Core 6 running in Parallels - See <a href="show_bug.cgi?id=51693#c92">comment 92</a> for hardware

Control drawString() - count=100000 time=2464 ms
Control stringExtent() - count=100000 time=491 ms
Image drawString() - count=100000 time=2103 ms
Image stringExtent() - count=100000 time=392 ms</pre>
    </div>

    <div id="c94" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c94">Comment 94</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kevin Barnes</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=cocoakevin&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=cocoakevin&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-07 16:11:34 EST
        </span>

      </div>




<pre class="bz_comment_text"><a href="show_bug.cgi?id=51693#c93">Comment 93</a> is wrong, I pasted the Vista numbers again.

Fedora numbers are:
Control drawString() - count=100000 time=19881 ms
Control stringExtent() - count=100000 time=5758 ms
Image drawString() - count=100000 time=16635 ms
Image stringExtent() - count=100000 time=6232 ms</pre>
    </div>

    <div id="c95" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c95">Comment 95</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mike Wilson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=Mike_Wilson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=Mike_Wilson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-08 09:53:39 EST
        </span>

      </div>




<pre class="bz_comment_text">One of the things I noticed when configuring my wife's new laptop was that turning on ClearType caused the string benchmark to be 3..4 times slower. Are people running their XP tests with ClearType on or off?</pre>
    </div>

    <div id="c96" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c96">Comment 96</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Scott Kovatch</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=skovatch&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=skovatch&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-08 11:41:06 EST
        </span>

      </div>




<pre class="bz_comment_text">Mike raises a good point in #95 that reminds me of a problem we ran into with benchmarks and the Mac AWT. On the Mac, text is drawn aliased by default where on Windows (and, by extension, the AWT) it's antialiased by default. <a href="show_bug.cgi?id=51693#c56">Comment #56</a> notes this difference on Linux as well. As a result we get clobbered in text benchmarks. Andre, can you try with and without the antialiasing to compare?</pre>
    </div>

    <div id="c97" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c97">Comment 97</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-08 12:02:04 EST
        </span>

      </div>




<pre class="bz_comment_text">Quite true, however, anti-alias should not affect measuring.  I suspect that Windows is highly optimized for English and the other platforms are not.  We should test this theory by benching a Bidi or Japanese string.  Does Windows start sucking or draw the text wrong?</pre>
    </div>

    <div id="c98" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c98">Comment 98</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-08 12:09:17 EST
        </span>

      </div>




<pre class="bz_comment_text">Re #96: turning off antialiasing does not have the expected effect:

antialiasing off:
Control drawString() - count=100000 time=6015 ms
Control stringExtent() - count=100000 time=3556 ms
Image drawString() - count=100000 time=5082 ms
Image stringExtent() - count=100000 time=3595 ms

antialiasing on:
Control drawString() - count=100000 time=6063 ms
Control stringExtent() - count=100000 time=3556 ms
Image drawString() - count=100000 time=4657 ms
Image stringExtent() - count=100000 time=3589 ms</pre>
    </div>

    <div id="c99" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c99">Comment 99</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ian Bull</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=irbull&#64;eclipsesource.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=irbull&#64;eclipsesource.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-08 12:41:13 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=51693#c82">comment #82</a>)
<span class="quote">&gt; Hello Andrew, I believe the problem you have is not your fault but a bug in
&gt; SWT. Grant, do you still have a 64bit linux machine ? Can you try the benchmark
&gt; there ?
&gt; </span >
Felipe, Steve, Grant....
Do you know if this issue has been looked at?  Is this related to not extracting the library file from the Jar?  Would you like me to reopen <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Please remove 'Run as SWT Application' from the run menu"
   href="show_bug.cgi?id=166865">Bug #166865</a> (or create another bug).  I don't think this is related to the benchmark, I just don't want this issue to get lost in the mix.</pre>
    </div>

    <div id="c100" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c100">Comment 100</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-08 13:30:55 EST
        </span>

      </div>




<pre class="bz_comment_text">Please create a new bug.</pre>
    </div>

    <div id="c101" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c101">Comment 101</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ian Bull</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=irbull&#64;eclipsesource.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=irbull&#64;eclipsesource.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-08 13:41:41 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=51693#c100">comment #100</a>)
<span class="quote">&gt; Please create a new bug.
&gt; </span >
Done:
<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED WORKSFORME - UnsatisfiedLinkError in GTK64"
   href="show_bug.cgi?id=169875">https://bugs.eclipse.org/bugs/show_bug.cgi?id=169875</a></pre>
    </div>

    <div id="c102" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c102">Comment 102</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Behdad Esfahbod</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse&#64;behdad.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse&#64;behdad.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-08 22:21:15 EST
        </span>

      </div>




<pre class="bz_comment_text">So yeah, Andrew and I did some testing.  And I did the extents test in C too.  Seems like, using Hotspot, one-third of the extent measurement from Java is spent in the Java layer.  With natively compiled CLASSPATH it became half the time.

I profiled the C example.  It's not very easy to optimize it drastically. 50% of the time is being spent in the OpenType shaper.  I'm doing a rewrite of that code, that may or may not make it faster.  I can go on and make it fast, at the expense of more memory use, but my current feeling is that we shouldn't need to do that.

Anyway, good point raised about ClearType.  Any comparison to non-ClearType rendering is Apples and Oranges (pun intended ;) ).</pre>
    </div>

    <div id="c103" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c103">Comment 103</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eclipse Webmaster</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=webmaster&#64;eclipse.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=webmaster&#64;eclipse.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-09-06 16:07:25 EDT
        </span>

      </div>




<pre class="bz_comment_text">This bug hasn't had any activity in quite some time. Maybe the problem got resolved, was a duplicate of something else, or became less pressing for some reason - or maybe it's still relevant but just hasn't been looked at yet.

If you have further information on the current state of the bug, please add it. The information can be, for example, that the problem still occurs, that you still want the feature, that more information is needed, or that the bug is (for whatever reason) no longer relevant.</pre>
    </div>

    <div id="c104" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=51693#c104">Comment 104</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Alexander Kurtakov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=akurtakov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=akurtakov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-10-10 16:54:36 EDT
        </span>

      </div>




<pre class="bz_comment_text">This is ancient and contians so much data that it's hard for me to even find out what/if anything is still pending there. Close.</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=51693">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=51693">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=51693">Clone This Bug</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>

<br>
</div>

    <div id="footer">
      <div class="intro"></div>
<ul id="useful-links">
  <li id="links-actions"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_bottom" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_bottom");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_bottom" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_bottom"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_bottom">
  <span class="separator">| </span>
  <a id="login_link_bottom" href="show_bug.cgi?id=51693&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_bottom')">Log In</a>

  <form action="show_bug.cgi?id=51693" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_bottom">
    <input id="Bugzilla_login_bottom" required
           name="Bugzilla_login" class="bz_login"
        placeholder="Login">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_bottom" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_bottom">
    <a href="#" onclick="return hide_mini_login_form('_bottom')">[x]</a>
  </form>
</li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
</ul>
  </li>

  




  
</ul>

      <div class="outro"></div>
    </div>

  </body>
</html>