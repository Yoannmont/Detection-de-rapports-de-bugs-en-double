<!DOCTYPE html>
<html lang="en">
  <head>
    <title>38436 &ndash; Locating Widgets in display coordinates for automated whitebox testing</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link href="https://bugs.eclipse.org/bugs/data/assets/03c4bb46b12126a79867f9a9f5323634.css?1593441374" rel="stylesheet" type="text/css">



    
<script type="text/javascript" src="https://bugs.eclipse.org/bugs/data/assets/a7c2f3a028f17a9aa60f56dc9d6e732d.js?1593441374"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/bugs',
                maxusermatches: 10
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    "You must enter a Description for this attachment.",
                component_required:
                    "You must select a Component for this bug.",
                description_required:
                    "You must enter a Description for this bug.",
                short_desc_required:
                    "You must enter a Summary for this bug.",
                version_required:
                    "You must select a Version for this bug."
            }
              , api_token: ''
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null,
                             "38436 – Locating Widgets in display coordinates for automated whitebox testing",
                             "show_bug.cgi?id=38436" );
        document.title = "38436 – Locating Widgets in display coordinates for automated whitebox testing";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "38436 – Locating Widgets in display coordinates for automated whitebox testing", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();

    });
    // -->
    </script>
<script type="text/javascript" src="https://bugs.eclipse.org/bugs/data/assets/daf5e0fb6826e6a35280e622913f0c4a.js?1593441374"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico">
  </head>

  <body 
        class="bugs-eclipse-org-bugs
                 bz_bug
                 bz_status_NEW
                 bz_product_Platform
                 bz_component_SWT
                 bz_bug_38436 yui-skin-sam">

  <div id="header"><!-- 1.0@bugzilla.org -->





<!--  START OF SOLSTICE HEADER -->
 <link rel="stylesheet" type="text/css" href="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/stylesheets/vendor/cookieconsent/cookieconsent.min.css" />
 <script src="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/vendor/cookieconsent/default.min.js"></script>
 <style type="text/css">
    @import url('https://www.eclipse.org/eclipse.org-common/themes/solstice/public/stylesheets/barebone.min.css')
    </style>
    <script
      src="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/barebone.min.js">
    </script><header role="banner" class="barebone-layout thin-header padding-top-5 padding-bottom-5"  id="header-wrapper">
  <div class="container-fluid reset">
    <div class="row-fluid" id="header-row">
            <div class="col-sm-8 col-md-6 col-lg-4" id="header-left">
        <div class="wrapper-logo-default"><a href="https://www.eclipse.org/"><img class="logo-eclipse-default img-responsive hidden-xs" alt="logo" src="https://bugs.eclipse.org/eclipse.org-common/themes/solstice/public/images/logo/eclipse-426x100.png"/></a></div>
      </div>            <div class="col-sm-16 col-md-18 col-lg-20" id="main-menu-wrapper">
  <div class="navbar yamm" id="main-menu">
    <div id="navbar-collapse-1" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li class="visible-thin"><a href="https://www.eclipse.org/downloads/" target="_self">Download</a></li><li><a href="https://www.eclipse.org/users/" target="_self">Getting Started</a></li><li><a href="https://www.eclipse.org/membership/" target="_self">Members</a></li><li><a href="https://www.eclipse.org/projects/" target="_self">Projects</a></li>                  <li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Community <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="http://marketplace.eclipse.org">Marketplace</a></li><li><a href="http://events.eclipse.org">Events</a></li><li><a href="http://www.planeteclipse.org/">Planet Eclipse</a></li><li><a href="https://www.eclipse.org/community/eclipse_newsletter/">Newsletter</a></li><li><a href="https://www.youtube.com/user/EclipseFdn">Videos</a></li></ul></li><li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Participate <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="https://bugs.eclipse.org/bugs/">Report a Bug</a></li><li><a href="https://www.eclipse.org/forums/">Forums</a></li><li><a href="https://www.eclipse.org/mail/">Mailing Lists</a></li><li><a href="https://wiki.eclipse.org/">Wiki</a></li><li><a href="https://wiki.eclipse.org/IRC">IRC</a></li><li><a href="https://www.eclipse.org/contribute/">How to Contribute</a></li></ul></li><li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Working Groups <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="http://wiki.eclipse.org/Auto_IWG">Automotive</a></li><li><a href="http://iot.eclipse.org">Internet of Things</a></li><li><a href="http://locationtech.org">LocationTech</a></li><li><a href="http://lts.eclipse.org">Long-Term Support</a></li><li><a href="http://polarsys.org">PolarSys</a></li><li><a href="http://science.eclipse.org">Science</a></li><li><a href="http://www.openmdm.org">OpenMDM</a></li></ul></li>          <!-- More -->
          <li class="dropdown eclipse-more hidden-xs">
            <a data-toggle="dropdown" class="dropdown-toggle">More<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li>
                <!-- Content container to add padding -->
                <div class="yamm-content">
                  <div class="row">
                    <ul class="col-sm-8 list-unstyled"><li><p><strong>Community</strong></p></li><li><a href="http://marketplace.eclipse.org">Marketplace</a></li><li><a href="http://events.eclipse.org">Events</a></li><li><a href="http://www.planeteclipse.org/">Planet Eclipse</a></li><li><a href="https://www.eclipse.org/community/eclipse_newsletter/">Newsletter</a></li><li><a href="https://www.youtube.com/user/EclipseFdn">Videos</a></li></ul><ul class="col-sm-8 list-unstyled"><li><p><strong>Participate</strong></p></li><li><a href="https://bugs.eclipse.org/bugs/">Report a Bug</a></li><li><a href="https://www.eclipse.org/forums/">Forums</a></li><li><a href="https://www.eclipse.org/mail/">Mailing Lists</a></li><li><a href="https://wiki.eclipse.org/">Wiki</a></li><li><a href="https://wiki.eclipse.org/IRC">IRC</a></li><li><a href="https://www.eclipse.org/contribute/">How to Contribute</a></li></ul><ul class="col-sm-8 list-unstyled"><li><p><strong>Working Groups</strong></p></li><li><a href="http://wiki.eclipse.org/Auto_IWG">Automotive</a></li><li><a href="http://iot.eclipse.org">Internet of Things</a></li><li><a href="http://locationtech.org">LocationTech</a></li><li><a href="http://lts.eclipse.org">Long-Term Support</a></li><li><a href="http://polarsys.org">PolarSys</a></li><li><a href="http://science.eclipse.org">Science</a></li><li><a href="http://www.openmdm.org">OpenMDM</a></li></ul>                  </div>
                </div>
              </li>
            </ul>
          </li>
              </ul>
    </div>
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      </button>
      <div class="wrapper-logo-mobile"><a class="navbar-brand visible-xs" href="https://www.eclipse.org/"><img class="logo-eclipse-default-mobile img-responsive" alt="logo" src="https://bugs.eclipse.org/eclipse.org-common/themes/solstice/public/images/logo/eclipse-800x188.png"/></a></div>    </div>
  </div>
</div>
    </div>
  </div>
</header>
<!--  END OF SOLSTICE HEADER -->

    <div id="titles">
      <span id="title">Bugzilla &ndash; Bug&nbsp;38436</span>

        <span id="subtitle" class="subheader">Locating Widgets in display coordinates for automated whitebox testing</span>

        <span id="information" class="header_addl_info">Last modified: 2019-09-06 16:15:51 EDT</span>
    </div>


    <div id="common_links"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_top" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_top");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_top" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_top"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_top">
  <span class="separator">| </span>
  <a id="login_link_top" href="show_bug.cgi?id=38436&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_top')">Log In</a>

  <form action="show_bug.cgi?id=38436" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_top">
    <input id="Bugzilla_login_top" required
           name="Bugzilla_login" class="bz_login"
        placeholder="Login">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_top" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_top">
    <a href="#" onclick="return hide_mini_login_form('_top')">[x]</a>
  </form>
</li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
</ul>
    </div>
  </div>

  <div id="bugzilla-body">


<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2019-09-06 16:15:51">
  <input type="hidden" name="id" value="38436">
  <input type="hidden" name="token" value="1629878248-kk47stLVTW0oYxYYL6dYl-eEY5JqH6fQEA4Ih7HzfK4">
<div class="bz_short_desc_container edit_form">
     <a href="show_bug.cgi?id=38436"><b>Bug&nbsp;38436</b></a> <span id="summary_container" class="bz_default_hidden">
      - <span id="short_desc_nonedit_display">Locating Widgets in display coordinates for automated whitebox testing</span>
     </span>

    <div id="summary_input"><span class="field_label "
    id="field_label_short_desc">


  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>

</span>Locating Widgets in display coordinates for automated whitebox testing
    </div>
  </div>
  <script type="text/javascript">
    hideEditableField('summary_container',
                      'summary_input',
                      'summary_edit_action',
                      'short_desc',
                      'Locating Widgets in display coordinates for automated whitebox testing' );
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">NEW
      </span>
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_alias">


  <a 
      title="A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#alias"
  >Alias:</a>

</th>
    <td>
        None
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components. Select a Classification to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Platform

</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Eclipse Project

</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=Platform"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >SWT

  (<a href="buglist.cgi?component=SWT&amp;product=Platform&amp;bug_status=__open__"
      target="_blank">show other bugs</a>)
</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">


  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=fields.html#version"
  >Version:</a>

</th>

      <td>2.1 &#160; <a href="https://dev.eclipse.org/committers/bugs/bugz_manager.php"><img src="//dev.eclipse.org/small_icons/apps/accessories-text-editor.png" alt="Edit" title="Edit these values" /></a></td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">


  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>

</th>
      <td class="field_value">All
        All
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label  accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>P3
       enhancement<span id="votes_container">
      with
      <a href="page.cgi?id=voting/bug.html&amp;bug_id=38436">37 
            votes</a>
    (<a href="page.cgi?id=voting/user.html&amp;bug_id=38436#vote_38436">vote</a>)
  </span>
      </td>
    </tr>

      <tr><th class="field_label "
    id="field_label_target_milestone">


  <a 
      title="The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it."
      class="field_help_link"
      href="page.cgi?id=fields.html#target_milestone"
  >Target Milestone:</a>

</th>
        <td>--- &#160; <a href="https://dev.eclipse.org/committers/bugs/bugz_manager.php"><img src="//dev.eclipse.org/small_icons/apps/accessories-text-editor.png" alt="Edit" title="Edit these values" /></a></td>
      </tr>
          
          <tr><th class="field_label "
    id="field_label_assigned_to">


  <a 
      title="The person in charge of resolving the bug."
      class="field_help_link"
      href="page.cgi?id=fields.html#assigned_to"
  >Assignee:</a>

</th>
      <td><span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
      </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_qa_contact">


  <a 
      title="The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#qa_contact"
  >QA Contact:</a>

</th>
      <td><span class="vcard">
</span>
      </td>
    </tr>
    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'platform-swt-inbox\x40eclipse.org',
        '');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">


  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>

</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>

    <tr><th class="field_label "
    id="field_label_status_whiteboard">


  <a 
      title="Each bug has a free-form single line text entry box for adding tags and status information."
      class="field_help_link"
      href="page.cgi?id=fields.html#status_whiteboard"
  >Whiteboard:</a>

</th><td>  
  </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_keywords">


  <a 
      title="You can add keywords from a defined list to bugs, in order to easily identify and group them."
      class="field_help_link"
      href="describekeywords.cgi"
  >Keywords:</a>

</th>
  <td class="field_value "
      id="field_container_keywords" >

</td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          <tr>
    <th class="field_label">
      <label>Duplicates (1)</label>:
    </th>
    <td class="field_value">
      <span id="duplicates"><a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Cannot get height of Menu and no capabilities for work around"
   href="show_bug.cgi?id=48341">48341</a> 
      </span>
      (<a href="buglist.cgi?bug_id=48341">view as bug list</a>)
    </td>
  </tr>
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>

  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [plan item] Support GUI test tools"
   href="show_bug.cgi?id=37704">37704</a> 
  </td>
  </tr>

    <tr>
      <th>&nbsp;</th>

      <td id="show_dependency_tree_or_graph">
        Show dependency <a href="showdependencytree.cgi?id=38436&amp;hide_resolved=1">tree</a>

      </td>
    </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table>
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2003-06-04 16:20 EDT by <span class="vcard"><span class="fn">Kevin T Dale</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ktdale&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ktdale&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2019-09-06 16:15 EDT
      (<a href="show_activity.cgi?id=38436">History</a>)
    </td>
  
  </tr>
<tr>
      <th class="field_label">
        <label  accesskey="a">
          CC List:
        </label>
      </th>
      <td>44 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5" >
                <option value="alexander.smirnoff">alexander.smirnoff</option>
                <option value="andre_weinand">andre_weinand</option>
                <option value="as">as</option>
                <option value="billy.biggs">billy.biggs</option>
                <option value="bklau">bklau</option>
                <option value="bradleyjames">bradleyjames</option>
                <option value="bugzilla">bugzilla</option>
                <option value="cbateman">cbateman</option>
                <option value="danrubel">danrubel</option>
                <option value="dcharbon">dcharbon</option>
                <option value="dvoloshchuk">dvoloshchuk</option>
                <option value="e1vq24102">e1vq24102</option>
                <option value="eclipse.felipe">eclipse.felipe</option>
                <option value="fg">fg</option>
                <option value="frydzewski">frydzewski</option>
                <option value="GaryJohnston">GaryJohnston</option>
                <option value="gunnar">gunnar</option>
                <option value="gwrobert">gwrobert</option>
                <option value="hmceuen">hmceuen</option>
                <option value="holm.tyler">holm.tyler</option>
                <option value="hudsonr">hudsonr</option>
                <option value="hugo.a.garcia">hugo.a.garcia</option>
                <option value="Ihor.Strutynskyj">Ihor.Strutynskyj</option>
                <option value="imotic">imotic</option>
                <option value="jim.mcmaster">jim.mcmaster</option>
                <option value="johnsmith1492">johnsmith1492</option>
                <option value="lmcliste">lmcliste</option>
                <option value="martine">martine</option>
                <option value="mkwhitacre">mkwhitacre</option>
                <option value="mlists">mlists</option>
                <option value="morten-eclipse">morten-eclipse</option>
                <option value="mseele">mseele</option>
                <option value="pombredanne">pombredanne</option>
                <option value="pquitslund">pquitslund</option>
                <option value="richard.birenheide">richard.birenheide</option>
                <option value="rob">rob</option>
                <option value="rotbartf">rotbartf</option>
                <option value="russelld">russelld</option>
                <option value="scottp">scottp</option>
                <option value="steven.wasleski">steven.wasleski</option>
                <option value="tlroche">tlroche</option>
                <option value="veronika_irvine">veronika_irvine</option>
                <option value="ygrenier">ygrenier</option>
                <option value="zaichuk">zaichuk</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" >

</td>
    </tr> 

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>



        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts">
  <tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table">
  <tr id="a0">
    <th colspan="3" class="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=10629"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">Initial patch for various getBounds() methods</span></b></a>

          <span class="bz_attach_extra_info">
              (41.16 KB,
                patch)

            <br>
            <a href="#attach_10629"
               title="Go to the comment associated with the attachment">2004-05-13 18:36 EDT</a>,

            <span class="vcard"><span class="fn">Kevin T Dale</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ktdale&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ktdale&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=10629&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=10629&amp;action=diff">Diff</a>
        </td>
      </tr>
      <tr id="a2" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=10676"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">MenuItem.getBounds() fix</span></b></a>

          <span class="bz_attach_extra_info">
              (38.43 KB,
                patch)

            <br>
            <a href="#attach_10676"
               title="Go to the comment associated with the attachment">2004-05-14 16:28 EDT</a>,

            <span class="vcard"><span class="fn">Kevin T Dale</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ktdale&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ktdale&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=10676&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=10676&amp;action=diff">Diff</a>
        </td>
      </tr>
      <tr id="a3" class="bz_contenttype_text_plain bz_patch">
        <td>
            <a href="attachment.cgi?id=11493"
               title="View the content of the attachment">
          <b>SWT patch for MenuItem.getBounds() that returns an empty rectangle for invisible items</b></a>

          <span class="bz_attach_extra_info">
              (38.27 KB,
                patch)

            <br>
            <a href="#attach_11493"
               title="Go to the comment associated with the attachment">2004-06-02 15:08 EDT</a>,

            <span class="vcard"><span class="fn">Henry McEuen</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=hmceuen&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=hmceuen&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=11493&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=11493&amp;action=diff">Diff</a>
        </td>
      </tr>
      <tr id="a4" class="bz_contenttype_application_zip">
        <td>
            <a href="attachment.cgi?id=11498"
               title="View the content of the attachment">
          <b>Test case showing getBounds() for visible and nonvisible menu items</b></a>

          <span class="bz_attach_extra_info">
              (1.91 KB,
                application/zip)

            <br>
            <a href="#attach_11498"
               title="Go to the comment associated with the attachment">2004-06-02 15:44 EDT</a>,

            <span class="vcard"><span class="fn">Henry McEuen</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=hmceuen&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=hmceuen&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=11498&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a5" class="bz_contenttype_text_plain bz_patch">
        <td>
            <a href="attachment.cgi?id=16239"
               title="View the content of the attachment">
          <b>swt_patch3.zip for eclipse 3.1.M3</b></a>

          <span class="bz_attach_extra_info">
              (78.51 KB,
                patch)

            <br>
            <a href="#attach_16239"
               title="Go to the comment associated with the attachment">2004-11-30 13:04 EST</a>,

            <span class="vcard"><span class="fn">Scott Symmank</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ssymmank&#64;bea.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ssymmank&#64;bea.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=16239&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=16239&amp;action=diff">Diff</a>
        </td>
      </tr>
      <tr id="a6" class="bz_contenttype_text_plain bz_patch">
        <td>
            <a href="attachment.cgi?id=21077"
               title="View the content of the attachment">
          <b>adaption of code that fixes bad menu-picking as demonstrated in https://bugs.eclipse.org/bugs/show_bug.cgi?id=38436#c102</b></a>

          <span class="bz_attach_extra_info">
              (2.67 KB,
                patch)

            <br>
            <a href="#attach_21077"
               title="Go to the comment associated with the attachment">2005-05-12 19:45 EDT</a>,

            <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=21077&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=21077&amp;action=diff">Diff</a>
        </td>
      </tr>
      <tr id="a7" class="bz_contenttype_text_plain bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=23906"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">abbot.swt.SWTWorkarounds shelters users from Widget.getBounds()-related problems: cases where either Whatever.getBounds() is unavailable, not public, or has unwelcome behavior.</span></b></a>

          <span class="bz_attach_extra_info">
              (17.05 KB,
                text/plain)

            <br>
            <a href="#attach_23906"
               title="Go to the comment associated with the attachment">2005-06-23 19:11 EDT</a>,

            <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=23906&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a8" class="bz_contenttype_text_plain bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=25375"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">org.eclipse.swt.widgets.SWTWorkarounds lives in Abbot, exposing needed package-privates to users</span></b></a>

          <span class="bz_attach_extra_info">
              (15.43 KB,
                text/plain)

            <br>
            <a href="#attach_25375"
               title="Go to the comment associated with the attachment">2005-07-27 16:07 EDT</a>,

            <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=25375&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a9" class="bz_contenttype_text_plain bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=25431"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">SWTWorkarounds for Abbot (SWT 3.1, Windows, GTK and Motif)</span></b></a>

          <span class="bz_attach_extra_info">
              (8.42 KB,
                text/plain)

            <br>
            <a href="#attach_25431"
               title="Go to the comment associated with the attachment">2005-07-28 15:53 EDT</a>,

            <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=25431&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a10" class="bz_contenttype_text_plain bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=25499"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">SWTWorkarounds for Abbot (SWT 3.1: Windows, GTK, Motif)</span></b></a>

          <span class="bz_attach_extra_info">
              (8.61 KB,
                text/plain)

            <br>
            <a href="#attach_25499"
               title="Go to the comment associated with the attachment">2005-08-01 08:14 EDT</a>,

            <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=25499&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a11" class="bz_contenttype_text_plain">
        <td>
            <a href="attachment.cgi?id=25568"
               title="View the content of the attachment">
          <b>SWTWorkarounds for Abbot (SWT 3.1: Windows, GTK, Motif)</b></a>

          <span class="bz_attach_extra_info">
              (8.47 KB,
                text/plain)

            <br>
            <a href="#attach_25568"
               title="Go to the comment associated with the attachment">2005-08-02 13:34 EDT</a>,

            <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=25568&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a12" class="bz_contenttype_text_plain">
        <td>
            <a href="attachment.cgi?id=56919"
               title="View the content of the attachment">
          <b>SWTWorkarounds for Abbot (SWT 3.2: Windows, GTK, Motif) </b></a>

          <span class="bz_attach_extra_info">
              (11.14 KB,
                text/plain)

            <br>
            <a href="#attach_56919"
               title="Go to the comment associated with the attachment">2007-01-15 13:23 EST</a>,

            <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=56919&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a13" class="bz_contenttype_application_x-zip-compressed">
        <td>
            <a href="attachment.cgi?id=74636"
               title="View the content of the attachment">
          <b>extends SWT to add a getBounds method for MenuItem, and for TabItem, on OSX</b></a>

          <span class="bz_attach_extra_info">
              (52.34 KB,
                application/x-zip-compressed)

            <br>
            <a href="#attach_74636"
               title="Go to the comment associated with the attachment">2007-07-25 21:10 EDT</a>,

            <span class="vcard"><span class="fn">l. mclister</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=lmcliste&#64;adobe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=lmcliste&#64;adobe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=74636&amp;action=edit">Details</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="3">
        <span class="bz_attach_view_hide">
            <a href="#a0" onclick="return toggle_display(this);">Show
              Obsolete</a> (6)
            <a id="view_all" href="attachment.cgi?bugid=38436&amp;action=viewall&amp;hide_obsolete=1">View All</a>
        </span>
        <a href="attachment.cgi?bugid=38436&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>
<div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=38436&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>
  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="https://bugs.eclipse.org/bugs/js/comments.js?1463425338" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the 'comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>


<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table">
<tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kevin T Dale</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ktdale&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ktdale&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2003-06-04 16:20:55 EDT
        </span>

      </div>




<pre class="bz_comment_text">While SWT is superior to AWT in many ways, SWT currently falls short of its 
counterpart in the realm of automated whitebox GUI testing.  We are currently 
working on extending Abbot, a Java GUI testing framework originally intended 
for AWT, for use with SWT to allow for whitebox testing of SWT GUIs.  To 
accomplish this, we need the capability to programmatically manipulate SWT 
Widgets in a manner that mimics the user.  To this end, we need to be able to 
locate ANY Widget in display-coordinates. 

Currently, only Controls have a getLocation() method that provides this 
functionality (by calling parent.toDisplay(control.getLocation()).   Other 
specific subclasses of Widget have a getBounds() method- Caret, CoolItem, 
Decorations, TableItem, ToolItem, and TreeItem- that allow us to find instances 
of these classes in display coordinates.  And Menu has a public handle that 
allows for a platform-specific means of locating the Menu in display 
coordinates.  This leaves MenuItem, TabItem,  TableColumn, and Tracker, at 
least right now, unfindable.

The problem, then, lies in both the non-uniformity of these strategies to 
obtain something as simple as display coordinates and the lack thereof for 
Widgets of type MenuItem, TabItem, TableColumn, and Tracker.  We would like to 
request the addition of method(s) that, given an instance of a Widget, would 
return an org.eclipse.swt.graphics.Rectangle representing the bounding box for 
the Widget in Display coordinates.

And a final note.  Methods like getLocation, getBounds, and set/getFocus are 
only available to particular sub-classes of Widget, but these methods are 
applicable to ALL (or nearly all) Widget subclasses.  It would be worthwhile, 
then, to include these methods in the abstract class Widget and handle special 
cases by overriding these methods in Widget sub-classes.  I am aware that these 
operations- particularly set/getFocus- may not be applicable to particular 
Widget sub-types.  In these cases, however, it would be logical to execute the 
parent's appropriate method instead.  For example, we would give focus to the 
Widget's parent, or return the bounding box for the parent, if it were not 
possible to do so for a particular Widget sub-type itself.</pre>
    </div>

    <div id="c1" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Felipe Heidrich</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.felipe&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.felipe&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2003-06-12 11:50:07 EDT
        </span>

      </div>




<pre class="bz_comment_text">Check the map API in Display:
public Rectangle map (Control from, Control to, Rectangle rectangle) 

You should call this API to map the coordinates from a Control to the Display, 
you should also give a rectangle (getBounds) and not a point (getLocation) to 
do this kind of operation. It's important if you are running on a Mirrored 
coordinates system (arabic/hebrew).

Still, this does not solve all your problems...

SN to advise.
</pre>
    </div>

    <div id="c2" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-04-21 00:35:07 EDT
        </span>

      </div>




<pre class="bz_comment_text">Could you please provide getBounds() for all Widget's? Why I ask:

In order for an SWT automation tool to programmatically interact with
a target, it must be able to

0 use information provided by the coder to identify the target

1 get the size or position of the target

2 generate native events using those coordinates

Fortunately

* task 0 is done by navigating the graphical hierarchy

* task 1 is easy if your target is a Control

* there are at least two ways to do task 2 (using abbot.swt.Robot, in

<a href="http://sourceforge.net/projects/abbot">http://sourceforge.net/projects/abbot</a>

  or Sebastian Peleato's API)

The problem is that not all targets are Control's, especially if one
wishes to automate menu picking/navigation. We have workarounds, but
they are platform-specific (which complicates tool building and
deployment), underperformant (which degrades the user's experience),
and just plain kludgey.

Can you please provide getBounds(), or as similar API as possible, for
all Widget's, not just Control's? In 3.0?
</pre>
    </div>

    <div id="c3" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dan Kehn</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kehn&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kehn&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-04-21 09:32:28 EDT
        </span>

      </div>




<pre class="bz_comment_text">As a member of the WSAD performance team, I strongly support Tom / Kevin's 
request.  Today we are using XDE Tester, which only supports a &quot;black box&quot; 
approach.  It requires training and finessing to keep the scripts running; the 
support for Eclipse 3.0 is pending.  I believe that Abbot / Costello for SWT 
would be a better fit for our needs and those who hope to systematically track 
performance regressions.

Background: Gary Karasiuk, Sonia Dimitrov, and myself recently finished some 
work to integrate our performance plug-in, ptracker, into the Eclipse build.  
The goal is to supplement the JUnit launcher used today with one that captures 
key performance metrics with each build.  This will allow the Eclipse team to 
find performance regressions the day after they occur (not weeks!), saving 
countless hours of post-build detective work.

Abbot / Costello is a natural extension of this effort.  Today our performance 
testcases are limited to what can be executed in JUnit.  These testcases, 
while very good at detecting regressions in functionality, only approximate 
the true user experience.  If the underlying support for Abbot is completed, 
myself and others on our team will provide high-level **real** user scenarios 
to the Eclipse build team to fill out the incomplete performance regression 
capability.  This obviously won't occur if we are reliant exclusively on XDE 
Tester as we are today.

SWT's use of native widget makes 80% of Abbot's job easy.  However, the last 
20% that is missing makes its usage klunky, awkward, slow, and unreliable.  We 
would really like to see SWT supported as a first-class citizen among 
automated testing tools, and Abbot / Costello seems to be the obvious choice.</pre>
    </div>

    <div id="c4" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kevin T Dale</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ktdale&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ktdale&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-05-07 16:42:51 EDT
        </span>

      </div>




<pre class="bz_comment_text">We have attempted various workarounds to this problem (the lack of getBounds() 
for non-Control widgets)- for example, making an SWT API call to setSelection
(boolean) in a testcase instead of actually generating a mouse-click input 
event.  This, however, is unacceptable, as it makes for testcases that do not 
accurately reflect a realistic user scenario.  We've also tried making 
approximations of a widget's size and location based on its text/image content, 
but this incomplete approach is not a final solution either.

The lack of getBounds() for MenuItems is particularly debilitating.  Currently, 
the only way to automate MenuItem selection is to do so via accelerators and 
keystrokes.  However as Tom mentioned above, this method cannot consistently 
work across platforms and applications and is flimsy at best.

I'm beginning work on a patch for MenuItem.getBounds(), starting with win32.  
It appears that wrapping the native win32 method GetMenuItemRect(HWND, HMENU, 
UINT, LPRECT) should (essentially) provide the functionality we need.  And 
hopefully a similar approach will work with the other supported windowing 
systems.

The patch should allow Abbot to deal with MenuItems in much the same way as it 
does Controls, and the added consistency in implementation will result in a 
more reliable and capable testing tool.  In particular, testcases will be able 
to include menu navigation via mouse clicks.  This method is certainly more 
representative of real user interaction than what Abbot's current capabilities 
allow.   

HOWEVER, there will still be important non-Control widgets that lack a getBounds
() method- TableItem, TreeItem, CoolItem, ToolItem, and Scrollbar- basically 
any widget that a user can click that does not already provide a getBounds() 
method.  </pre>
    </div>

    <div id="c5" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kevin T Dale</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ktdale&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ktdale&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-05-07 17:20:58 EDT
        </span>

      </div>




<pre class="bz_comment_text">Disregard the last paragraph of my most previous post- it doesn't reflect the 
most recent SWT API.  The amended list of widgets that lack a getBounds() 
method should be- MenuItem, TableColumn, Tab, and ToolItem.  I'll be working on 
a patch for all of these in the coming week.</pre>
    </div>

    <div id="c6" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kevin T Dale</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ktdale&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ktdale&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-05-13 18:36:47 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=10629&amp;action=diff" name="attach_10629" title="Initial patch for various getBounds() methods">attachment 10629</a> <a href="attachment.cgi?id=10629&amp;action=edit" title="Initial patch for various getBounds() methods">[details]</a></span>
Initial patch for various getBounds() methods

On Windows, I've implemented the following:

	- TableColumn.getBounds()
	- TabItem.getBounds()
	- MenuItem.getBounds()

The first two have no restrictions; MenuItem.getBounds(), however, currently
only works for items in bar menus, as I am only able to obtain the size of a
given MenuItem in a cascade or popup menu but not its location.  In particular,
GetMenuItemRect doesn't appear to work as advertised in the win32
documentation, and I'm not sure where to go from here.	Any help with this
particular problem would be greatly appreciated.

The attached zip file contains fixes bound by &quot;//TODO: Begin patch&quot; and
&quot;//TODO: End patch&quot;.  Changes were made in org.eclipse.swt.internal.win32.OS
and org.eclipse.swt.widgets.{MenuItem,TableColumn,TabItem}.  I will also be
passing along an Abbot-driven JUnit test case that demonstrates the new
functionality to Dan Kehn.</pre>
    </div>

    <div id="c7" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kevin T Dale</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ktdale&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ktdale&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-05-14 16:28:35 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=10676&amp;action=diff" name="attach_10676" title="MenuItem.getBounds() fix">attachment 10676</a> <a href="attachment.cgi?id=10676&amp;action=edit" title="MenuItem.getBounds() fix">[details]</a></span>
MenuItem.getBounds() fix

Includes everything in the previous patch(10629), plus a new-and-improved
MenuItem.getBounds() for win32 with no restrictions.  It now works on items in
bar, cascading, and popup style menus.</pre>
    </div>

    <div id="c8" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-05-18 09:16:52 EDT
        </span>

      </div>




<pre class="bz_comment_text">*** <a class="bz_bug_link 
          bz_status_REOPENED "
   title="REOPENED - Need to determine height of a Menu."
   href="show_bug.cgi?id=39184">Bug 39184</a> has been marked as a duplicate of this bug. ***</pre>
    </div>

    <div id="c9" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-05-18 15:03:39 EDT
        </span>

      </div>




<pre class="bz_comment_text">Can provided Widget-location patches be rolled into SWT 3.0?
(Not M9, but 3.0 final.) Why I ask:

Automation is important. SWT's failure to provide the ability to
locate (and therefore drive) all Widget's presents a competitive
disadvantage, given that AWT/Swing allows one to find all its
Component's.

If SWT (the organization) fails to provide this, automators will need
to patch SWT (the code), minimally for menuing. An automation tool has
gotta have menuing: there's just too much tooling that's inaccessible
without it. (E.g. a friend in another IBM group wants to start testing
a GEF-based component, but can't because the component allows a user
to interact with its figures only through context menus.) We will
eventually need the other non-Control Widget's, but we need menuing
now.

So I'm wondering, how can we get this into 3.0? Note that

* academic summer being upon us, my group has some more resources
  available, so we can assist with this task.

* I'm frankly skeptical regarding the claim made in

<a class="bz_bug_link 
          bz_status_REOPENED "
   title="REOPENED - Need to determine height of a Menu."
   href="show_bug.cgi?id=39184">https://bugs.eclipse.org/bugs/show_bug.cgi?id=39184</a>

  that this can't

<span class="quote">&gt; happen for 3.0 because we are API frozen (unless mountains are moved
&gt; with the PMC).</span >

  for 2 reasons:

· This is new API. Since no one's currently using it, how can it
  break anyone? Feel free to deprecate the API, &quot;label as hazardous,&quot;
  whatever, to protect the innocent.

· Is there now, or has there ever been, any positive argument for
  not implementing getBounds() for {MenuItem, TableItem, TreeItem,
  CoolItem, ToolItem}? I.e. &quot;we should not implement getBounds() for
  these classes, because &lt;your positive argument here/&gt;&quot;? I suspect
  not, but I could be wrong.

Note also that we will cheerfully kiss rings, move mountains, etc with
the PMC as required--but I frankly don't see that as a valid objection
to enabling this API, which folks need ... given that an (admittedly
partial) implementation is being handed to SWT. So ... how best to get
this into 3.0 final?

</pre>
    </div>

    <div id="c10" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-05-25 16:38:26 EDT
        </span>

      </div>




<pre class="bz_comment_text">*** <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Cannot get height of Menu and no capabilities for work around"
   href="show_bug.cgi?id=48341">Bug 48341</a> has been marked as a duplicate of this bug. ***</pre>
    </div>

    <div id="c11" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Henry McEuen</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=hmceuen&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=hmceuen&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-06-02 15:08:57 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=11493&amp;action=diff" name="attach_11493" title="SWT patch for MenuItem.getBounds() that returns an empty rectangle for invisible items">attachment 11493</a> <a href="attachment.cgi?id=11493&amp;action=edit" title="SWT patch for MenuItem.getBounds() that returns an empty rectangle for invisible items">[details]</a></span>
SWT patch for MenuItem.getBounds() that returns an empty rectangle for invisible items</pre>
    </div>

    <div id="c12" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Henry McEuen</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=hmceuen&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=hmceuen&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-06-02 15:44:54 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=11498" name="attach_11498" title="Test case showing getBounds() for visible and nonvisible menu items">attachment 11498</a> <a href="attachment.cgi?id=11498&amp;action=edit" title="Test case showing getBounds() for visible and nonvisible menu items">[details]</a></span>
Test case showing getBounds() for visible and nonvisible menu items</pre>
    </div>

    <div id="c13" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Henry McEuen</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=hmceuen&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=hmceuen&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-06-02 16:14:20 EDT
        </span>

      </div>




<pre class="bz_comment_text">The patch I just posted (SWT patch for MenuItem.getBounds() that returns an
empty rectangle for invisible items) is the same as the earlier patch that Kevin
wrote, except for an update to MenuItem.getBounds() that causes it to return an
empty rectangle instead of garbage in the case when the menu item is not
visible.  This is done by checking the return value of GetMenuItemRect, which
indicates whether menu item bounds were able to be calculated.

getBounds() returns coordinates that are relative to the client area of the
Decorations that is the parent of the Menu that the MenuItem belongs to.  This
means that getBounds() can return a rectangle that has negative coordinates. 
This is seen on Windows: the y-coordinate returned will be negative for menu
items on the menu bar since these items lie above the client area.  This does
not pose a problem, however, since these relative coordinates can easily be
turned into screen coordinates through Control.toDisplay().  Therefore in all
cases that we have tested this patch returns correct bounds in a manner that is
consistent with getBounds() on other widgets that implement getBounds().

I have also posted a test case that dynamically displays the result of getBounds
for several MenuItems.  In running the test it is possible to see how the
bounding rectangle changes from empty to nonempty as menu items are revealed and
hidden.
</pre>
    </div>

    <div id="c14" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-06-03 09:43:19 EDT
        </span>

      </div>




<pre class="bz_comment_text">I have been thinking more about MenuItem.getBounds() and I'm coming to the 
conclusion that we shouldn't implement it (instead we should add a new API 
that returns widget bounds in Display coordinates).  The problem is that on 
the Macintosh, the menu bar is not in the shell.  We can fake this but it 
won't match the operating system and will have the amazing property that the 
coordinates will be wrong when the shell is moved.  This will happen because 
when the shell is moved but on the Macintosh, the menu bar stays in the same 
location instead of moving with the shell like the other platforms.  I'm stuck 
on an API name that means &quot;get the bounds in the display coordinate system&quot;.  
At any rate, the API would be exactly what you need, no coordinate mapping.</pre>
    </div>

    <div id="c15" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dan Kehn</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kehn&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kehn&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-06-03 11:28:16 EDT
        </span>

      </div>




<pre class="bz_comment_text">Re: <a href="show_bug.cgi?id=38436#c14">Comment #14</a>

Under the Monty Python category, &quot;And now for something completely 
different...&quot;

I believe you're correct Steve.  Thinking about it a bit further, two viable 
approaches come to mind: (a) a new method &quot;getBoundsRoot&quot; (borrowed from 
similar name in VA/ST, where &quot;root&quot; means screen) as you suggest, or (b) an 
adapter.  The advantage of (b) is that it gets SWT out of the loop entirely, 
since any framework could provide a set of adapters to the APIs we desire.  
One method in Widget does it all:

  public Object getAdapter(Class adapter) {
    return Platform.getAdapterManager().
      getAdapter(this, adapter);  // note Platform reference... see PS below
  }

Now that core implements the extension 
point &quot;org.eclipse.core.runtime.adapters&quot; (it's new and yes, I've tested this 
in other code and it works as advertised), this is a cost-free alternative 
from a performance perspective (i.e., before there was no means of registering 
an adapter except through code, forcing your plug-in's activation).  Then 
Abbot for SWT can handle this little problem on its own in a nice, clean, 
architected way.  If you want to move it later into the SWT layer, great, but 
there's certainly no urgent need.

Since this extension point is relatively new, I'll provide an example of what 
it would look like in the Abbot4SWT implementation:

  &lt;extension point=&quot;org.eclipse.core.runtime.adapters&quot;&gt;
    &lt;factory 
        adaptableType=&quot;org.eclipse.swt.widgets.Widget&quot;
        class=&quot;org.abbot4swt.WidgetAdapterFactory&quot;&gt;
      &lt;adapter type=&quot;org.abbot4swt.WidgetCoordinateMapper&quot;/&gt;
    &lt;/factory&gt;
  &lt;/extension&gt;

The Abbot for SWT folks provide WidgetCoordinateMapper and 
WidgetAdapterFactory.  If there are exception cases (e.g., MenuItem), they 
either (a) handle it in their WidgetCoordinateMapper with instanceof, or (b) 
provide a widget-specific adapter (e.g., MenuItemCoordinateMapper).

It also opens the door to future adaptation should we discover &quot;SWT 
shortcomings&quot; later.  So how about it, one little method?  Tempted?  :-)  

PS: Of course, one gotcha of this approach is the reference to Platform... 
which presupposes the Eclipse platform runtime is present.  That would mean 
either reflection (returning null if not found) or a fragment.  Not perfect, 
but extensible and gets SWT out of the discussion, now and in the future.</pre>
    </div>

    <div id="c16" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-06-03 16:14:13 EDT
        </span>

      </div>




<pre class="bz_comment_text">Steve Northover  2004-06-03 09:43 -------
<span class="quote">&gt; I have been thinking more about MenuItem.getBounds() and I'm coming
&gt; to the conclusion that we shouldn't implement it (instead we should
&gt; add a new API that returns widget bounds in Display coordinates).</span >

That would be great! I continue to believe that API should be
available to 

* get the bounds of any Widget, just as one can get the bounds of any
  JComponent. 

* return consistent co-ordinates for any Widget

It's the inconsistency of the present situation

Thomas L Roche/Raleigh/IBM&#64;IBMUS 05/28/2004 08:38 PM
<span class="quote">&gt;&gt; Widget child  has getBounds()?
&gt;&gt; ------------  ----------------
&gt;&gt; Caret         yes,
&gt;&gt;               parent == null ? relative to display : relative to parent</span >

<span class="quote">&gt;&gt; Control       yes,
&gt;&gt;               parent == null ? relative to display : relative to parent</span >

<span class="quote">&gt;&gt; DragSource    no, but has getControl()</span >

<span class="quote">&gt;&gt; DropTarget    no, but has getControl()</span >

<span class="quote">&gt;&gt; Item          no</span >

<span class="quote">&gt;&gt; Menu          no, we workaround with getParent().getBounds()</span >

<span class="quote">&gt;&gt; ScrollBar     yes, no javadoc but looks relative to its parent</span >

<span class="quote">&gt;&gt; Tracker       no, but has computeBounds()</span >

<span class="quote">&gt;&gt; Tray          no</span >

that most annoys.

<span class="quote">&gt; The problem is that on the Macintosh, the menu bar is not in the
&gt; shell. We can fake this but it won't match the operating system and
&gt; will have the amazing property that the coordinates will be wrong
&gt; when the shell is moved. This will happen because when the shell is
&gt; moved but on the Macintosh, the menu bar stays in the same location
&gt; instead of moving with the shell like the other platforms.</span >

I believe we can live with this. We have never asked for completeness
on all platforms (much less API contracts engraved on tablets)--we
understand that some platforms will do things differently. However it
is difficult to imagine a platform that did not know the bounds of a
thing it was drawing, hence providing bounds-getting API (by whatever
name) on Widget makes sense.

Dan Kehn 2004-06-03 11:28 -------
<span class="quote">&gt; Thinking about it a bit further, two viable approaches come to mind:
&gt; (a) a new method &quot;getBoundsRoot&quot; (borrowed from similar name in
&gt; VA/ST, where &quot;root&quot; means screen) as you suggest, or (b) an adapter.</span >

or (c) both.

<span class="quote">&gt; The advantage of (b) is that it gets SWT out of the loop entirely,
&gt; since any framework could provide a set of adapters to the APIs we
&gt; desire.</span >

True, but this is a case where the existing SWT API is noticeably
fragmented. (c) is best, but (a) is preferable to (b).

<span class="quote">&gt; PS: Of course, one gotcha of this approach is the reference to
&gt; Platform... which presupposes the Eclipse platform runtime is
&gt; present.</span >

Which is gonna hose testing standalone (non-platform-resident) SWT
UIs, no? (b) alone is likely to be insufficient.
</pre>
    </div>

    <div id="c17" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Henry McEuen</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=hmceuen&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=hmceuen&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-06-25 13:49:30 EDT
        </span>

      </div>




<pre class="bz_comment_text">Along the same line of implementing getBounds() in various widgets, there are
other widgets that implement getBounds() in ways that are less than ideal for
automated testing.  One of these is TableItem.getBounds(int).  This returns a
bounding box for the entire item, which for purposes of consistency is probably
what should happen.  However, selecting an item by clicking on it can only be
done by clicking on the table item's text or image.  There is no way to get the
bounds of the area that can be clicked (presumably the union of the image and
text bounds).  Are there issues that would make providing this in the API
(something like TableItem.getClickableBounds(int)) undesirable?  The only
workaround that I can foresee for testing is to check the style of the column
the text is in and give a default location to click on based on whether it is
left, right, or center.
</pre>
    </div>

    <div id="c18" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-06-25 13:56:45 EDT
        </span>

      </div>




<pre class="bz_comment_text">Some platforms allow you to click anywhere on the same line.  In general, it's 
unspecified where you click and with which button.</pre>
    </div>

    <div id="c19" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steven Wasleski</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=steven.wasleski&#64;cerner.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=steven.wasleski&#64;cerner.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-07-20 14:32:58 EDT
        </span>

      </div>




<pre class="bz_comment_text">Steve N., Is there a chance to make progress on this for test tool enablement 
in 3.0.1?  Could you set the target milestone for 3.0.1 or 3.1 as appropriate?
</pre>
    </div>

    <div id="c20" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-07-20 15:26:05 EDT
        </span>

      </div>




<pre class="bz_comment_text">I will mark it when I we have finished assessing the rest of the items.</pre>
    </div>

    <div id="c21" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-07-20 15:28:10 EDT
        </span>

      </div>




<pre class="bz_comment_text">Steven Wasleski  2004-07-20 14:32 -------
<span class="quote">&gt; Could you set the target milestone for 3.0.1 or 3.1 as appropriate?</span >

Extra points for 3.0.1! Patching is a drag :-(
</pre>
    </div>

    <div id="c22" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c22">Comment 22</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Veronika Irvine</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=veronika_irvine&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=veronika_irvine&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-08-25 12:16:46 EDT
        </span>

      </div>




<pre class="bz_comment_text">This item is still under investigation and will not be added to 3.0.1.</pre>
    </div>

    <div id="c23" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c23">Comment 23</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-08-25 17:25:09 EDT
        </span>

      </div>




<pre class="bz_comment_text">Steven Wasleski  2004-07-20 14:32 -------
<span class="quote">&gt;&gt; Could you set the target milestone for 3.0.1 or 3.1 as appropriate?</span >

Veronika Irvine 2004-08-25 12:16 -------
<span class="quote">&gt; This item is still under investigation and will not be added to
&gt; 3.0.1.</span >

Could you set the target milestone?
</pre>
    </div>

    <div id="c24" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c24">Comment 24</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-11-21 16:12:18 EST
        </span>

      </div>




<pre class="bz_comment_text">I committed a description of our current patches to the abbot.swt documentation

<a href="http://cvs.sourceforge.net/viewcvs.py/*checkout*/abbot/abbot.swt/doc/swt/patchingSWT.txt?rev=1.7">http://cvs.sourceforge.net/viewcvs.py/*checkout*/abbot/abbot.swt/doc/swt/patchingSWT.txt?rev=1.7</a>

Same content is available in slightly different form from

<a href="http://sourceforge.net/mailarchive/message.php?msg_id=9665074">http://sourceforge.net/mailarchive/message.php?msg_id=9665074</a>
</pre>
    </div>

    <div id="c25" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c25">Comment 25</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-11-22 11:41:13 EST
        </span>

      </div>




<pre class="bz_comment_text">Thanks.  I was actually working on the menu part of this last week but could 
find no way for the Mac to give back the coordinates of items in the menu 
bar.  It seems that owner draw isn't honoured for Mac menu bars.  I tried 
reaching and getting the MenuBarHandle and looking at the &quot;lastRight&quot; 
and &quot;menuLeft&quot; fields of the substructures.  The documentation says that they 
aren't when SetRootMenu() is used but I was desparate.  I tried every 
kEventMenu that there was including the amazing kEventMenuGetFrameBounds but 
this is only called when the user has clicked on a menu bar item.

How do automated testing applications move the mouse into the Mac menu bar and 
hittest the items there?  I googled for CGPostMouseEvent() hoping to find 
example code that did this.  Even MenuSelect(), the Mac call that runs the 
menu bar for the user takes a mouse location.

Andre?</pre>
    </div>

    <div id="c26" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c26">Comment 26</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Timothy Wall</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=twall&#64;users.sourceforge.net" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=twall&#64;users.sourceforge.net" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-11-22 12:19:35 EST
        </span>

      </div>




<pre class="bz_comment_text">If it turns out to be impossible to get the actual bounds for a component, you may have to rely on 
programmatically activating the component given a proper specification of the final target.  This 
unfortunately leaves out actual display operation of the UI component, which sometimes needs to be 
tested, but probably the more common case is needing to be able to activate a given menu item.

Mac OSX uses AWT components as proxies for the equivalent Swing menu bits when the 
useScreenMenuBar property is set (which it should be for any OSX java app).  The AWT menu items 
provide no location information (actually rendering the location information of the original Swing 
components invalid), so they have to be driven programmatically.

Unfortunately, I don't know enough about native Mac OS programming to indicate whether the location 
info is available or not...</pre>
    </div>

    <div id="c27" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c27">Comment 27</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-11-23 10:52:52 EST
        </span>

      </div>




<pre class="bz_comment_text">Hi Tom, I checked out your patches.  It seems to me that none of them need to 
be in SWT classes.  For example, consider the hypothetical method 
SWT_PATCH.TabItem_getBounds():

public Rectangle TabItem_getBounds(TabFolder parent){
   int index = parent.indexOf(this);
   if (index == -1) return new Rectangle (0, 0, 0, 0);
   RECT rect = new RECT();
   OS.SendMessage( parent.handle,
           OS.HDM_FIRST + 7 /*OS.TCM_GETITEMRECT*/,
           index,
           rect);
   int width = rect.right - rect.left;
   int height = rect.bottom - rect.top;
   return new Rectangle(rect.left,rect.top,width,height); 
}

The advantage of this is that you don't need to patch SWT with your changes 
and the work needed to port them to other platforms is isolated in one class.  
The disadvantage is that it is ugly as hell.

Hopefully we can implement what you need and the issue becomes moot.</pre>
    </div>

    <div id="c28" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c28">Comment 28</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-11-23 12:28:52 EST
        </span>

      </div>




<pre class="bz_comment_text">Comments From <a href="mailto:steve_northover&#64;ca.ibm.com">steve_northover&#64;ca.ibm.com</a>  2004-11-23 10:52 -------
<span class="quote">&gt; It seems to me that [none of the abbot.swt patches] need to be in
&gt; SWT classes. For example, consider the hypothetical method
&gt; SWT_PATCH.TabItem_getBounds():</span >

<span class="quote">&gt; public Rectangle TabItem_getBounds(TabFolder parent){
&gt;    int index = parent.indexOf(this);
&gt;    if (index == -1) return new Rectangle (0, 0, 0, 0);
&gt;    RECT rect = new RECT();
&gt;    OS.SendMessage( parent.handle,
&gt;            OS.HDM_FIRST + 7 /*OS.TCM_GETITEMRECT*/,
&gt;            index,
&gt;            rect);
&gt;    int width = rect.right - rect.left;
&gt;    int height = rect.bottom - rect.top;
&gt;    return new Rectangle(rect.left,rect.top,width,height); 
&gt; }</span >

<span class="quote">&gt; The advantage of this is that you don't need to patch SWT with your
&gt; changes</span >

which would be nice, but ...

<span class="quote">&gt; and the work needed to port them to other platforms is isolated in
&gt; one class.</span >

... that keeps the platform port effort isolated onto the shoulders of
our zero-FTE-headcount OSS project. Would it not be so much more
securely borne by you SWT professionals ?-) After all, the Sun folks
don't make us support AWT/Swing API ...

Plus, it's s/one class/one class per patched widget/, and rewriting the
*Finder and *Tester classes that use them, but those are minor concerns
relative to maintaining the proper (IMHO, YMMV) separation of concerns/
effort.

<span class="quote">&gt; Hopefully we can implement what you need and the issue becomes moot.</span >

That's what _I'm_ hoping :-)
</pre>
    </div>

    <div id="c29" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c29">Comment 29</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-11-23 12:58:47 EST
        </span>

      </div>




<pre class="bz_comment_text">Given that you are forced into patching, why not patch in the most optimal 
way?  Put all the work arounds in a single (ugly) class that is outside of the 
library rather than adding them as methods to the classes where they belong.  
That way, no one changes anything and odds are good that your code will 
continue to work when the next release of the library ships.  There are more 
good reasons for this.  Suppose that when the methods are added, they return 
something different or use a different coordinate system.  You can isolate 
those changes in the ugly class.  Also, suppose that when the bug is fixed or 
the feature implemented, someone applies your patches over the fix by 
mistake.  That seems wrong.  You should be testing the fixed code, not the 
patch.  Imagine that the bug never gets fixed.  You are no worse off and 
nobody needs to patch anything.

This just seems like good software engineering to me.</pre>
    </div>

    <div id="c30" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c30">Comment 30</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-11-23 14:05:07 EST
        </span>

      </div>




<pre class="bz_comment_text">Additional <a href="show_bug.cgi?id=38436#c27">Comment #27</a> From Steve Northover  2004-11-23 10:52 -------
<span class="quote">&gt;&gt;&gt; consider the hypothetical method SWT_PATCH.TabItem_getBounds():</span >

<span class="quote">&gt;&gt;&gt; public Rectangle TabItem_getBounds(TabFolder parent){
&gt;&gt;&gt;    int index = parent.indexOf(this);
&gt;&gt;&gt;    if (index == -1) return new Rectangle (0, 0, 0, 0);
&gt;&gt;&gt;    RECT rect = new RECT();
&gt;&gt;&gt;    OS.SendMessage( parent.handle,
&gt;&gt;&gt;            OS.HDM_FIRST + 7 /*OS.TCM_GETITEMRECT*/,
&gt;&gt;&gt;            index,
&gt;&gt;&gt;            rect);
&gt;&gt;&gt;    int width = rect.right - rect.left;
&gt;&gt;&gt;    int height = rect.bottom - rect.top;
&gt;&gt;&gt;    return new Rectangle(rect.left,rect.top,width,height); 
&gt;&gt;&gt; }</span >

<span class="quote">&gt;&gt;&gt; The advantage of this is that you don't need to patch SWT with
&gt;&gt;&gt; your changes</span >

Additional <a href="show_bug.cgi?id=38436#c28">Comment #28</a> From Tom Roche  2004-11-23 12:28 -------
<span class="quote">&gt;&gt; which would be nice, but ...</span >

<span class="quote">&gt; and the work needed to port them to other platforms is isolated in
&gt; one class.</span >

<span class="quote">&gt;&gt; ... that keeps the platform port effort isolated onto the shoulders
&gt;&gt; of our zero-FTE-headcount OSS project. Would it not be so much more
&gt;&gt; securely borne by you SWT professionals ?-) After all, the Sun
&gt;&gt; folks don't make us support AWT/Swing API ...</span >

Comments From <a href="mailto:steve_northover&#64;ca.ibm.com">steve_northover&#64;ca.ibm.com</a>  2004-11-23 12:58 (rearranged)
<span class="quote">&gt; Given that you are forced into patching, why not patch in the most
&gt; optimal way?</span >

Your rhetorical question is correct (not so sure about this sentence,
though :-). But I keep wondering {why I am, how long I will continue
to be} forced into patching this.

<span class="quote">&gt; Put all the work arounds in a single (ugly) class that is outside of
&gt; the library rather than adding them as methods to the classes where
&gt; they belong. </span >

OK, in order to patch this way, what's the best locus for that class?
IIUC the patches are minimally platform-dependent, and maximally
SWT-version dependent. Remember, I'm trying to isolate abbot.swt (and
abbot.swt.gef, etc) users from &quot;raw&quot; SWT--how best to isolate
abbot.swt.* from these dependencies? A separate plugin?

<span class="quote">&gt; That way, no one changes anything and odds are good that your code
&gt; will continue to work when the next release of the library ships.
&gt; There are more good reasons for this. Suppose that when the methods
&gt; are added, they return something different or use a different
&gt; coordinate system. You can isolate those changes in the ugly class.</span >

Yes, I understand the goodness of Adapter and Decorator ...

<span class="quote">&gt; Also, suppose that when the bug is fixed or the feature implemented,
&gt; someone applies your patches over the fix by mistake. That seems
&gt; wrong.</span >

Oh, it will be--once you fix SWT, I'm gonna pull the patches off
SourceForge so fast the servers will spin :-)

<span class="quote">&gt; This just seems like good software engineering to me.</span >

... and work for me. FWIW I'd much rather be working on enabling users
to write (and hopefully TDD) SWT tests, and getting more coverage for
my own tests, than adapting SWT to work with j.a.Robot as AWT does
already. That being said, if it'll save me from patching again, I'll
do it. Note that my assumption was that, having patched once, the
concept would be proven, and I wouldn't hafta patch again ...
</pre>
    </div>

    <div id="c31" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c31">Comment 31</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-11-23 16:52:43 EST
        </span>

      </div>




<pre class="bz_comment_text">Ok, I give up.  I was trying to help you in case we don't get to this for 3.1. 
There is an art to ugly things.  If you can't see it, then you never will.</pre>
    </div>

    <div id="c32" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c32">Comment 32</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Scott Symmank</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ssymmank&#64;bea.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ssymmank&#64;bea.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-11-30 13:04:40 EST
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=16239&amp;action=diff" name="attach_16239" title="swt_patch3.zip for eclipse 3.1.M3">attachment 16239</a> <a href="attachment.cgi?id=16239&amp;action=edit" title="swt_patch3.zip for eclipse 3.1.M3">[details]</a></span>
swt_patch3.zip for eclipse 3.1.M3

This is an EXACT port of the changes made to swt-3.0.1 in swt-3.1.M3.

Having this, or a similar fix, in the eclipse 3.1 line would be VERY
helpful. Thank you to everyone who has already done all the work on
this issue.

If you download this patch, please, post a note showing your interest
in the fix.</pre>
    </div>

    <div id="c33" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c33">Comment 33</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-11-30 13:38:38 EST
        </span>

      </div>




<pre class="bz_comment_text">I'm still stuck on the Mac.  If there is no possible way to get the bounds of 
a menu item in a Mac menu bar, then MenuItem.getBounds() can never be SWT API.

Andre?  Where are you?</pre>
    </div>

    <div id="c34" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c34">Comment 34</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dan Kehn</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kehn&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kehn&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-11-30 13:47:52 EST
        </span>

      </div>




<pre class="bz_comment_text">&lt;&lt; If there is no possible way to get the bounds of a menu item in a Mac menu 
bar, then MenuItem.getBounds() can never be SWT API. &gt;&gt;

It's not unprecedented that GUI whitebox testers have platform-specific 
limitations. So although it's not ideal, you could throw 
UnsupportedOperationException. </pre>
    </div>

    <div id="c35" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c35">Comment 35</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-11-30 13:56:27 EST
        </span>

      </div>




<pre class="bz_comment_text">The thinking is as follows:  There are automated GUI testing tools on the 
Mac.  I can't believe that they don't test menus in the menu bar.  What do 
they do?  Whatever they do, we should do the same thing rather than offering 
API that can't be implemented.  I'm hoping that there's something I'm missing 
and that we will be able to make MenuItem.getBounds() work on a Mac.</pre>
    </div>

    <div id="c36" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c36">Comment 36</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Timothy Wall</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=twall&#64;users.sourceforge.net" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=twall&#64;users.sourceforge.net" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-11-30 14:00:52 EST
        </span>

      </div>




<pre class="bz_comment_text">A quick search on developer.apple.com shows that the MacOS has native calls to determine the bounds 
of a menu item.

The comments I made previously about the bounds being unavailable applies only to the AWT menus 
providing no API to determine their location (this applies to *all* platforms).  When OSX uses AWT 
menus as proxies for Swing menus, the Swing items' bounds information becomes invalid.</pre>
    </div>

    <div id="c37" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c37">Comment 37</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-11-30 16:31:38 EST
        </span>

      </div>




<pre class="bz_comment_text">Timothy, can you post the URL to the Mac native calls?</pre>
    </div>

    <div id="c38" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c38">Comment 38</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-11-30 17:57:05 EST
        </span>

      </div>




<pre class="bz_comment_text">Sorry Steve, I forgot about this PR after some unsuccessful investigation.
I'll spend a &quot;Support Incident&quot; with ADC if nothing useful shows up until tomorrow.</pre>
    </div>

    <div id="c39" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c39">Comment 39</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-11-30 18:25:23 EST
        </span>

      </div>




<pre class="bz_comment_text">I couldn't find any API to calculate the bounds of a menu item directly, but I think it should be possibIe 
to use the menu definition function for this.
I haven't tried this, but you could send a &quot;kMenuCalcItemMsg&quot; to the menuProc where you pass in the 
menuItem. The parameter menuRect will contain the item bounds on return.
</pre>
    </div>

    <div id="c40" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c40">Comment 40</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-11-30 18:53:34 EST
        </span>

      </div>




<pre class="bz_comment_text">Another (ugly) approach could be probing:
you could generate screen coordinates that run from the left to the right screen bound and an 
increment of about 10 with a vertical position of menuBar.height/2 and map these coordinates to menu 
items with available API.</pre>
    </div>

    <div id="c41" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c41">Comment 41</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-01 12:38:11 EST
        </span>

      </div>




<pre class="bz_comment_text">I already had a go at probing (yetch) and failed.  It seems that the only time 
you can ask this information is when a drop down menu is pulled down.  Then, 
inside the &quot;cascade callback&quot;, you can get the bounds of the item that was 
selected.  This (of course), is too late.  I have workspace full of unreleased 
hack that I am sitting on that I can make available for you to try,

Do you know how the menu definition function differs from carbon events?  I 
saw kMenuCalcItemMsg but thought that because we didn't use a custom menu 
definition that it didn't apply.  Also I had no clue how to send a fake menu 
definition function event like kMenuCalcItemMsg.  Also it seemed that this 
event applied to MenuRefs, not MenuBarHandles (or the various things inside 
them that represent the menu bar).

Please spend a support incident with ADC on this as it is holding up the API.</pre>
    </div>

    <div id="c42" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c42">Comment 42</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-01 12:51:08 EST
        </span>

      </div>




<pre class="bz_comment_text">OK, will do.
(Shouldn't we create a new bug report for this? Whenever we add a new comment, most likely we are 
spamming a lot of people probably not too interested in the Mac...)</pre>
    </div>

    <div id="c43" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c43">Comment 43</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-01 13:04:25 EST
        </span>

      </div>




<pre class="bz_comment_text">I don't think so.  If people are uninterested in the progress on this bug 
report, they can remove themselves.</pre>
    </div>

    <div id="c44" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c44">Comment 44</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-03 06:41:52 EST
        </span>

      </div>




<pre class="bz_comment_text">The trick is to use the Accessibility API.

After some hacking I came up with the following piece of code
which does what you are looking for (I passed in the SWT menubar handle):

void dumpMenubarItemBounds(MenuRef menu) {
	AXUIElementRef ref= AXUIElementCreateWithHIObjectAndIdentifier((HIObjectRef)menu, (UInt64)0);
	if (ref != NULL) {
		int i= 0;
		CFArrayRef children;
		fprintf(stderr, &quot;menubar item bounds:\n&quot;);
		AXUIElementCopyAttributeValue(ref, kAXChildrenAttribute, (CFTypeRef*) &amp;children);
		
		CFIndex count= CFArrayGetCount(children);
		for (i= 0; i &lt; count; i++) {
			CFTypeRef valueRef;
			CGPoint position;
			CGSize size;
			CFStringRef title;
 			
			AXUIElementRef menuItem= (AXUIElementRef) CFArrayGetValueAtIndex(children, i);

			AXUIElementCopyAttributeValue(menuItem, kAXTitleAttribute, (CFTypeRef*) &amp;title);
			const char *t= CFStringGetCStringPtr(title, kCFStringEncodingMacRoman);
		
			AXUIElementCopyAttributeValue(menuItem, kAXPositionAttribute, &amp;valueRef);
			AXValueGetValue(valueRef, kAXValueCGPointType, &amp;position);
 
			AXUIElementCopyAttributeValue(menuItem, kAXSizeAttribute, &amp;valueRef);
			AXValueGetValue(valueRef, kAXValueCGSizeType, &amp;size);
            	            	
			fprintf(stderr, &quot;  %d %s: x:%d y:%d w:%d h:%d\n&quot;, i, t, 
				(int)position.x, (int)position.y, (int)size.width, (int)size.height);
            	
			CFRelease(valueRef);
			CFRelease(title);
		}
	 	CFRelease(children);
		CFRelease(ref);
	}
}
</pre>
    </div>

    <div id="c45" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c45">Comment 45</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-03 10:05:33 EST
        </span>

      </div>




<pre class="bz_comment_text">Thanks!</pre>
    </div>

    <div id="c46" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c46">Comment 46</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Felipe Heidrich</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.felipe&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.felipe&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-03 16:20:13 EST
        </span>

      </div>




<pre class="bz_comment_text">Andre, I added the following code in Menu.java (plus the natives to OS):

public Rectangle[] getItemBounds () {
	if ((style &amp; SWT.BAR) != 0) return null;	
	int menuRef = handle;
	int ref = OS.AXUIElementCreateWithHIObjectAndIdentifier (menuRef, (long)0);
	if (ref != 0) {
		int [] children = new int [1];
		System.out.println(&quot;XAERROR: &quot; + OS.AXUIElementCopyAttributeValue (ref, 
OS.kAXChildrenAttribute (), children));
		int count = OS.CFArrayGetCount (children [0]);
		Rectangle [] result = new Rectangle [count];
		int [] valueRef = new int [1];
        CGPoint position = new CGPoint ();
        CGSize size = new CGSize ();
		for (int i = 0; i &lt; count; i++) {
			int menuItem = OS.CFArrayGetValueAtIndex (children [0], i);
            OS.AXUIElementCopyAttributeValue (menuItem, OS.kAXPositionAttribute(), valueRef);
            OS.AXValueGetValue (valueRef [0], OS.kAXValueCGPointType, position);
            OS.CFRelease (valueRef [0]);
            OS.AXUIElementCopyAttributeValue (menuItem, OS.kAXSizeAttribute(), valueRef);
            OS.AXValueGetValue (valueRef [0], OS.kAXValueCGSizeType, size);
            OS.CFRelease (valueRef [0]);
            result [i] = new Rectangle ((int)position.x, (int)position.y, (int)size.width, (int)size.height);
		}
		return result;
	}
	return null;
}

But when I execute it I get an AXERROR equals to -25211 (kAXErrorAPIDisabled), do you know how to 
fix this ?</pre>
    </div>

    <div id="c47" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c47">Comment 47</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-03 17:00:34 EST
        </span>

      </div>




<pre class="bz_comment_text">Interesting, for security reasons Apple disables the Accessibility API if the user hasen't enabled
the &quot;Enable access for assistive devices&quot;  option in System Preferences (I always have this option on to 
see focus borders everywhere).
You can turn it on via the &quot;System Preferences &gt; Universal Access &gt; Enable access for assistive devices&quot;

Sorry, I didn't know that and had to Google for it...</pre>
    </div>

    <div id="c48" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c48">Comment 48</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Felipe Heidrich</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.felipe&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.felipe&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-03 17:14:35 EST
        </span>

      </div>




<pre class="bz_comment_text">it looks like we can't use this API then :-(
</pre>
    </div>

    <div id="c49" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c49">Comment 49</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-03 17:27:33 EST
        </span>

      </div>




<pre class="bz_comment_text">Why? The API is for whitebox testing.
I don't see a problem to require that the option is turned on.
</pre>
    </div>

    <div id="c50" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c50">Comment 50</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-03 17:40:33 EST
        </span>

      </div>




<pre class="bz_comment_text">Some call it a &quot;platform reality&quot; :-)</pre>
    </div>

    <div id="c51" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c51">Comment 51</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-03 17:55:36 EST
        </span>

      </div>




<pre class="bz_comment_text">Felipe Heidrich 2004-12-03 16:20 -------
<span class="quote">&gt;&gt;&gt;&gt;&gt; Andre, I added [Menu.getItemBounds()] (plus the natives to OS):</span >

&lt;snip&gt;

<span class="quote">&gt;&gt;&gt;&gt;&gt; But when I execute it I get an AXERROR equals to -25211
&gt;&gt;&gt;&gt;&gt; (kAXErrorAPIDisabled), do you know how to fix this ?</span >

Andre Weinand 2004-12-03 17:00 -------
<span class="quote">&gt;&gt;&gt;&gt; Interesting, for security reasons Apple disables the
&gt;&gt;&gt;&gt; Accessibility API if the user hasen't enabled the &quot;Enable access
&gt;&gt;&gt;&gt; for assistive devices&quot; option in System Preferences (I always
&gt;&gt;&gt;&gt; have this option on to see focus borders everywhere). You can
&gt;&gt;&gt;&gt; turn it on via the &quot;System Preferences &gt; Universal Access &gt;
&gt;&gt;&gt;&gt; Enable access for assistive devices&quot;</span >

<span class="quote">&gt;&gt;&gt;&gt; Sorry, I didn't know that and had to Google for it...</span >

Felipe Heidrich 2004-12-03 17:14 -------
<span class="quote">&gt;&gt;&gt; it looks like we can't use this API then :-(</span >

Andre Weinand 2004-12-03 17:27 -------
<span class="quote">&gt;&gt; Why? The API is for whitebox testing.
&gt;&gt; I don't see a problem to require that the option is turned on.</span >

Andre Weinand 2004-12-03 17:40 -------
<span class="quote">&gt; Some call it a &quot;platform reality&quot; :-)</span >

Agreed: it's realistic to assume the user will need to do other things
to &quot;instrument,&quot; or enable testability for, any given platform &#64;
runtime. As long as it compiles, and doesn't break other function, I
don't see a problem with, e.g., javadoc'ing or FAQ'ing similar
requirements--&quot;call at your own risk.&quot; It Would Be Nice if s/he didn't
hafta, but that may be the price to pay for automation.
</pre>
    </div>

    <div id="c52" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c52">Comment 52</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Randy Hudson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=hudsonr&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=hudsonr&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-03 18:05:45 EST
        </span>

      </div>




<pre class="bz_comment_text">Display.setCursorLocation(point) does nothing on some platforms, so maybe this 
method could nothing, or return an empty rectangle when accessibility is 
disabled.</pre>
    </div>

    <div id="c53" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c53">Comment 53</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-03 18:24:43 EST
        </span>

      </div>




<pre class="bz_comment_text">An empty rectangle isn't an option when the option is disabled.  How about 
trying Apple again for another approach?</pre>
    </div>

    <div id="c54" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c54">Comment 54</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-03 18:37:32 EST
        </span>

      </div>




<pre class="bz_comment_text">Yes, I've contacted DTS and for security reasons there is no other approach.</pre>
    </div>

    <div id="c55" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c55">Comment 55</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-06 10:49:10 EST
        </span>

      </div>




<pre class="bz_comment_text">The Mac has been around since 1984.  It is 2004 (almost 2005).  HIObject is 
new to OS 10.x.  In all those years nobody has written a GUI testing tool that 
pulls down a menu bar menu and selects an item?  Andre, can you please ask 
again how GUI testing tools perform this action?  The issue here is that 
having an API that fails and requires the user to change something on the 
control panel is not a good solution.

Thanks.</pre>
    </div>

    <div id="c56" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c56">Comment 56</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-06 11:15:51 EST
        </span>

      </div>




<pre class="bz_comment_text">Steve, so what is the issue now?
- getting API so that SWT can implement Menubaritem.getBounds(), or
- driving the Mac UI from another process?

Whether GUI testing tools existed before MacOS X (1984-2001) doesn't really matter since they could 
easily patch the OS and wouldn't run anyway on MacOS X.
</pre>
    </div>

    <div id="c57" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c57">Comment 57</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-06 11:26:00 EST
        </span>

      </div>




<pre class="bz_comment_text">The first hope is that we could get API to implement MenuItem.getBounds() that 
doesn't require the user to set something in the control panel.  If that can't 
be done, then the next thing is to investigate how this kind of action is 
normally done on the Mac.  Assuming we found something, we would then consider 
portable SWT API that exposed this capability (we would need to ensure that it 
could be implemented on the other platforms).  It's not great, be we'd be 
portable and could move on.

Again, my first choice would be MenuItem.getBounds().  It's very frustrating 
because I have an implementation for everything but the menu bar.</pre>
    </div>

    <div id="c58" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c58">Comment 58</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-06 15:35:40 EST
        </span>

      </div>




<pre class="bz_comment_text"><a href="show_bug.cgi?id=38436#c55">Comment #55</a> From Steve Northover  2004-12-06 10:49 -------
<span class="quote">&gt;&gt;&gt; In all those years nobody has written a GUI testing tool that pulls
&gt;&gt;&gt; down a menu bar menu and selects an item?</span >

<a href="show_bug.cgi?id=38436#c56">Comment #56</a> From Andre Weinand 2004-12-06 11:15 -------
<span class="quote">&gt;&gt; Whether GUI testing tools existed before MacOS X (1984-2001) doesn't
&gt;&gt; really matter</span >

True. How far back do we hafta support? Note

<a href="http://www.apple.com/applescript/uiscripting/">http://www.apple.com/applescript/uiscripting/</a>
<span class="quote">&gt; Mac OS X v10.3 includes support for the control of the computer's
&gt; graphic user interface via AppleScript.</span >

<span class="quote">&gt; Graphic user interface control is performed by an updated version of
&gt; the System Events application. By addressing the System Events
&gt; application, AppleScript scripts can select menu items, push
&gt; buttons, enter text into text fields, and generally control the
&gt; interfaces of most non-Classic applications.</span >

<span class="quote">&gt; The following pages detail the process of enabling and using the GUI
&gt; Scripting architecture.</span >
</pre>
    </div>

    <div id="c59" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c59">Comment 59</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-06 15:39:39 EST
        </span>

      </div>




<pre class="bz_comment_text">... but, as Andre mentioned

<a href="http://www.apple.com/applescript/uiscripting/01.html">http://www.apple.com/applescript/uiscripting/01.html</a>
<span class="quote">&gt; The GUI Scripting architecture is based upon the Mac OS X
&gt; accessibility frameworks that provide alternative methods of
&gt; querying and controlling the interfaces of the OS and applications.</span >

<span class="quote">&gt; By default, the accessibility frameworks are disabled. An
&gt; administrative user can enable them by clicking the checkbox labeled
&gt; &quot;Enable access for assistive devices&quot; in the Universal Access System
&gt; Preference pane and entering their password in the [subsequent]
&gt; authentication dialog.</span >

<span class="quote">&gt; Once the accessibility frameworks have been activated, AppleScript
&gt; can be used to query and control the user interface of most
&gt; applications. Scripted actions are performed by addressing the
&gt; System Events application which has a special script suite for
&gt; communicating with the GUI Scripting architecture.</span >

Is there API to query or set the Universal Access System?
</pre>
    </div>

    <div id="c60" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c60">Comment 60</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-06 16:13:32 EST
        </span>

      </div>




<pre class="bz_comment_text"><a href="show_bug.cgi?id=38436#c55">Comment #55</a> From Steve Northover  2004-12-06 10:49 -------
<span class="quote">&gt;&gt;&gt; In all those years nobody has written a GUI testing tool that pulls
&gt;&gt;&gt; down a menu bar menu and selects an item?</span >

<a href="show_bug.cgi?id=38436#c56">Comment #56</a> From Andre Weinand 2004-12-06 11:15 -------
<span class="quote">&gt;&gt; Whether GUI testing tools existed before MacOS X (1984-2001) doesn't
&gt;&gt; really matter</span >

<span class="quote">&gt;&gt; True. How far back do we hafta support? Note</span >

The Mac menu bar is not new to 10.x.  Can anyone tell me what API pre-10.x GUI 
testing applications did?  Mac API is backwards compatible.</pre>
    </div>

    <div id="c61" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c61">Comment 61</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-06 17:13:33 EST
        </span>

      </div>




<pre class="bz_comment_text">Re: <a href="show_bug.cgi?id=38436#c55">comment #55</a>:
I've sent your request to DTS.

Re: <a href="show_bug.cgi?id=38436#c59">comment #59</a>:
<span class="quote">&gt; Is there API to query or set the Universal Access System?</span >
Yes, and the example application
   <a href="http://developer.apple.com/samplecode/UIElementInspector/UIElementInspector.html">http://developer.apple.com/samplecode/UIElementInspector/UIElementInspector.html</a>
uses it to make the user enable the Universal Access option.

Re: <a href="show_bug.cgi?id=38436#c60">comment #60</a>:
<span class="quote">&gt; Mac API is backwards compatible.</span >
Yes, if you run your pre-Carbon apps in Classic mode (MacOS 9 running inside MacOS X).
Native MacOS X apps must only use Carbon which is a smaller subset of the original Mac Toolbox.</pre>
    </div>

    <div id="c62" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c62">Comment 62</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-06 21:17:31 EST
        </span>

      </div>




<pre class="bz_comment_text"><a href="show_bug.cgi?id=38436#c59">comment #59</a>:
<span class="quote">&gt;&gt; Is there API to query or set the Universal Access System?</span >

<a href="show_bug.cgi?id=38436#c61">comment #61</a>
<span class="quote">&gt; Yes, and the example application</span >

<span class="quote">&gt; <a href="http://developer.apple.com/samplecode/UIElementInspector/UIElementInspector.html">http://developer.apple.com/samplecode/UIElementInspector/UIElementInspector.html</a></span >

<span class="quote">&gt; uses it to make the user enable the Universal Access option.</span >

&lt;Do I need XCode to read
UIElementInspector/UIElementInspector.app/Contents/MacOS/UIElementInspector
?/&gt;

Hopefully &quot;DTS&quot; will come up with a cleaner solution, but {if not, for
the nonce} why not support Carbon (do we even support Classic or
Cocoa?) like

if (Universal Access not set) {
  if (user not administrative)
    throw SWTException // ERROR_USER_LACKS_PERMISSION
  set it
}
return bounds

?
</pre>
    </div>

    <div id="c63" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c63">Comment 63</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Weinand</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=andre_weinand&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=andre_weinand&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-07 03:43:15 EST
        </span>

      </div>




<pre class="bz_comment_text">Re <a href="show_bug.cgi?id=38436#c62">comment #62</a>:
You can find the source in the files ending in .h and .m
UIElementInspector/UIElementInspector.app/Contents/MacOS/UIElementInspector
is the executable. You don't want to read it :-)</pre>
    </div>

    <div id="c64" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c64">Comment 64</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-10 17:08:30 EST
        </span>

      </div>




<pre class="bz_comment_text">One more thing to patch: could SWT make ScrollBar.getBounds() public?
I notice, thanks to

<a href="http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1080952&amp;group_id=50939&amp;atid=461490">http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1080952&amp;group_id=50939&amp;atid=461490</a>

that if I do

export WS=&quot;win32&quot;
export PLATFORM=&quot;x86&quot;
export DEVSPACE=&quot;/d/eclipse/devspaces/scratch&quot;
# outside of eclipse? (automate this) copy the patchfiles here
export PATCHESPATH=&quot;$DEVSPACE/patchfiles&quot;
export INPUT=&quot;eclipse-SDK-3.1M3-$WS.zip&quot;
export ZIPHOME=&quot;<a href="ftp://fullmoon.rtp.raleigh.ibm.com/S-3.1M3-200411050810/$INPUT">ftp://fullmoon.rtp.raleigh.ibm.com/S-3.1M3-200411050810/$INPUT</a>&quot;
export ZIPSPACE=&quot;/d/eclipse/zips&quot;
export ZIPVER=&quot;3.1.0&quot;
export PROJECTPATH=&quot;$DEVSPACE/org.eclipse.swt&quot;
# !forget to backslash underscores between vars!
export
SOURCEZIP=&quot;eclipse/plugins/org.eclipse.platform.source.$WS.$WS.$PLATFORM\_$ZIPVER/src/org.eclipse.swt.$WS\_$ZIPVER/ws/$WS/swtsrc.zip&quot;
export ZIPFILES=&quot;$SOURCEZIP \
  eclipse/plugins/org.eclipse.swt.$WS\_$ZIPVER/os/$WS/$PLATFORM/swt-*.dll \
  eclipse/plugins/org.eclipse.swt_$ZIPVER/plugin.properties \
  eclipse/plugins/org.eclipse.swt_$ZIPVER/META-INF/MANIFEST.MF \
  eclipse/plugins/org.eclipse.swt_$ZIPVER/plugin.xml \
  eclipse/plugins/org.eclipse.swt_$ZIPVER/about.html&quot;
wget -O $ZIPSPACE/$INPUT $ZIPHOME
cd $DEVSPACE
mkdir -p $PROJECTPATH
# clean this up! e.g. should move to META-INF/MANIFEST.MF
unzip -j $ZIPSPACE/$INPUT $ZIPFILES -d $PROJECTPATH
mkdir -p $PROJECTPATH/src
unzip $PROJECTPATH/swtsrc.zip -d $PROJECTPATH/src
find $PROJECTPATH/src -type f -name '*.java' | \
xargs fgrep -ne 'Rectangle getBounds' | \
fgrep -e '{' | fgrep -v 'public'

I get only one line output:

&gt;
/d/eclipse/devspaces/scratch/org.eclipse.swt/src/org/eclipse/swt/widgets/ScrollBar.java:202:Rectangle
getBounds () {

Dunno why it should be singled out.
</pre>
    </div>

    <div id="c65" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c65">Comment 65</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-12-10 18:06:50 EST
        </span>

      </div>




<pre class="bz_comment_text">This work won't make it into M4.  We are waiting on Apple.</pre>
    </div>

    <div id="c66" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c66">Comment 66</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-01-10 17:10:18 EST
        </span>

      </div>




<pre class="bz_comment_text">Still waiting on Apple.</pre>
    </div>

    <div id="c67" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c67">Comment 67</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Randy Hudson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=hudsonr&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=hudsonr&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-01-10 17:35:04 EST
        </span>

      </div>




<pre class="bz_comment_text">Tom, how does the scrollbar bounds help you? There are still magic regions on a 
scrollbar which don't have API.

Have you tried using the client area API?  The sides with the larger amount of 
insets would contain a scrollbar probably.</pre>
    </div>

    <div id="c68" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c68">Comment 68</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-01-10 18:35:42 EST
        </span>

      </div>




<pre class="bz_comment_text"><a href="show_bug.cgi?id=38436#c67">Comment #67</a> From Randy Hudson  2005-01-10 17:35 -------
<span class="quote">&gt;&gt; Tom, how does the scrollbar bounds help you? </span >

Umm ... in order to automate moving a scrollbar we need to know where
to tell java.awt.Robot to mouseDown. (I'm suspecting I don't fully
understand the question.)

<span class="quote">&gt;&gt; There are still magic regions on a scrollbar which don't have API.</span >

See future FRs :-) Note that I'm only interested in automating and
testing common behaviors: something very WS-specific might require
native automation.

<span class="quote">&gt;&gt; Have you tried using the client area API? </span >

I'm not sure what you mean: could you show p/code?

<span class="quote">&gt;&gt; The sides with the larger amount of insets would contain a
&gt;&gt; scrollbar probably.</span >

In any case, while there may be a workaround in this specific case,
Widget.getBounds() is still greatly to be desired. Not only does it
greatly simplify simple automation code (I can let the runtime call
the appropriate method), but it facilitates higher-level abstractions,
which makes it easier for coders to write automated test cases for
their targets (which is what my effort is all about). E.g. Abbot has
ComponentLocation, which

ComponentLocation javadoc
<span class="quote">&gt; Provides encapsulation of a visible Component-relative location.
&gt; Hides the location specifics so that ComponentTester primitives
&gt; (actionClick, actionShowPopup, etc) may be directed to specific
&gt; elements of substructure on a Component (list rows, tree paths,
&gt; table cells, substructure values, etc).</span >

with subclasses JListLocation, JTreeLocation, JTableLocation,
JTabbedPaneLocation, etc. This relies at base on
Component.getBounds(). AFAICS I will need Widget.getBounds() to
provide WidgetLocation and subclasses, so that folks can more
easily/quickly write tests on JFace thingies. (So far we've been able
to automate WDE without WidgetLocation, but I dunno what diabolical
graphics those devious GEF folks might devise in future :-)
</pre>
    </div>

    <div id="c69" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c69">Comment 69</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Randy Hudson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=hudsonr&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=hudsonr&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-01-11 10:45:27 EST
        </span>

      </div>




<pre class="bz_comment_text">What I meant was that once you have the scrollbar's bounds, you still have no 
idea where the down up button are, the thumb, or the areas in between.  These 
areas might depend on the WS skin or certain preferences (e.g. Mac OS).

See Scrollable.computeTrim(int,int,int,int) for a possible workaround to 
obtaining the scrollbar's bounds.</pre>
    </div>

    <div id="c70" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c70">Comment 70</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-01-18 20:31:32 EST
        </span>

      </div>




<pre class="bz_comment_text"><a href="show_bug.cgi?id=38436#c65">Comment #65</a> From Steve Northover  2004-12-10 18:06 -------
<span class="quote">&gt;&gt; This work won't make it into M4.  We are waiting on Apple.</span >

<a href="show_bug.cgi?id=38436#c66">Comment #66</a> From Steve Northover 2005-01-10 17:10 -------
<span class="quote">&gt; Still waiting on Apple.</span >

While we're waiting, could you make what functionality you have
available for use?

Abbot has win32 users and folks who are interested in using it with
GTK and winCE. We would much rather use your release-quality win32
getBounds()'s than our hacks, and would like to enable folks on
non-win32 platforms to make progress. In return, we would provide
real-world feedback on their use.
</pre>
    </div>

    <div id="c71" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c71">Comment 71</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-01-19 12:25:02 EST
        </span>

      </div>




<pre class="bz_comment_text">I won't release API that can't be implemented on all platforms.  I am working 
with Apple on another solution but they are slow.</pre>
    </div>

    <div id="c72" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c72">Comment 72</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Morten Moeller</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=morten-eclipse&#64;moelleryoung.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=morten-eclipse&#64;moelleryoung.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-01-19 12:46:19 EST
        </span>

      </div>




<pre class="bz_comment_text">I don't really understand the rationale here Steve N. M4 is a milestone build,  
and if some obscure feature like this one isn't available for all platforms I  
don't see the problem.   
  
If I remember correctly, the whole Browser widget didn't get released on all  
platforms at the same time either in 3.0 milestones. The Browser API changed a 
lot between Milestones as well; its not like it needs to be stabile at this 
point. And there are even APIs that doesn't work on all platforms in GA 
builds. Why is this obscure UI-testing-tool feature so different? If Apple 
responds in M5 or M6 thats great, but are you saying we can never support this 
(from SWT, I agree there are workarounds) if we cannot have it on OSX and 
Apple tells us how?  
 
I guess my question is why you are so afraid to put it in now? Milestones APIs 
have changed in the past.. Afraid it cannot ever be supported on all [major] 
platforms? That the API will radically change when you get info from Apple?  
 
Well, just my .0002$ 
 </pre>
    </div>

    <div id="c73" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c73">Comment 73</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-01-19 12:51:41 EST
        </span>

      </div>




<pre class="bz_comment_text">I don't want to put out temporary API that I may need to retract later.</pre>
    </div>

    <div id="c74" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c74">Comment 74</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-02-25 20:29:19 EST
        </span>

      </div>




<pre class="bz_comment_text">Any word from Apple?</pre>
    </div>

    <div id="c75" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c75">Comment 75</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-02-28 03:14:13 EST
        </span>

      </div>




<pre class="bz_comment_text">Sigh.  Hopefully something at EclipseCon.</pre>
    </div>

    <div id="c76" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c76">Comment 76</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Philippe Ombredanne</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=pombredanne&#64;nexb.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=pombredanne&#64;nexb.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-03-19 03:31:58 EST
        </span>

      </div>




<pre class="bz_comment_text">Hi Steve, any news on Apple's side? </pre>
    </div>

    <div id="c77" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c77">Comment 77</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-03-28 23:35:38 EST
        </span>

      </div>




<pre class="bz_comment_text">I talked to them and they made hopeful noises about new API but I was on 
vacation for the last 3 weeks.  I will follow up now.  However, M6 is the API 
freeze.  I'm actually pretty mad about this (madder than Tom Roche must be!).</pre>
    </div>

    <div id="c78" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c78">Comment 78</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Philippe Ombredanne</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=pombredanne&#64;nexb.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=pombredanne&#64;nexb.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-03-29 12:18:29 EST
        </span>

      </div>




<pre class="bz_comment_text">Steve, aren't you Mr. SWT?
So I guess you could carry the clout with the PMC to bend the API freeze rules a
bit.

Alternatively, those changes could be made in time to make it to 3.1 M7, but not
made part of the API...
Like that you respect the API freeze, and the deal could be that the new
features/methods/visibility of methods -while public- would be unsupported in
the API, with a common agreement that the best effort will be made that make
them public &amp; official API in a 3.1.1 or something like that.

That would really make those ugly patches go away.

As a last resort, what about aspect enabling SWT -or something similar- to allow
for external hooks/mods without API changes?
I was quite impressed with Martin Lippert AJEER at EclipseCon.</pre>
    </div>

    <div id="c79" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c79">Comment 79</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-03-29 12:58:40 EST
        </span>

      </div>




<pre class="bz_comment_text">I'm not mad about the API freeze but rather that we have been waiting on Apple 
for so long that the API freeze happened, causing this feature to probably not 
happen for 3.1, after I promised to do something about it for 3.1.  I'm still 
working on it.  API's can change after M6 but it's way harder to make it 
happen ... and that's a good thing at this stage in the game.</pre>
    </div>

    <div id="c80" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c80">Comment 80</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gary Johnston</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=GaryJohnston&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=GaryJohnston&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-04-08 14:21:25 EDT
        </span>

      </div>




<pre class="bz_comment_text">Sounds like getBounds() for Menu and MenuItem are in the pipeline.  I'd like to
request public implementations for ScrollBar, TabItem and TableColumn as well. 
For completeness, perhaps DragSource, DropTarget, TrayItem, Tracker, Tray should
probably be supported as well.</pre>
    </div>

    <div id="c81" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c81">Comment 81</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-04-08 14:58:25 EDT
        </span>

      </div>




<pre class="bz_comment_text"><a href="show_bug.cgi?id=38436#c80">Comment #80</a> From Gary Johnston  2005-04-08 14:21
<span class="quote">&gt; Sounds like getBounds() for Menu and MenuItem are in the pipeline.
&gt; I'd like to request public implementations for ScrollBar, TabItem
&gt; and TableColumn as well. For completeness, perhaps DragSource,
&gt; DropTarget, TrayItem, Tracker, Tray should probably be supported as
&gt; well.</span >

&quot;Probably&quot;? For completeness they should definitely be supported.

For functionality, i.e. enabling folks to write their tests,
DragSource and DropTarget are higher priority. I know at least one
person who is trying to test drag'n'drop onto R*D's Page Data View.
We have too much functionality that is only provided by context
menuing or DnD, so we really need to be able to test both of those.
</pre>
    </div>

    <div id="c82" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c82">Comment 82</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gary Johnston</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=GaryJohnston&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=GaryJohnston&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-02 12:30:22 EDT
        </span>

      </div>




<pre class="bz_comment_text">All Widgets (i.e., including non-Control Widgets) should also implement
toDisplay(Point) &amp; toDisplay(int, int).</pre>
    </div>

    <div id="c83" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c83">Comment 83</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-09 21:58:40 EDT
        </span>

      </div>




<pre class="bz_comment_text">I have 3.1-M6 (Eclipse Platform Version: 3.1.0 Build id:
I20050401-1645) and I'm seeing

org.eclipse.swt.widgets.TableItem
<span class="quote">&gt; /*public*/ Rectangle getBounds () {</span >

Can this be restored to public-ness? Alternatively, is there another
way to get the bounds of a TableItem that one has found without
knowing its row and column (e.g. by matching its getText() or some
setData()'ed key/value)?
</pre>
    </div>

    <div id="c84" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c84">Comment 84</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-10 08:31:07 EDT
        </span>

      </div>




<pre class="bz_comment_text">Is there some reason that TableItem.getBounds(int) won't work for you?</pre>
    </div>

    <div id="c85" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c85">Comment 85</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-10 12:00:33 EDT
        </span>

      </div>




<pre class="bz_comment_text">Tao Weng 04/25/2005 10:39:05 AM:
<span class="quote">&gt;&gt;&gt;&gt; I got my UML2 regression test script fully automated with
&gt;&gt;&gt;&gt; Abbot.swt. I have to say that Abbot.swt is a great product.</span >

&lt;more shameless plug snipped :-&gt;

<span class="quote">&gt;&gt;&gt;&gt; By the way, I have changed a little bit of Abbot.swt in order to
&gt;&gt;&gt;&gt; make my UML2 regression test script run. I do not know whether
&gt;&gt;&gt;&gt; those changes are valid or not, so I don't want to do any check
&gt;&gt;&gt;&gt; in. I would like to let you know.</span >

&lt;big snip&gt;

<span class="quote">&gt;&gt;&gt;&gt; 3) In abbot.tester.swt.WidgetLocator, I have to add the following 
&gt;&gt;&gt;&gt; piece of code in  &quot;getBounds&quot; function.</span >

<span class="quote">&gt;&gt;&gt;&gt; if(w instanceof TableItem){
&gt;&gt;&gt;&gt;    TableItem item = (TableItem)w;
&gt;&gt;&gt;&gt;    Rectangle bounds = item.getBounds();
&gt;&gt;&gt;&gt;    Point p = item.getParent().toDisplay(bounds.x,bounds.y);
&gt;&gt;&gt;&gt;    return new Rectangle(p.x,p.y,bounds.width,bounds.height);
&gt;&gt;&gt;&gt;  }</span >

Tom Roche  2005-05-09 21:58
<span class="quote">&gt;&gt;&gt; I have 3.1-M6 (Eclipse Platform Version: 3.1.0 Build id:
&gt;&gt;&gt; I20050401-1645) and I'm seeing</span >

<span class="quote">&gt;&gt;&gt; org.eclipse.swt.widgets.TableItem
&gt;&gt;&gt; &gt; /*public*/ Rectangle getBounds () {</span >

<span class="quote">&gt;&gt;&gt; Can this be restored to public-ness? Alternatively, is there
&gt;&gt;&gt; another way to get the bounds of a TableItem that one has found
&gt;&gt;&gt; without knowing its row and column (e.g. by matching its getText()
&gt;&gt;&gt; or some setData()'ed key/value)?</span >

<a href="mailto:steve_northover&#64;ca.ibm.com">steve_northover&#64;ca.ibm.com</a>  2005-05-10 08:31
<span class="quote">&gt;&gt; Is there some reason that TableItem.getBounds(int) won't work for
&gt;&gt; you?</span >

As stated above, tests need to be able to get the bounds for a
TableItem of which the column index is unknown. Is there API to get
the column index for a TableItem? If not:

org.eclipse.swt.widgets.TableItem.getBounds(int)
<span class="quote">&gt; /**
&gt;  * Returns a rectangle describing the receiver's size and location
&gt;  * relative to its parent at a column in the table.
&gt;  *
&gt;  * &#64;param index the index that specifies the column
&gt;  * &#64;return the receiver's bounding column rectangle</span >

seems to require the user to know the TableItem's column index. Am I
missing something?</pre>
    </div>

    <div id="c86" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c86">Comment 86</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-10 12:38:12 EDT
        </span>

      </div>




<pre class="bz_comment_text">Use getBounds(0).</pre>
    </div>

    <div id="c87" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c87">Comment 87</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-10 12:54:02 EDT
        </span>

      </div>




<pre class="bz_comment_text">Steve Northover  2005-05-10 12:38
<span class="quote">&gt; Use getBounds(0).</span >

If TableItem.getBounds(0) == TableItem.getBounds(),
why not instead

public Rectangle getBounds () {
  return getBounds (0);
}

and refactor the current code

/*public*/ Rectangle getBounds () {
  checkWidget();
  if (!parent.checkData (this, true)) error (SWT.ERROR_WIDGET_DISPOSED);
  int itemIndex = parent.indexOf (this);
  if (itemIndex == -1) return new Rectangle (0, 0, 0, 0);
  RECT rect = getBounds (itemIndex, 0, true, false);
  int width = rect.right - rect.left, height = rect.bottom - rect.top;
  return new Rectangle (rect.left, rect.top, width, height);
}

into some other private API? What purpose is served by
not providing the same signature for TableItem?
</pre>
    </div>

    <div id="c88" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c88">Comment 88</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-10 13:55:44 EDT
        </span>

      </div>




<pre class="bz_comment_text">TableItem.getBounds() was intended to return the same thing as Tree.getBounds
() now that Tree's have columns.  To be exact, the bounds of the text not 
including the item but the code didn't get implemented on all platforms.  This 
would make Tree and Table API consistent (right now Table is missing the 
method).

Would you like me to delete it?  I can't make it public because we are API 
frozen.</pre>
    </div>

    <div id="c89" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c89">Comment 89</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-10 14:08:40 EDT
        </span>

      </div>




<pre class="bz_comment_text"><a href="mailto:steve_northover&#64;ca.ibm.com">steve_northover&#64;ca.ibm.com</a>  2005-05-10 13:55 -------
<span class="quote">&gt; TableItem.getBounds() was intended to return the same thing as
&gt; Tree.getBounds () now that Tree's have columns. To be exact, the
&gt; bounds of the text not including the item but the code didn't get
&gt; implemented on all platforms. This would make Tree and Table API
&gt; consistent (right now Table is missing the method).</span >

<span class="quote">&gt; Would you like me to delete it? I can't make it public because we
&gt; are API frozen.</span >

&lt;sigh/&gt; No, we'll just wait for a thaw. abbot.swt has plenty other
SWT workarounds right now, what's one more ...
</pre>
    </div>

    <div id="c90" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c90">Comment 90</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-10 14:33:22 EDT
        </span>

      </div>




<pre class="bz_comment_text">I meant to say &quot;To be exact, the bounds of the text not including the image&quot;.  
I'm not sure exactly how not having this API is holding you back.

I'm also really sorry for missing the 3.1 release for this bug report.</pre>
    </div>

    <div id="c91" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c91">Comment 91</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-10 15:55:39 EDT
        </span>

      </div>




<pre class="bz_comment_text">Steve Northover 2005-05-10 14:33 -------
<span class="quote">&gt; I'm not sure exactly how not having this API is holding you back.</span >

We continue to need Widget.getBounds(). Everything that holds that
back requires workarounds. We have done workarounds for this issue
(TableItem.getBounds()) and others on win32, but we don't have the
resources to workaround for Carbon, GTK, etc.

Lots of folks want programmatic automation, mostly for developer
testing. (Some for other purposes--Larry Bergman is doing really cool
extensions for demo/doc/pedagogy, maybe even TVT.) All we ask is for
SWT to provide a firm foundation for programmatic automation (as Swing
does).

<span class="quote">&gt; I'm also really sorry for missing the 3.1 release for this bug
&gt; report.</span >

Me too--I would love for Abbot 1.0 to have multiplatform support.

Todd Brackett: we're told that SWT's fix for this bug is just waiting
for Apple to enable MenuItem.getBounds() for Carbon. If correct, can
you give us an ETA?
</pre>
    </div>

    <div id="c92" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c92">Comment 92</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-10 16:11:35 EDT
        </span>

      </div>




<pre class="bz_comment_text">You can get the information you need already for the TableItem on all 
platforms so I'm not sure what you are working around in this particular case.</pre>
    </div>

    <div id="c93" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c93">Comment 93</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-10 17:13:16 EDT
        </span>

      </div>




<pre class="bz_comment_text">Steve Northover  2005-05-10 14:33   -------
<span class="quote">&gt;&gt;&gt; I'm not sure exactly how not having this API is holding you back.</span >

Tom Roche  2005-05-10 15:55   -------
<span class="quote">&gt;&gt; We continue to need Widget.getBounds(). </span >

I.e. getBounds() for each child of Widget.

<span class="quote">&gt;&gt; Everything that holds that back requires workarounds.</span >

Steve Northover 2005-05-10 16:11 -------
<span class="quote">&gt; You can get the information you need already for the TableItem on
&gt; all platforms so I'm not sure what you are working around in this
&gt; particular case.</span >

The non-public-ness of TableItem.getBounds(). As previously mentioned.
I'm not sure what isn't clear here.

We need getBounds() to find things. We have Component.getBounds(), we
need Widget.getBounds(). Forgive the repetition, but &quot;Everything that
holds [Widget.getBounds()] back requires workarounds.&quot; (E.g. Abbot
works around AWT MenuComponent's, but fortunately JMenuItem has mostly
superceded that, and JMenuItem isa Component.)

What we can find, we can automate--knock wood, but it's been true so
far, threading be damned. Automation is good. Automation allows your
users to create more/better tests--which means we develop better UIs
faster--and automation allows your users to drive their code for
demos, TVT, etc. Code-centric automation is better: it enhances
developer-time testing and supports TDD. Multi-platform code-centric
automation is better yet.

Automation requires coordinate finding. Swing supports automation via
a single API, Component.getBounds(), the sufficiency of which is
evinced by the number of code-centric tools that build on that simple
foundation, the functionality those tools provide, the number of their
users, and the goodness of the UIs their users develop. That's good.
That's important.

If you can give SWT automation a similar foundation,
Eclipse+JUnit+Abbot can deliver similar goodness a lot more/faster.
Otherwise we hafta workaround you.
</pre>
    </div>

    <div id="c94" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c94">Comment 94</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Philippe Ombredanne</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=pombredanne&#64;nexb.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=pombredanne&#64;nexb.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-10 20:03:51 EDT
        </span>

      </div>




<pre class="bz_comment_text">I do second Tom on that one.
<span class="quote">&gt; &quot;Everything that holds [Widget.getBounds()] back requires workarounds.&quot;</span >
I am faced with the exact same issues for the plug-in I am working on.
Shall I continue to leave in the underworld of patched SWT?
And I am dying to use abbot for my tests.

Steve, in <a href="show_bug.cgi?id=38436#c79">comment #79</a> you replied to me:
<span class="quote">&gt; API's can change after M6 but it's way harder to make it 
&gt; happen ... and that's a good thing at this stage in the game.</span >
I guess that this bugzilla has enough votes and followers to carry some weight
and do some thing about it.
You can make API change happen, you said it. 
I feel kind of let down here.

Now, over 42 unique individuals, including 23 positives votes, the rest as CC
are following this bug! I wish all bugs were so popular!

Just some of the folks and companies which are represented in the CC on this
bug, based on the voters and CCed emails:
(excluding all the IBM folks in the US, Canada, and Switzerland ;-) )

*Eclipse board and strategic members: 
SAP
Intel

*Add-in provider members like:
Agitar
Instantiations

*Companies like:
Apple
RIM (the blackberry guys)
Orbeon
Worldpac
Trigeo

*Open source projects: empproject, abbot, orbeon, oxf studio, vence,
easyeclipse, eclipse-ccase, harbour-ide

*Eclipse advocates and bloggers like Luis de la Rosa, and Gunnar Wagenknecht

*Plus at least two academic institutions....

I think it is enough justification to give a push and make it so that it goes
into 3.1 !</pre>
    </div>

    <div id="c95" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c95">Comment 95</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-11 08:03:44 EDT
        </span>

      </div>




<pre class="bz_comment_text">The original discussion was about TableItem.getBounds(), which you do not need 
today in order to make Abbot work.  I agree that you need the general 
capability to get widget coordinates.  You are free to contribute the code 
that does this at any time.

In the case of MenuItem.getBounds() and Menu.getBounds(), we are stuck on 
Apple and have been for a while.  There is nothing I can do about this.  So, 
the right thing for you to do in the short term is to include platform 
specific code in Abbot and not to support Abbot on the Mac.  This is sad, but 
it is the right software engineering thing to do.

Please stop ranting at me.  I am doing all I can and it doesn't help.</pre>
    </div>

    <div id="c96" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c96">Comment 96</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-11 08:11:04 EDT
        </span>

      </div>




<pre class="bz_comment_text">Philippe, the bug is important and we are doing all we can.  The implications 
of adding an API like Widget.getBounds() (or solving this problem in another 
way) are big.  We cannot propose API that is no-portable.  We realize this bug 
is important and have been trying to get to it for a while.</pre>
    </div>

    <div id="c97" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c97">Comment 97</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Philippe Ombredanne</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=pombredanne&#64;nexb.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=pombredanne&#64;nexb.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-11 13:11:18 EDT
        </span>

      </div>




<pre class="bz_comment_text">Steve,

First I would like you to kindly accept my public apologies if I came out hard
and harsh.

This may be my French way of loving heated arguments and debates resurfacing now
and then ;-) I want you to be my best buddy, and I have serious respect for the
work you guys are doing.Being the API guardians of the essential SWT must be a
tough job, with trolls like me ruining your day!

In all fairness, if some irresponsible person had given me your job, SWT would
have been a half-baked, ugly, buggy, non-portable piece of crap, instead of the
elegant work it is today and Eclipse would be dying from my incompetence :-) 

Be assured that if I need to vent my SWT frustration in the future, I will do it
1-on-1 first.

Now, right after posting that unruly comment yesterday, I was hanging &#64; #eclipse
and chatted with Billy B. who gave me some valuable insights.

Also I did not really understand until now that the menu problem on Mac is real
hard, and may not be solvable in a portable way because the way carbon handles
menu bars.

As far as I am concerned, I need the menu and menu items coordinates
(MenuItem.getBounds() and Menu.getBounds() ), but I can live without
portability, and Billy told me there could be a way to do it in my plug-in,
probably without having to resort to SWT patching, or weird aspects, reflection
or byte code hacks, as long as portability was not the major concern. And for me
it is not.

I care about making my own little plugin run nicely on top of a vanilla Eclipse
build, with decent support for at least Windows, Mac and Linux/GTK. And if some
features are NOT available on Mac, then so be it. I can live with that, and I
can inform my users properly about the capabilities of that plugin on each
platforms, both in the documentation and at run-time.
I also care about SWT staying homogenous, elegant and portable on all Eclipse's
platforms, and do not want to be an architect of its demise.

If there is a way to get some code examples for Win and GTK posted somewhere to
get me started, that would be great. 
And as far as I am concerned, that would close that bug!

Cordially</pre>
    </div>

    <div id="c98" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c98">Comment 98</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-11 16:15:26 EDT
        </span>

      </div>




<pre class="bz_comment_text">Ok, thanks Philippe, I wouldn't go quite that far.

If you are looking for the code that does Menu.getBounds() and 
MenuItem.getBounds(), it is also released as /*public*/ but doesn't work on 
the Mac.  NOTE:  Since many operating systems don't compute the menu bounds 
until the menu is about to be shown, the bounds are zero when the menu is not 
displayed.  Also, this the coordinate systems are consistent but might not be 
the same when the code is finally released (sometime in the year 3000).  It 
should be easy enough to do the same thing that Tom is doing (ie. copy the 
code to a platform specific utility class) and call it.  Maybe Tom could 
provide his utility class as a patch in this bug report?

Also, BB should be commenting in the bug report rather than chatting privately!</pre>
    </div>

    <div id="c99" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c99">Comment 99</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Philippe Ombredanne</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=pombredanne&#64;nexb.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=pombredanne&#64;nexb.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-11 16:31:15 EDT
        </span>

      </div>




<pre class="bz_comment_text">Steve,
since Menu.getBounds() and  MenuItem.getBounds() are /*public*/, I can work
around that with reflection, as long I am not under the control of a restrictive
security manager. A bit awkward, but the hack will do the trick for me, together
with some platform specific conditions for macs or platforms where it returns
odd or (0,0,0,0) values

<span class="quote">&gt;NOTE:  Since many operating systems don't compute the menu bounds 
&gt;until the menu is about to be shown, the bounds are zero when the menu is not </span >
displayed.  
In my case that would not be a problem. I really only need to compute the menu
bounds just right after they have been displayed, not before.

<span class="quote">&gt;It should be easy enough to do the same thing that Tom is doing 
&gt; (ie. copy the code to a platform specific utility class) and call it.  </span >
Does not this require a patched SWT and therefore a modified core eclispe?
I am trying to avoid that. 

Tom your patch would be welcomed or is it already in abbot? If so, I will do a
diff again between SWT and your latest patched SWT, last I made is a few months old.
</pre>
    </div>

    <div id="c100" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c100">Comment 100</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Philippe Ombredanne</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=pombredanne&#64;nexb.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=pombredanne&#64;nexb.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-11 16:50:49 EDT
        </span>

      </div>




<pre class="bz_comment_text">Just adding a quick note for everybody's understanding is that all Billy told me
about this bug in our chat was it was down to the Mac menu issues. ;-)</pre>
    </div>

    <div id="c101" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c101">Comment 101</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-12 13:46:19 EDT
        </span>

      </div>




<pre class="bz_comment_text">Steve Northover  2005-05-11 08:03  [reply] -------
<span class="quote">&gt;&gt;&gt; Please stop ranting at me. I am doing all I can and it doesn't
&gt;&gt;&gt; help.</span >

Not ranting, just explaining, since the rationale for getBounds() (vs
getBounds(...), yourAPIhere(...), etc) doesn't seem to take.

Steve Northover  2005-05-11 16:15  [reply] -------
<span class="quote">&gt;&gt; If you are looking for the code that does Menu.getBounds() and
&gt;&gt; MenuItem.getBounds(), it is also released as /*public*/ but doesn't
&gt;&gt; work on the Mac.</span >

The code in org.eclipse.swt.widgets.MenuItem.getBounds() in 3.1-M6
also works incorrectly on win32 when used to exercise a workbench:
will post separately regarding that.

<span class="quote">&gt;&gt; NOTE: Since many operating systems don't compute the menu bounds
&gt;&gt; until the menu is about to be shown, the bounds are zero when the
&gt;&gt; menu is not displayed. Also, this the coordinate systems are
&gt;&gt; consistent but might not be the same when the code is finally
&gt;&gt; released (sometime in the year 3000).</span >

<span class="quote">&gt;&gt; It should be easy enough to do the same thing that Tom is doing
&gt;&gt; (ie. copy the code to a platform specific utility class) and call
&gt;&gt; it. Maybe Tom could provide his utility class as a patch in this
&gt;&gt; bug report?</span >

Philippe Ombredanne 2005-05-11 16:31 [reply] -------
<span class="quote">&gt; Steve, since Menu.getBounds() and MenuItem.getBounds() are
&gt; /*public*/, I can work around that with reflection, as long I am not
&gt; under the control of a restrictive security manager. A bit awkward,
&gt; but the hack will do the trick for me, together with some platform
&gt; specific conditions for macs or platforms where it returns odd or
&gt; (0,0,0,0) values</span >

<span class="quote">&gt;&gt; NOTE: Since many operating systems don't compute the menu bounds
&gt;&gt; until the menu is about to be shown, the bounds are zero when the
&gt;&gt; menu is not displayed.</span >

<span class="quote">&gt; In my case that would not be a problem. I really only need to
&gt; compute the menu bounds just right after they have been displayed,
&gt; not before.</span >

<span class="quote">&gt;&gt; It should be easy enough to do the same thing that Tom is doing
&gt;&gt; (ie. copy the code to a platform specific utility class) and call
&gt;&gt; it.</span >

<span class="quote">&gt; Does not this require a patched SWT and therefore a modified core
&gt; eclispe? </span >

No longer.

<span class="quote">&gt; Tom your patch would be welcomed or is it already in abbot? </span >

It is: the patches are in

abbot.swt.SWTWorkarounds
<a href="http://cvs.sourceforge.net/viewcvs.py/*checkout*/abbot/abbot.swt/src/abbot/swt/SWTWorkarounds.java?rev=HEAD">http://cvs.sourceforge.net/viewcvs.py/*checkout*/abbot/abbot.swt/src/abbot/swt/SWTWorkarounds.java?rev=HEAD</a>

but they are transparent to the user: just use your Matcher's,
Finder's, and Tester's and they will call the correct code for
location.

<span class="quote">&gt; If so, I will do a diff again between SWT and your latest patched
&gt; SWT, last I made is a few months old.</span >

Quit patching !-) See

<a href="http://sourceforge.net/mailarchive/message.php?msg_id=11730297">http://sourceforge.net/mailarchive/message.php?msg_id=11730297</a></pre>
    </div>

    <div id="c102" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c102">Comment 102</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-12 18:07:48 EDT
        </span>

      </div>




<pre class="bz_comment_text">Steve Northover  2005-05-11 16:15
<span class="quote">&gt;&gt; If you are looking for the code that does Menu.getBounds() and
&gt;&gt; MenuItem.getBounds(), it is also released as /*public*/ but doesn't
&gt;&gt; work on the Mac.</span >

Tom Roche  2005-05-12 13:46
<span class="quote">&gt; The code in org.eclipse.swt.widgets.MenuItem.getBounds() in 3.1-M6
&gt; also works incorrectly on win32 when used to exercise a workbench:
&gt; will post separately regarding that.</span >

When exercising a workbench, the code in 3.1-M6/
org.eclipse.swt.widgets.MenuItem.getBounds(), massaged slightly to run
from our different package, clicks below the menubar, activating the
toolbar button immediately below the targeted menu item. I suspect it
returns a y value that is too large. This behavior was originally
reported by other members of the abbot-users list.

How to reproduce (in a 3.1-M6 workbench, untested with other versions,
on win32, untested with other WSs):

0 Create a clean devspace folder, and start a workbench pointing to it.

1 Checkout/install/build the abbot, abbot.swt, and abbot.swt.eclipse
  modules from SourceForge CVS as described in

<a href="http://cvs.sourceforge.net/viewcvs.py/*checkout*/abbot/abbot.swt/doc/swt/building.html#sourceAbbot">http://cvs.sourceforge.net/viewcvs.py/*checkout*/abbot/abbot.swt/doc/swt/building.html#sourceAbbot</a>

  Note that the abbot.swt.* modules are both eclipse plugins &quot;out of
  the box,&quot; and so build &quot;normally&quot; in eclipse (e.g. with C-b), but
  that the abbot module is not--it's IDE-agnostic and requires an ant
  build (target=eclipse.setup) to attain plugin-hood in your workspace.
 (Hence turning off autobuild is advised before you start checkout.)

2 Create a JUnit Plugin Test with test class=
  abbot.swt.eclipse.tests.MenuItemGetBoundsTest running in a blank
  runspace (check Clear workspace data before launching) using the
  workbench's JRE (Runtime JRE=eclipse). Run it:

  A Java project will be created (headlessly), then 2 tests will run
  (it's {pretty fast, hard to see} but you can see the mouse move):
  the first clicks Run&gt;ExternalTools&gt;ExternalTools to launch that
  wizard, and the second clicks File&gt;New&gt;Other to launch the New
  wizard. (The JUnit view will green bar, but will report 4/4 due to
  inheritance.) Remove the terminated session in the Console view
  (call me anal, but pde.junit has some bugs/quirks that I try to
  accomodate ... or I may just be superstitious).

3 Open abbot.swt.SWTWorkarounds in an editor and browse to getBounds
  (MenuItem menuItem). Note that it currently contains

+   public static Rectangle getBounds (MenuItem menuItem) {
+ // start code from 3.1-M6 org.eclipse.swt.widgets.MenuItem.getBounds()    
+ //  checkWidget ();
+ // not visible, but menuItem.getParent() will call it
+ //  Menu parent = menuItem.getParent();
+ //  if (OS.IsWinCE) return new Rectangle (0, 0, 0, 0);
+ //  int index = parent.indexOf (menuItem);
+ //  if (index == -1) return new Rectangle (0, 0, 0, 0);
+ //  if ((parent.getStyle() &amp; SWT.BAR) != 0) {
+ //    Decorations shell = parent.getParent();
+ //    if (shell.getMenuBar() != parent) {
+ //      return new Rectangle (0, 0, 0, 0);
+ //    }
+ //    int hwndShell = shell.handle;
+ //    MENUBARINFO info1 = new MENUBARINFO ();
+ //    info1.cbSize = MENUBARINFO.sizeof;
+ //    if (!OS.GetMenuBarInfo (hwndShell, OS.OBJID_MENU, 1, info1)) {
+ //      return new Rectangle (0, 0, 0, 0);
+ //    }
+ //    MENUBARINFO info2 = new MENUBARINFO ();
+ //    info2.cbSize = MENUBARINFO.sizeof;
+ //    if (!OS.GetMenuBarInfo (hwndShell, OS.OBJID_MENU, index + 1, info2)) {
+ //      return new Rectangle (0, 0, 0, 0);
+ //    }
+ //    int x = info2.left - info1.left;
+ //    int y = info2.top - info1.top;
+ //    int width = info1.right - info1.left;
+ //    int height = info1.bottom - info1.top;
+ //    return new Rectangle (x, y, width, height);
+ //  } else {
+ //    int hMenu = parent.handle;
+ //    RECT rect1 = new RECT ();
+ //    if (!OS.GetMenuItemRect (0, hMenu, 0, rect1)) {
+ //      return new Rectangle (0, 0, 0, 0);
+ //    }
+ //    RECT rect2 = new RECT ();
+ //    if (!OS.GetMenuItemRect (0, hMenu, index, rect2)) {
+ //      return new Rectangle (0, 0, 0, 0);
+ //    }
+ //    int x = rect2.left - rect1.left + 2;
+ //    int y = rect2.top - rect1.top + 2;
+ //    int width = rect2.right - rect2.left;
+ //    int height = rect2.bottom - rect2.top;
+ //    return new Rectangle (x, y, width, height);
+ //  }
+ // end code from 3.1-M6 org.eclipse.swt.widgets.MenuItem.getBounds()
+ // start code adapted from o.e.swt.patched.MenuItem.getBounds()
+     Menu parent = menuItem.getParent();
+     Decorations parentControl = parent.getParent();
+     if (OS.IsWinCE) return new Rectangle (0, 0, 0, 0);
+     int index = parent.indexOf (menuItem);
+     if (index == -1) return new Rectangle (0, 0, 0, 0);
+     RECT rect = new RECT();
+     boolean success =
OS.GetMenuItemRect(((parent.getStyle()&amp;SWT.BAR)==SWT.BAR)?parentControl.handle:0,
+               parent.handle,
+               index,
+               rect);
+     if (!success) {
+       /* the OS API call couldn't get the MenuItem bounds, so return an empty
rectangle */
+       return new Rectangle(0, 0, 0, 0);   
+     }
+     if ((parentControl.getStyle() &amp; SWT.MIRRORED) == 0) {
+       /* coordinates are not mirrored */
+       Point p = parentControl.toControl(rect.left,rect.top);
+       int width = rect.right - rect.left;
+       int height = rect.bottom - rect.top;
+       return new Rectangle(p.x,p.y,width,height);   
+     } else {
+       /* coordinates are mirrored */
+       /* TODO: this has not been tested */
+       Point p = parentControl.toControl(rect.left,rect.top);
+       int width = rect.left - rect.right;
+       int height = rect.bottom - rect.top;
+       return new Rectangle(p.x,p.y,width,height);       
+     }
+ // end code adapted from o.e.swt.patched.MenuItem.getBounds()
+   }

  The first section is minimally adapted from 3.1-M6/
  org.eclipse.swt.widgets.MenuItem.getBounds(), the latter is from
  Abbot's patches. Note that the latter section is what you just ran
  successfully. Comment out that latter section, and uncomment the
  first section, to produce

-   public static Rectangle getBounds (MenuItem menuItem) {
- // start code from 3.1-M6 org.eclipse.swt.widgets.MenuItem.getBounds()    
- //  checkWidget ();
- // not visible, but menuItem.getParent() will call it
-   Menu parent = menuItem.getParent();
-   if (OS.IsWinCE) return new Rectangle (0, 0, 0, 0);
-   int index = parent.indexOf (menuItem);
-   if (index == -1) return new Rectangle (0, 0, 0, 0);
-   if ((parent.getStyle() &amp; SWT.BAR) != 0) {
-     Decorations shell = parent.getParent();
-     if (shell.getMenuBar() != parent) {
-       return new Rectangle (0, 0, 0, 0);
-     }
-     int hwndShell = shell.handle;
-     MENUBARINFO info1 = new MENUBARINFO ();
-     info1.cbSize = MENUBARINFO.sizeof;
-     if (!OS.GetMenuBarInfo (hwndShell, OS.OBJID_MENU, 1, info1)) {
-       return new Rectangle (0, 0, 0, 0);
-     }
-     MENUBARINFO info2 = new MENUBARINFO ();
-     info2.cbSize = MENUBARINFO.sizeof;
-     if (!OS.GetMenuBarInfo (hwndShell, OS.OBJID_MENU, index + 1, info2)) {
-       return new Rectangle (0, 0, 0, 0);
-     }
-     int x = info2.left - info1.left;
-     int y = info2.top - info1.top;
-     int width = info1.right - info1.left;
-     int height = info1.bottom - info1.top;
-     return new Rectangle (x, y, width, height);
-   } else {
-     int hMenu = parent.handle;
-     RECT rect1 = new RECT ();
-     if (!OS.GetMenuItemRect (0, hMenu, 0, rect1)) {
-       return new Rectangle (0, 0, 0, 0);
-     }
-     RECT rect2 = new RECT ();
-     if (!OS.GetMenuItemRect (0, hMenu, index, rect2)) {
-       return new Rectangle (0, 0, 0, 0);
-     }
-     int x = rect2.left - rect1.left + 2;
-     int y = rect2.top - rect1.top + 2;
-     int width = rect2.right - rect2.left;
-     int height = rect2.bottom - rect2.top;
-     return new Rectangle (x, y, width, height);
-   }
- // end code from 3.1-M6 org.eclipse.swt.widgets.MenuItem.getBounds()
- // start code adapted from o.e.swt.patched.MenuItem.getBounds()
- //    Menu parent = menuItem.getParent();
- //    Decorations parentControl = parent.getParent();
- //    if (OS.IsWinCE) return new Rectangle (0, 0, 0, 0);
- //    int index = parent.indexOf (menuItem);
- //    if (index == -1) return new Rectangle (0, 0, 0, 0);
- //    RECT rect = new RECT();
- //    boolean success =
OS.GetMenuItemRect(((parent.getStyle()&amp;SWT.BAR)==SWT.BAR)?parentControl.handle:0,
- //              parent.handle,
- //              index,
- //              rect);
- //    if (!success) {
- //      /* the OS API call couldn't get the MenuItem bounds, so return an
empty rectangle */
- //      return new Rectangle(0, 0, 0, 0);   
- //    }
- //    if ((parentControl.getStyle() &amp; SWT.MIRRORED) == 0) {
- //      /* coordinates are not mirrored */
- //      Point p = parentControl.toControl(rect.left,rect.top);
- //      int width = rect.right - rect.left;
- //      int height = rect.bottom - rect.top;
- //      return new Rectangle(p.x,p.y,width,height);   
- //    } else {
- //      /* coordinates are mirrored */
- //      /* TODO: this has not been tested */
- //      Point p = parentControl.toControl(rect.left,rect.top);
- //      int width = rect.left - rect.right;
- //      int height = rect.bottom - rect.top;
- //      return new Rectangle(p.x,p.y,width,height);       
- //    }
- // end code adapted from o.e.swt.patched.MenuItem.getBounds()
-   }

  Save and build.

4 Rerun abbot.swt.eclipse.tests.MenuItemGetBoundsTest (e.g. with
  C-F11). Note that, instead of clicking the menu, the mouse clicks
  the Search button on the toolbar, and the Search wizard launches
  instead of External Tools. (Note that the button and mouse are
  positioned just below the Run item in the menu bar, hence my
  hypothesis.) This hoses that and subsequent tests with

abbot.WaitTimedOutError: Timed out waiting for External Tools to show
  at abbot.tester.swt.Robot.wait(Robot.java:1454)
  at abbot.tester.swt.Robot.wait(Robot.java:1442)
  at abbot.tester.swt.WidgetTester.waitForShellShowing(WidgetTester.java:897)
  at
abbot.swt.eclipse.tests.MenuItemGetBoundsTest$1.run(MenuItemGetBoundsTest.java:82)

  in the Console.

5 If desired, whack the session, undo the changes to SWTWorkarounds,
  save, C-b, C-F11: the tests again run successfully to completion by
  correctly clicking the menu items.

All: please let me know if you are able to reproduce or not,
especially if the directions are unclear.
</pre>
    </div>

    <div id="c103" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c103">Comment 103</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-12 18:34:32 EDT
        </span>

      </div>




<pre class="bz_comment_text">The part that is unclear is whether you know what the bug is already and have 
a fix.  If this is the case, can you please post the patch?  Thanks.</pre>
    </div>

    <div id="c104" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c104">Comment 104</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-12 19:45:07 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=21077&amp;action=diff" name="attach_21077" title="adaption of code that fixes bad menu-picking as demonstrated in https://bugs.eclipse.org/bugs/show_bug.cgi?id=38436#c102">attachment 21077</a> <a href="attachment.cgi?id=21077&amp;action=edit" title="adaption of code that fixes bad menu-picking as demonstrated in https://bugs.eclipse.org/bugs/show_bug.cgi?id=38436#c102">[details]</a></span>
adaption of code that fixes bad menu-picking as demonstrated in <a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Locating Widgets in display coordinates for automated whitebox testing"
   href="show_bug.cgi?id=38436#c102">https://bugs.eclipse.org/bugs/show_bug.cgi?id=38436#c102</a>

See

<a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Locating Widgets in display coordinates for automated whitebox testing"
   href="show_bug.cgi?id=38436#c102">https://bugs.eclipse.org/bugs/show_bug.cgi?id=38436#c102</a>

<a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Locating Widgets in display coordinates for automated whitebox testing"
   href="show_bug.cgi?id=38436#c104">https://bugs.eclipse.org/bugs/show_bug.cgi?id=38436#c104</a></pre>
    </div>

    <div id="c105" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c105">Comment 105</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-12 19:47:52 EDT
        </span>

      </div>




<pre class="bz_comment_text">Steve Northover  2005-05-12 18:34
<span class="quote">&gt; The part that is unclear is whether you know what the bug is already</span >

Umm ... it seems pretty clear that the bug is in the code adapted from 
3.1-M6 org.eclipse.swt.widgets.MenuItem.getBounds(), since the test
fails when using that code, no?

<span class="quote">&gt; and have a fix. If this is the case, can you please post the patch?</span >

<a href="https://bugs.eclipse.org/bugs/attachment.cgi?id=21077">https://bugs.eclipse.org/bugs/attachment.cgi?id=21077</a>

but note that I can't verify the patched code directly ... because I
hafta workaround the non-public-ness of MenuItem.getBounds().
</pre>
    </div>

    <div id="c106" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c106">Comment 106</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-13 08:50:26 EDT
        </span>

      </div>




<pre class="bz_comment_text">Tom, the more you help me, the more I can help you.  A single sentence 
like &quot;The problem is that the coordinates are wrong because ... or mirroring 
is not taken into account ...&quot; would be most appreciated (unless you really 
have no idea what is wrong, in which case saying so helps too, but you have a 
patch so that implies you do know what's going on).  It's just easier not to 
have to guess from the code but I can do that if you want.  It'll just take 
longer.

Also, a small stand alone test case that uses the API is really helpful rather 
than downloading and installing Abbot.  If you don't have the code, then 
that's fine too.

Billy, can you verify that the patch doesn't compile?</pre>
    </div>

    <div id="c107" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c107">Comment 107</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-13 11:04:39 EDT
        </span>

      </div>




<pre class="bz_comment_text">Tom Roche  2005-05-12 18:07
<span class="quote">&gt;&gt;&gt; When exercising a workbench, the code in 3.1-M6/
&gt;&gt;&gt; org.eclipse.swt.widgets.MenuItem.getBounds(), massaged slightly to
&gt;&gt;&gt; run from our different package, clicks below the menubar,
&gt;&gt;&gt; activating the toolbar button immediately below the targeted menu
&gt;&gt;&gt; item. I suspect it returns a y value that is too large. </span >

<a href="mailto:steve_northover&#64;ca.ibm.com">steve_northover&#64;ca.ibm.com</a>  2005-05-13 08:50
<span class="quote">&gt;&gt; A single sentence like &quot;The problem is that the coordinates are
&gt;&gt; wrong because ... or mirroring is not taken into account ...&quot; would
&gt;&gt; be most appreciated</span >

Steve: what part of &quot;returns a y value that is too large&quot; is unclear?

<span class="quote">&gt;&gt; (unless you really have no idea what is wrong, in which case saying
&gt;&gt; so helps too, but you have a patch so that implies you do know
&gt;&gt; what's going on). </span >

(The more helpful you claim to be, the more your language betrays you.)
Not only have I an &quot;idea what is wrong,&quot; I have given you a test case
that clearly displays it! I even walk you through reproduction of the
test case's behavior:

<span class="quote">&gt;&gt;&gt; 2 Create a JUnit Plugin Test with test class=
&gt;&gt;&gt;   abbot.swt.eclipse.tests.MenuItemGetBoundsTest[....] 2 tests will
&gt;&gt;&gt;   run (it's {pretty fast, hard to see} but you can see the mouse
&gt;&gt;&gt;   move): the first clicks Run&gt;ExternalTools&gt;ExternalTools to
&gt;&gt;&gt;   launch that wizard, and the second clicks File&gt;New&gt;Other to
&gt;&gt;&gt;   launch the New wizard.</span >

&lt;snip&gt;

<span class="quote">&gt;&gt;&gt; 3 Open abbot.swt.SWTWorkarounds in an editor and browse to
&gt;&gt;&gt; getBounds (MenuItem menuItem)[....] Comment out that latter
&gt;&gt;&gt; section, and uncomment the first section</span >

&lt;snip&gt;

<span class="quote">&gt;&gt;&gt; 4 Rerun abbot.swt.eclipse.tests.MenuItemGetBoundsTest (e.g. with
&gt;&gt;&gt;   C-F11). Note that, instead of clicking the menu, the mouse clicks
&gt;&gt;&gt;   the Search button on the toolbar, and the Search wizard launches
&gt;&gt;&gt;   instead of External Tools. </span >

<span class="quote">&gt;&gt; It's just easier not to have to guess from the code but I can do
&gt;&gt; that if you want. It'll just take longer.</span >

You know I don't want that, Steve: that's why I show you how to actually
reproduce the problem. Why &quot;guess from the code&quot; when you can *observe*
the behavior?

<span class="quote">&gt;&gt; Also, a small stand alone test case that uses the API is really
&gt;&gt; helpful rather than downloading and installing Abbot.</span >

Keep in mind here that the code in question (MenuItem.getBounds()) is
required for automation. In order to empirically assess the
correctness of the code, you're gonna hafta have some automation
framework. I note

<a href="http://dev.eclipse.org/viewcvs/index.cgi/%7Echeckout%7E/platform-swt-home/test_plan.html">http://dev.eclipse.org/viewcvs/index.cgi/%7Echeckout%7E/platform-swt-home/test_plan.html</a>
<span class="quote">&gt; 1. Ensure all public API is exercised through a JUnit test</span >

<span class="quote">&gt; - we have an automated tool to do this but we have not made it
&gt;   publicly accessible yet</span >

but it seems to have been that way for a while :-) Unfortunately
automation seems to require a fair amount of infrastructure.
Fortunately, in this case the infrastructure amounts to all of 3
plugins. Is that so onerous? (Perhaps your non-public automation tool
is more svelte? We'd love to see it !-) You can get/install it, and
reproduce the problem, in all of 15 minutes (on LAN). If you'd like, I
can build binary plugin zips for abbot and abbot.swt for you:
unfortunately pde.junit currently can't run tests outside the
workbench, so you'd still hafta get that as source.

Note that I'm putting my automation framework out there for you and
everyone to use, and to reproduce this problem, because ya gotta test,
Steve, not just eyeball the code. We even expose our tests as JUnit
testcases that are easily run via Eclipse's builtin tooling! (Never
let it be said that I don't try to help you help me :-)

So until you put *your* automation tool out there for folks to use, I
don't see a feasible alternative to the following for testing this
bug:

0 Reproduce the problem as detailed in

<a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Locating Widgets in display coordinates for automated whitebox testing"
   href="show_bug.cgi?id=38436#c102">https://bugs.eclipse.org/bugs/show_bug.cgi?id=38436#c102</a>

1 Twiddle the code in abbot.swt.SWTWorkarounds.getBounds(MenuItem) as
  desired, then test using abbot.swt.eclipse.tests.MenuItemGetBoundsTest

2 Repeat step 1 until you get the code the way you want it, and it
  passes the test. For extra credit, run
  abbot.swt.examples.CelsiusConverterFindingTest and
  abbot.swt.examples.CelsiusConverterTest as JUnit tests (i.e.
  Run&gt;Run&gt;JUnit, not Run&gt;Run&gt;JUnit Plugin Test)--they also pass with
  the HEAD of abbot.swt.SWTWorkarounds.getBounds(MenuItem).

3 Copy/mod your code from abbot.swt.SWTWorkarounds.getBounds(MenuItem)
  back into org.eclipse.swt.widgets.MenuItem.getBounds(). (Then, make
  it public !-)</pre>
    </div>

    <div id="c108" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c108">Comment 108</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Randy Hudson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=hudsonr&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=hudsonr&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-13 11:34:39 EDT
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; Keep in mind here that the code in question (MenuItem.getBounds()) is
&gt; required for automation. In order to empirically assess the
&gt; correctness of the code, you're gonna hafta have some automation
&gt; framework. I note
&gt; <a href="http://dev.eclipse.org/viewcvs/index.cgi/%7Echeckout%7E/platform-swt">http://dev.eclipse.org/viewcvs/index.cgi/%7Echeckout%7E/platform-swt</a>-</span >
home/test_plan.html
<span class="quote">&gt; &gt; 1. Ensure all public API is exercised through a JUnit test
&gt; &gt; - we have an automated tool to do this but we have not made it
&gt; &gt;   publicly accessible yet
&gt; but it seems to have been that way for a while :-) Unfortunately
&gt; automation seems to require a fair amount of infrastructure.
&gt; Fortunately, in this case the infrastructure amounts to all of 3
&gt; plugins.</span >

You won't know if a snippet will reproduce the problem until you've actually 
tried it. I don't see why querying menu location would require some sort of 
complex setup or series of events to reproduce the problem. Just create a 
Shell, slap a menubar on it, call the package protected API, and place a 
tracker over that rectangle highlighting the bogus bounds. Not only is this 
easier for Steve, but it removes the however small chance that Abbot is doing 
something wrong.</pre>
    </div>

    <div id="c109" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c109">Comment 109</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-13 12:15:02 EDT
        </span>

      </div>




<pre class="bz_comment_text">Please Tom, just stop.  I'm not trying to imply anything or do anything other 
that find out what is wrong and fix it.</pre>
    </div>

    <div id="c110" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c110">Comment 110</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-13 12:51:18 EDT
        </span>

      </div>




<pre class="bz_comment_text">Randy: if you can, please contribute a snippet that launches a
workbench and tests MenuItem.getBounds() against it. If you can't,
please *try* to reproduce the bug as described, and ask where the
descriptions are unclear. I suspect you'll find that installing the
code and running the tests is not so nearly so onerous as you suspect
(and probably a helluva lot less onerous than writing the snippet :-)

Randy Hudson  2005-05-13 11:34
<span class="quote">&gt; You won't know if a snippet will reproduce the problem until you've
&gt; actually tried it.</span >

True, but I suspect you're overlooking 2 problems:

0 Testcases show the problem occurring with SUT=workbench, not SUT=a
  standalone app (more below)

1 I don't know how to do a snippet that would

(adapted for what actually needs done)
<span class="quote">&gt; Just [launch a workbench, find one of its MenuItem's], and place a
&gt; tracker over that rectangle highlighting the bogus bounds.</span >

First, please note:

Tom Roche  2005-05-12 18:07
<span class="quote">&gt;&gt;&gt; When exercising a workbench, </span >

That's the important part: exercising a workbench.

<span class="quote">&gt;&gt;&gt; the code in 3.1-M6/ org.eclipse.swt.widgets.MenuItem.getBounds(),
&gt;&gt;&gt; massaged slightly to run from our different package, clicks below
&gt;&gt;&gt; the menubar, activating the toolbar button immediately below the
&gt;&gt;&gt; targeted menu item. I suspect it returns a y value that is too
&gt;&gt;&gt; large.</span >

Second, note that Abbot also works against standalone SWT: in fact we
have an example standalone SWT app and publically-available tests that
run against it:

<span class="quote">&gt;&gt;   For extra credit, run
&gt;&gt;   abbot.swt.examples.CelsiusConverterFindingTest and
&gt;&gt;   abbot.swt.examples.CelsiusConverterTest as JUnit tests (i.e.
&gt;&gt;   Run&gt;Run&gt;JUnit, not Run&gt;Run&gt;JUnit Plugin Test)--they also pass
&gt;&gt;   with the HEAD of abbot.swt.SWTWorkarounds.getBounds(MenuItem).</span >

Third, I know, from running those Celsius*Test's, that both code
sections in abbot.swt.SWTWorkarounds.getBounds(MenuItem)

<span class="quote">&gt;&gt;&gt;   The first section is minimally adapted from 3.1-M6/
&gt;&gt;&gt;   org.eclipse.swt.widgets.MenuItem.getBounds(), the latter is from
&gt;&gt;&gt;   Abbot's patches. Note that the latter section is what you just
&gt;&gt;&gt;   ran successfully. Comment out that latter section, and uncomment
&gt;&gt;&gt;   the first section</span >

work in the standalone case. The difference is the workbench case as
described in

<a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Locating Widgets in display coordinates for automated whitebox testing"
   href="show_bug.cgi?id=38436#c102">https://bugs.eclipse.org/bugs/show_bug.cgi?id=38436#c102</a>

In that case, our code STILL works, but the code derived from
org.eclipse.swt.widgets.MenuItem.getBounds() fails.

Finally, please note that the *only* reason why abbot.swt resorts to
adapting org.eclipse.swt.widgets.MenuItem.getBounds() is because Steve
has made it non-public. Were it public, we could call it directly,
without resorting to abbot.swt.SWTWorkarounds.

So if you can do a snippet that launches a workbench, finds one of its
mainmenu items and highlights the bounds, please do, because you are
certainly correct that

<span class="quote">&gt; it [would remove] the however small chance that Abbot is doing
&gt; something wrong.</span >

I am certainly not claiming that Abbot or abbot.swt is without fault:
we're trying to get an RC1 out and our users are making very clear
where our faults and function gaps are :-) What I am doing is making
an SWT automation framework publically available (IIRC the *only*
publically available SWT automation framework, which is why so many
folks want this fixed), making testcases publically available,
publically demonstrating how to reproduce a problem--and even
publically demonstrating code that FIXES the problem! (Feel free to
demonstrate where *that* is at fault. Til then, honi soit qui mal y
pense.)
</pre>
    </div>

    <div id="c111" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c111">Comment 111</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Randy Hudson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=hudsonr&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=hudsonr&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-13 13:48:55 EDT
        </span>

      </div>




<pre class="bz_comment_text">SN, here's the snippet:

public static void main(String[] args) {
	Display display = new Display ();
	Shell shell = new Shell (display);
	Menu bar = new Menu (shell, SWT.BAR);
	shell.setMenuBar (bar);
	MenuItem fileItem = new MenuItem (bar, SWT.CASCADE);
	fileItem.setText (&quot;File&quot;);
	Menu submenu = new Menu (shell, SWT.DROP_DOWN);
	fileItem.setMenu (submenu);
	MenuItem item = new MenuItem (submenu, SWT.PUSH);
	item.setText (&quot;Select &amp;All\tCtrl+A&quot;);
	item.setAccelerator (SWT.CTRL + 'A');
	shell.setSize (200, 200);
	shell.open ();
	
	try {
		Method m = fileItem.getClass().getDeclaredMethods()[8];
		System.out.println(m.toString());
		m.setAccessible(true);
		Rectangle rect = (Rectangle)m.invoke(fileItem, null);
		Point where = new Point(rect.x, rect.y);
		where = shell.toDisplay(where);
		Shell highlight = new Shell(display, SWT.NO_TRIM | 
SWT.PRIMARY_MODAL);
		highlight.setBounds(where.x, where.y, rect.width, rect.height);
		highlight.setBackground(display.getSystemColor
(SWT.COLOR_INFO_BACKGROUND));
		highlight.open();
	} catch (Exception e) {
		e.printStackTrace();
	}
	
	while (!shell.isDisposed()) {
		if (!display.readAndDispatch ()) display.sleep ();
	}
	display.dispose ();
}


BTW, if setAccelerator is not called, an exception gets thrown.</pre>
    </div>

    <div id="c112" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c112">Comment 112</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-13 14:28:52 EDT
        </span>

      </div>




<pre class="bz_comment_text">The problem is that MenuItem.getBounds() returns the coordinates in terms of 
the parent, which is a Menu.  Menus are like Shells and use the coordinate 
system of the display, rather than their parent.  So some coordinate math is 
necessary which is a bit bad but the best I can do right now.

There was also a bug in MenuItem.getBounds() where the wrong width was 
returned on Windows.  That bug has been fixed and released.

Here is a better snippet:

import java.lang.reflect.*;

import org.eclipse.swt.*;
import org.eclipse.swt.graphics.*;
import org.eclipse.swt.widgets.*;

public class PR_38436 {
public static void main(String[] args) {
	Display display = new Display();
	Shell shell = new Shell(display);
	Menu bar = new Menu(shell, SWT.BAR);
	shell.setMenuBar(bar);
	MenuItem fileItem = new MenuItem(bar, SWT.CASCADE);
	fileItem.setText(&quot;File&quot;);
	Menu submenu = new Menu(shell, SWT.DROP_DOWN);
	fileItem.setMenu(submenu);
	MenuItem item = new MenuItem(submenu, SWT.PUSH);
	item.setText(&quot;Select &amp;All\tCtrl+A&quot;);
	item.setAccelerator(SWT.CTRL + 'A');
	shell.setSize(200, 200);
	shell.open();
	try {
		Method m1 = bar.getClass().getDeclaredMethod(&quot;getBounds&quot;, 
null);
		m1.setAccessible(true);
		Rectangle menuRect = (Rectangle) m1.invoke(bar, null);
		Method m2 = fileItem.getClass().getDeclaredMethod(&quot;getBounds&quot;, 
null);
		m2.setAccessible(true);
		Rectangle itemRect = (Rectangle) m2.invoke(fileItem, null);
		if ((bar.getStyle() &amp; SWT.RIGHT_TO_LEFT) != 0) {
			itemRect.x = menuRect.x + menuRect.width - 
itemRect.width - itemRect.x;
		} else {
			itemRect.x += menuRect.x;
		}
		itemRect.y += menuRect.y;
		Shell highlight = new Shell(display, SWT.NO_TRIM | 
SWT.PRIMARY_MODAL);
		highlight.setBounds(itemRect.x, itemRect.y, itemRect.width, 
itemRect.height);
		highlight.setBackground(display.getSystemColor
(SWT.COLOR_INFO_BACKGROUND));
		highlight.open();
	} catch (Exception e) {
		e.printStackTrace();
	}
	while (!shell.isDisposed()) {
		if (!display.readAndDispatch())
			display.sleep();
	}
	display.dispose();
}
}

</pre>
    </div>

    <div id="c113" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c113">Comment 113</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Veronika Irvine</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=veronika_irvine&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=veronika_irvine&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-16 17:55:16 EDT
        </span>

      </div>




<pre class="bz_comment_text">I have run MenuItemGetBoundsTest.  As SN described, the problem seems to be 
that Menu.getBounds() is returning its result in display coordinates and the 
code in WidgetLocator is translating these display relative coordinates using 
item.getParent().getParent().toDisplay(bounds.x,bounds.y); and this is not 
neccessary.  The following works for me on Windows:

In SWTWorkaround:

	public static Rectangle getBounds(MenuItem menuItem) {
//		 start code adapted from 
&lt;url&gt;<a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Locating Widgets in display coordinates for automated whitebox testing"
   href="show_bug.cgi?id=38436#c112">https://bugs.eclipse.org/bugs/show_bug.cgi?id=38436#c112</a>&lt;/url&gt;
		Menu parent = menuItem.getParent();
		Method m1 = null;
		try {
			m1 = parent.getClass().getDeclaredMethod(&quot;getBounds&quot;, 
null);
		} catch (SecurityException e) {
			// TODO_Tom Auto-generated catch block
			e.printStackTrace();
		} catch (NoSuchMethodException e) {
			// TODO_Tom Auto-generated catch block
			e.printStackTrace();
		}
		m1.setAccessible(true);
		Rectangle menuRect = null;
		try {
			menuRect = (Rectangle) m1.invoke(parent, null);
		} catch (IllegalArgumentException e) {
			// TODO_Tom Auto-generated catch block
			e.printStackTrace();
		} catch (IllegalAccessException e) {
			// TODO_Tom Auto-generated catch block
			e.printStackTrace();
		} catch (InvocationTargetException e) {
			// TODO_Tom Auto-generated catch block
			e.printStackTrace();
		}
		Method m2 = null;
		try {
			m2 = menuItem.getClass().getDeclaredMethod
(&quot;getBounds&quot;, null);
		} catch (SecurityException e) {
			// TODO_Tom Auto-generated catch block
			e.printStackTrace();
		} catch (NoSuchMethodException e) {
			// TODO_Tom Auto-generated catch block
			e.printStackTrace();
		}
		m2.setAccessible(true);
		Rectangle itemRect = null;
		try {
			itemRect = (Rectangle) m2.invoke(menuItem, null);
		} catch (IllegalArgumentException e) {
			// TODO_Tom Auto-generated catch block
			e.printStackTrace();
		} catch (IllegalAccessException e) {
			// TODO_Tom Auto-generated catch block
			e.printStackTrace();
		} catch (InvocationTargetException e) {
			// TODO_Tom Auto-generated catch block
			e.printStackTrace();
		}
		if ((parent.getStyle() &amp; SWT.RIGHT_TO_LEFT) != 0) {
			itemRect.x = menuRect.x + menuRect.width - 
itemRect.width - itemRect.x;
		} else {
			itemRect.x += menuRect.x;
		}
		itemRect.y += menuRect.y;
		return itemRect;
//		 end code adapted from 
&lt;url&gt;<a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Locating Widgets in display coordinates for automated whitebox testing"
   href="show_bug.cgi?id=38436#c112">https://bugs.eclipse.org/bugs/show_bug.cgi?id=38436#c112</a>&lt;/url&gt;	
	
	}


In WidgetLocator.getBounds(Widget, boolean):

if(w instanceof MenuItem){
	MenuItem item = (MenuItem)w;
	return SWTWorkarounds.getBounds(item);
}</pre>
    </div>

    <div id="c114" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c114">Comment 114</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-16 18:59:05 EDT
        </span>

      </div>




<pre class="bz_comment_text">Veronika Irvine 05/16/2005 04:58:02 PM:
<span class="quote">&gt;&gt; I have reproduced the problem and seen that the code from M6 and
&gt;&gt; from 38436#c112 both fail whereas &quot;code adapted from o.e.swt.
&gt;&gt; patched.MenuItem.getBounds()&quot; works. Will investigate with Steve.</span >

Veronika Irvine  2005-05-16 17:55
<span class="quote">&gt; I have run MenuItemGetBoundsTest. As SN described, the problem seems
&gt; to be that Menu.getBounds() is returning its result in display
&gt; coordinates and the code in WidgetLocator is translating these
&gt; display relative coordinates using
&gt; item.getParent().getParent().toDisplay(bounds.x,bounds.y); and this
&gt; is not neccessary.</span >

Doh! I still don't understand why the translation only failed in-
workbench and not standalone, but the tests now pass, which is what
counts. Thanks so much!</pre>
    </div>

    <div id="c115" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c115">Comment 115</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Veronika Irvine</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=veronika_irvine&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=veronika_irvine&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-17 08:23:16 EDT
        </span>

      </div>




<pre class="bz_comment_text">For future consideration, I think the problem would be simplified if Menu 
supported toControl() and toDisplay().  That way you would not have to do the 
following math:

if ((parent.getStyle() &amp; SWT.RIGHT_TO_LEFT) != 0) {
	itemRect.x = menuRect.x + menuRect.width - itemRect.width - itemRect.x;
} else {
	itemRect.x += menuRect.x;
}
itemRect.y += menuRect.y;

Instead, you would just get the bounds of the MenuItem (itemRect in the code 
above) and call menuItem.getParent().toDisplay(itemRect.x, itemRect.y).</pre>
    </div>

    <div id="c116" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c116">Comment 116</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-17 10:47:11 EDT
        </span>

      </div>




<pre class="bz_comment_text">Yes, but more importantly, Display.map() needs to take more than just 
controls.  Display.map() is the API that maps whole rectangles from RTL and 
LTR coordinate systems which is the right way to do coordinate transformations 
in a mirrored world.</pre>
    </div>

    <div id="c117" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c117">Comment 117</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">BK Lau</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=bklau&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=bklau&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-31 17:32:58 EDT
        </span>

      </div>




<pre class="bz_comment_text">org.eclipse.swt.custom.CTabFolder class do not expose any methods to get the
Rectangle bounds of :
          1) Chevron &gt;&gt;&gt; button
          2) Minimize/Maximize button
          3) Close button

In Eclipse 3.0 milestones releases, methods exists to get those bounds but they 
were removed. The implications for GUI Test Automation tool(IBM Rational 
Functional Tester) is that they CANNOT click on the chevron, min/max or close 
buttons and so cannot test complex cases where more views are stacked at a 
CTabFolder.</pre>
    </div>

    <div id="c118" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c118">Comment 118</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-23 19:11:30 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=23906" name="attach_23906" title="abbot.swt.SWTWorkarounds shelters users from Widget.getBounds()-related problems: cases where either Whatever.getBounds() is unavailable, not public, or has unwelcome behavior.">attachment 23906</a> <a href="attachment.cgi?id=23906&amp;action=edit" title="abbot.swt.SWTWorkarounds shelters users from Widget.getBounds()-related problems: cases where either Whatever.getBounds() is unavailable, not public, or has unwelcome behavior.">[details]</a></span>
abbot.swt.SWTWorkarounds shelters users from Widget.getBounds()-related problems: cases where either Whatever.getBounds() is unavailable, not public, or has unwelcome behavior.

Most up-to-date code, as well as code for users of abbot.swt.SWTWorkarounds
(currently

abbot.tester.swt.WidgetLocator
abbot.tester.swt.MenuItemTester
abbot.tester.swt.ScrollBarTester
abbot.tester.swt.TableTester
abbot.tester.swt.TreeItemTester

) is available (with null password) from

cvs -d:pserver:<a href="mailto:anonymous&#64;cvs.sourceforge.net">anonymous&#64;cvs.sourceforge.net</a>:/cvsroot/abbot co abbot.swt</pre>
    </div>

    <div id="c119" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c119">Comment 119</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-23 19:15:50 EDT
        </span>

      </div>




<pre class="bz_comment_text">Tao Weng 05/26/2005 11:43 AM
<span class="quote">&gt;&gt;&gt; Currently, Abbot.swt solution is not platform independent due to
&gt;&gt;&gt; bugzilla defect number 38436.</span >

&lt;snip&gt;

<span class="quote">&gt;&gt;&gt; 1) Is the defect going to be fixed within the next 6 months or so? 
&gt;&gt;&gt; If not, when is it going to be available. Just roughly....</span >

<span class="quote">&gt;&gt;&gt; 2) Is it possible to release a patched version of swt for linux 
&gt;&gt;&gt; environment in the next 6 months. Just like what we did for windows? </span >

Steve Northover 05/26/2005 12:19:43 PM:
<span class="quote">&gt;&gt; Yes. Either the bug will be fixed or I will work with Tom to ensure
&gt;&gt; that Abbot is patched to support Linux. </span >

Tom Roche 05/26/2005 10:15 PM
<span class="quote">&gt; Thanks!</span >

<span class="quote">&gt;&gt; Tom, if you contribute the [SWTWorkarounds] class from Abbot to
&gt;&gt; the bug report, we will look at providing implementations for the
&gt;&gt; other plaforms.</span >

<span class="quote">&gt; Will do soonest, just verifying a (candidate) fix for 3.0 first.</span >

Unfortunately soonest was much less soon than I had hoped :-( but I
have refactored such that (IIUC) all abbot.swt's SWT workarounds are
in abbot.swt.SWTWorkarounds, which is now attached. Apologies for the
delay, your assistance is appreciated.
</pre>
    </div>

    <div id="c120" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c120">Comment 120</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-11 11:53:06 EDT
        </span>

      </div>




<pre class="bz_comment_text">I am working on a version of SWTWorkarounds that can be used for 3.1.  Hold 
the phone.

Thomas, the implementation of swt2Awt() can't work anywhere else but Windows.  
The format of the KeyTable is platforms specific.  Is this method critical to 
Abbot? (seems like it might be).  Can you please recode this method either as 
a horrible huge case statement or a hash table and post the code here?  Thanks!</pre>
    </div>

    <div id="c121" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c121">Comment 121</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-12 10:53:34 EDT
        </span>

      </div>




<pre class="bz_comment_text">We have the code ready but need an implementation of swt2Awt() before we can 
proceed.</pre>
    </div>

    <div id="c122" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c122">Comment 122</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-12 12:06:47 EDT
        </span>

      </div>




<pre class="bz_comment_text"><a href="show_bug.cgi?id=38436#c120">Comment #120</a> From Steve Northover  2005-07-11 11:53
<span class="quote">&gt; I am working on a version of SWTWorkarounds that can be used for
&gt; 3.1.</span >

Great! Thanks for your cooperation!

<span class="quote">&gt; Thomas, the implementation of swt2Awt() can't work anywhere else
&gt; but Windows. The format of the KeyTable is platforms specific.</span >

Steve, SWTWorkarounds.keyTable exists to enable
SWTWorkarounds.swt2Awt(int swtKeyValue), and both are in
SWTWorkarounds because ... they're more &lt;bleep&gt;ing workarounds for
SWT. As the latter's javadoc states:

  /**
   * Translates from SWT keys values to AWT ones, e.g.
   * from &lt;code&gt;SWT.ESC&lt;/code&gt; to &lt;code&gt;VK_ESCAPE&lt;/code&gt;.
   * For details see
   * {&#64;link org.eclipse.swt.widgets.Display#KeyTable}
   * Workaround for package scope of
   * {&#64;link org.eclipse.swt.widgets.Display#untranslateKey(int)}
   */

So ... could you please just make Display.untranslateKey(int) public?
instead of requiring Yet Another Workaround

<span class="quote">&gt; Can you please recode this method either as a horrible huge case
&gt; statement or a hash table</span >

from your users? 
</pre>
    </div>

    <div id="c123" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c123">Comment 123</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-12 13:20:30 EDT
        </span>

      </div>




<pre class="bz_comment_text">Tom, I'm going to appeal one last time to please skip the editorial comments 
like &quot;bleep&quot; or &quot;Yet Another WorkAround&quot;.  They are offsensive, cloud the 
issue, waste time and make me wonder why on earth I would want to help someone 
who continually insults me and the work I do.

Please read the rest of this comment and respond only to the technical issues.

<span class="quote">&gt;Thomas, the implementation of swt2Awt() can't work anywhere else but
&gt;Windows.  The format of the KeyTable is platforms specific.</span >

The package variable KeyTable maps SWT key constants to platform specific key 
constants.  On Windows, keys like SWT.HOME are mapped to the Windows constant 
VK_HOME.  On GTK, SWT.HOME is mapped to GDK_HOME.  It does not map SWT key 
constants to AWT key constants and therefore cannot be made to do this.  In 
addition, it does not make sense for SWT to provide a mechanism to map SWT 
constants to AWT constants.  For one, AWT doesn't exist on all the platforms 
where SWT runs.  So, if Abbot needs to make AWT constants to SWT constants for 
some reason, Abbot will need code to do this.  Since I have no idea what this 
mapping is used for and cannot know from the source code in SWTWorkarounds, 
you are the most logical person to write the code and contribute it.

Other than the mapping table, we are ready to go.
</pre>
    </div>

    <div id="c124" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c124">Comment 124</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-12 13:37:15 EDT
        </span>

      </div>




<pre class="bz_comment_text"><a href="show_bug.cgi?id=38436#c123">Comment #123</a> From Steve Northover 2005-07-12 13:20
<span class="quote">&gt; Tom, I'm going to appeal one last time to please skip the editorial
&gt; comments like &quot;bleep&quot; or &quot;Yet Another WorkAround&quot;.</span >

Steve, lighten up, then

<span class="quote">&gt; respond only to the technical issues.</span >

e.g. 

<a href="show_bug.cgi?id=38436#c122">Comment #122</a> From Tom Roche  2005-07-12 12:06
<span class="quote">&gt;&gt; could you please just make Display.untranslateKey(int) public?</span >

If not I'll try reflecting on it, which would presumably obviate the
need for the local copy of org.eclipse.swt.widgets.Display.KeyTable
(or am I missing something?)
</pre>
    </div>

    <div id="c125" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c125">Comment 125</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-12 17:54:13 EDT
        </span>

      </div>




<pre class="bz_comment_text">The mapping table in Display is different on every platform.  It maps SWT keys 
to platform specific keys, not AWT keys.  Therefore it cannot be used.  You 
will need to provide an implementation that maps SWT keys to AWT keys.  Once 
we have that code, the 3.1 SWTWorkarounds patch will be complete.</pre>
    </div>

    <div id="c126" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c126">Comment 126</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-12 18:09:22 EDT
        </span>

      </div>




<pre class="bz_comment_text">To be even more precise, the mapping table will be portable and will live 
inside SWTWorkarounds.</pre>
    </div>

    <div id="c127" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c127">Comment 127</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-13 10:49:11 EDT
        </span>

      </div>




<pre class="bz_comment_text"><a href="show_bug.cgi?id=38436#c125">Comment #125</a> From Steve Northover  2005-07-12 17:54
<span class="quote">&gt; The mapping table in Display is different on every platform. It maps
&gt; SWT keys to platform specific keys, not AWT keys. Therefore it
&gt; cannot be used. You will need to provide an implementation that maps
&gt; SWT keys to AWT keys.</span >

OK, will do. If you know of any tables with this information, please
point.
</pre>
    </div>

    <div id="c128" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c128">Comment 128</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-13 11:01:25 EDT
        </span>

      </div>




<pre class="bz_comment_text">I know of none.</pre>
    </div>

    <div id="c129" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c129">Comment 129</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-27 16:07:13 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=25375" name="attach_25375" title="org.eclipse.swt.widgets.SWTWorkarounds lives in Abbot, exposing needed package-privates to users">attachment 25375</a> <a href="attachment.cgi?id=25375&amp;action=edit" title="org.eclipse.swt.widgets.SWTWorkarounds lives in Abbot, exposing needed package-privates to users">[details]</a></span>
org.eclipse.swt.widgets.SWTWorkarounds lives in Abbot, exposing needed package-privates to users</pre>
    </div>

    <div id="c130" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c130">Comment 130</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-27 16:10:15 EDT
        </span>

      </div>




<pre class="bz_comment_text">
<a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Locating Widgets in display coordinates for automated whitebox testing"
   href="show_bug.cgi?id=38436#c122">https://bugs.eclipse.org/bugs/show_bug.cgi?id=38436#c122</a>
From Tom Roche  2005-07-12 12:06
<span class="quote">&gt;&gt; could you please just make Display.untranslateKey(int) public?</span >

<a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Locating Widgets in display coordinates for automated whitebox testing"
   href="show_bug.cgi?id=38436#c125">https://bugs.eclipse.org/bugs/show_bug.cgi?id=38436#c125</a>
From Steve Northover 2005-07-12 17:54
<span class="quote">&gt; The mapping table in Display is different on every platform. It
&gt; maps SWT keys to platform specific keys, not AWT keys. Therefore it
&gt; cannot be used.</span >

Apologies for the delay. Turns out that SWTWorkarounds.swt2Awt was a
red herring:

* it did _not_ translate from SWT to AWT key values

* its caller needed translation from SWT to native, hence the local
  copy of Display.KeyTable.

Please find

<a href="https://bugs.eclipse.org/bugs/attachment.cgi?id=25375">https://bugs.eclipse.org/bugs/attachment.cgi?id=25375</a>

attached. In addition to renaming the method, I also changed
SWTWorkarounds' package to workaround the package-visibility issues:
this allows SWTWorkarounds.swt2OS to call Display.untranslateKey(int)
directly. I'll also try eliminate the reflection in
getBounds(MenuItem) after we branch for 3.1. Meanwhile,

<a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Locating Widgets in display coordinates for automated whitebox testing"
   href="show_bug.cgi?id=38436#c120">https://bugs.eclipse.org/bugs/show_bug.cgi?id=38436#c120</a>
From Steve Northover  2005-07-11 11:53
<span class="quote">&gt;&gt;&gt; I am working on a version of SWTWorkarounds that can be used for
&gt;&gt;&gt; 3.1.</span >

Please lemme know if you find any other obstacles.
</pre>
    </div>

    <div id="c131" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c131">Comment 131</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-27 18:57:06 EDT
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt;Other than the mapping table, we are ready to go.</span >

1) Please don't write any code or change anything in the SWTWorkarounds class 
(other than the mapping table).  We are have been ready to go with the code 
for a while.  No other work is necessary and changing anything else in the 
file may actually cause work.

2) Are you telling me that Abbot really needs to translate SWT keys to 
operating system keys in order to work?  There is no API in SWT that will 
accept operating system key values and do anything sensible with them.  Is 
there an API in AWT or Abbot that takes operating system key values?  If so, 
how is Abbot for AWT getting these values?  Is there AWT API that translates 
AWT key values to operating system key values?


</pre>
    </div>

    <div id="c132" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c132">Comment 132</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-27 19:27:28 EDT
        </span>

      </div>




<pre class="bz_comment_text"><a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Locating Widgets in display coordinates for automated whitebox testing"
   href="show_bug.cgi?id=38436#c131">https://bugs.eclipse.org/bugs/show_bug.cgi?id=38436#c131</a>
From Steve Northover  2005-07-27 18:57 (rearranged)
<span class="quote">&gt; 2) Are you telling me that Abbot really needs to translate SWT keys
&gt; to operating system keys in order to work?</span >

If you define &quot;really&quot; as in &quot;SWT really needs to have a package-
private Display.untranslateKey(int),&quot; then yes: at the moment, in one
place, it does.

<span class="quote">&gt; 1) Please don't write any code or change anything in the
&gt; SWTWorkarounds class (other than the mapping table). We are have
&gt; been ready to go with the code for a while. No other work is
&gt; necessary and changing anything else in the file may actually cause
&gt; work.</span >

What has changed:

* the package, allowing ...

* ... keyTable (and initKeyTable(...)) to disappear, per your request

* swt2Awt(...) -&gt; swt2OS(...)

* swt2OS(...) calls Display.untranslateKey(int) directly

Since presumably none of your code used the local keyTable or called
initKeyTable(...) or swt2Awt(...), you should have no problems.
</pre>
    </div>

    <div id="c133" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c133">Comment 133</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-28 10:01:56 EDT
        </span>

      </div>




<pre class="bz_comment_text">Billy to go and get the Abbot source and find out what Abbot is doing with 
operating system key values to determine whether the API is needed or not and 
post the results in this bug report.</pre>
    </div>

    <div id="c134" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c134">Comment 134</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Billy Biggs</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=billy.biggs&#64;eclipse.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=billy.biggs&#64;eclipse.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-28 10:59:47 EDT
        </span>

      </div>




<pre class="bz_comment_text">The only code I found that used swt2OS() was in TreeItemTester:

  new Robot().keyPress(SWTWorkarounds.swt2OS(SWT.ESC));

The method swt2OS(SWT.ESC) returns GDK_Escape (0xff1b) under GTK+.  I cannot
find any code path in Robot().keyPress() which expects a GDK key value, and
sending 0xff1b to an AWT robot under GTK+ results in an invalid key code
exception.  I assume this works on Windows because SWT.ESC maps to Windows'
VK_ESCAPE (0x1b) which I guess happens to have the same value as the AWT VK_ESCAPE.

I don't think this function is actually useful to you.  Is there somewhere else
you intended to use this?</pre>
    </div>

    <div id="c135" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c135">Comment 135</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-28 12:57:34 EDT
        </span>

      </div>




<pre class="bz_comment_text"><a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Locating Widgets in display coordinates for automated whitebox testing"
   href="show_bug.cgi?id=38436#c131">https://bugs.eclipse.org/bugs/show_bug.cgi?id=38436#c131</a>
From Steve Northover  2005-07-27 18:57
<span class="quote">&gt;&gt;&gt; 2) Are you telling me that Abbot really needs to translate SWT
&gt;&gt;&gt; keys to operating system keys in order to work?</span >

<a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Locating Widgets in display coordinates for automated whitebox testing"
   href="show_bug.cgi?id=38436#c132">https://bugs.eclipse.org/bugs/show_bug.cgi?id=38436#c132</a>
From Tom Roche  2005-07-27 19:27
<span class="quote">&gt;&gt; If you define &quot;really&quot; as in &quot;SWT really needs to have a package-
&gt;&gt; private Display.untranslateKey(int),&quot; then yes: at the moment, in
&gt;&gt; one place, it does.</span >

<a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Locating Widgets in display coordinates for automated whitebox testing"
   href="show_bug.cgi?id=38436#c134">https://bugs.eclipse.org/bugs/show_bug.cgi?id=38436#c134</a>
From Billy Biggs  2005-07-28 10:59
<span class="quote">&gt; The only code I found that used swt2OS() was in TreeItemTester:</span >

<span class="quote">&gt;   new Robot().keyPress(SWTWorkarounds.swt2OS(SWT.ESC));</span >

Correct.

<span class="quote">&gt; The method swt2OS(SWT.ESC) returns GDK_Escape (0xff1b) under GTK+. I
&gt; cannot find any code path in Robot().keyPress() which expects a GDK
&gt; key value, and sending 0xff1b to an AWT robot under GTK+ results in
&gt; an invalid key code exception. I assume this works on Windows
&gt; because SWT.ESC maps to Windows' VK_ESCAPE (0x1b) which I guess
&gt; happens to have the same value as the AWT VK_ESCAPE.</span >

Doh! hafta do an swt2Awt after all ...

<span class="quote">&gt; I don't think this function is actually useful to you. Is there
&gt; somewhere else you intended to use this?</span >

As stated above, just this one place. Doesn't mean it won't be useful
in the future, but if you really can't tolerate its existence, feel
free to remove: we can always add it back if needed.
</pre>
    </div>

    <div id="c136" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c136">Comment 136</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Hugo A. Garcia</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=hugo.a.garcia&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=hugo.a.garcia&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-28 13:37:34 EDT
        </span>

      </div>




<pre class="bz_comment_text">
<span class="quote">&gt; 
&gt; As stated above, just this one place. Doesn't mean it won't be useful
&gt; in the future, but if you really can't tolerate its existence, feel
&gt; free to remove: we can always add it back if needed.
&gt; </span >

YAGNI
</pre>
    </div>

    <div id="c137" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c137">Comment 137</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-28 13:39:04 EDT
        </span>

      </div>




<pre class="bz_comment_text">What Billy is trying to tell you is that this method is not only useless, it 
is also broken.  It does not work on GTK.

After examining the Abbot source code, we have determined that the intent of 
the method is to map SWT key values to AWT key values (not operating system 
key values as was previously claimed).  Since Abbot calls swt2OS() in exactly 
one place, always with SWT.ESC and SWT.ESC maps to AWT's VK_ESCAPE, I suggest 
you change Abbot to simply inline AWT's VK_ESCAPE.  To be more precise, change 
the line to TreeItemTester to be:

  new Robot().keyPress(KeyEvent.VK_ESCAPE));

Once this is done, we can release the patch.</pre>
    </div>

    <div id="c138" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c138">Comment 138</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-28 13:49:44 EDT
        </span>

      </div>




<pre class="bz_comment_text"><a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Locating Widgets in display coordinates for automated whitebox testing"
   href="show_bug.cgi?id=38436#c137">https://bugs.eclipse.org/bugs/show_bug.cgi?id=38436#c137</a>
From Steve Northover  2005-07-28 13:39
<span class="quote">&gt; new Robot().keyPress(KeyEvent.VK_ESCAPE));</span >

Done!</pre>
    </div>

    <div id="c139" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c139">Comment 139</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-28 15:53:26 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=25431" name="attach_25431" title="SWTWorkarounds for Abbot (SWT 3.1, Windows, GTK and Motif)">attachment 25431</a> <a href="attachment.cgi?id=25431&amp;action=edit" title="SWTWorkarounds for Abbot (SWT 3.1, Windows, GTK and Motif)">[details]</a></span>
SWTWorkarounds for Abbot (SWT 3.1, Windows, GTK and Motif)

Here is the SWTWorkarounds class for Abbot (SWT 3.1, Windows, GTK and Motif).  


NOTE: There is no work around code for the Mac due to missing operating system
features for that platform and lack of support from Apple.  Too bad!</pre>
    </div>

    <div id="c140" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c140">Comment 140</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Randy Hudson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=hudsonr&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=hudsonr&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-28 16:27:16 EDT
        </span>

      </div>




<pre class="bz_comment_text">should getBounds(Menu) call itself or getBounds((Object)menu);?</pre>
    </div>

    <div id="c141" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c141">Comment 141</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-28 16:40:11 EDT
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; should getBounds(Menu) call itself or getBounds((Object)menu);?</span >

ditto getBounds(MenuItem) ... that first stack overflow was attention-grabbing :-)</pre>
    </div>

    <div id="c142" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c142">Comment 142</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-28 17:20:41 EDT
        </span>

      </div>




<pre class="bz_comment_text">Oops, we didn't do a final test pass on everything (but the code should be 
close).  Please attach a new class with your fixes when you have finished 
testing it.  If you have any problems, let us know.</pre>
    </div>

    <div id="c143" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c143">Comment 143</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ingo Maier</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=i.maier&#64;tu-bs.de" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=i.maier&#64;tu-bs.de" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-01 06:08:12 EDT
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; Created an attachment (id=25431) [edit]
&gt; SWTWorkarounds for Abbot (SWT 3.1, Windows, GTK and Motif)
&gt; 
&gt; Here is the SWTWorkarounds class for Abbot (SWT 3.1, Windows, GTK and Motif).  </span >

This does not work properly for menu(item)s (I already added the cast to
Object). The coordinates do not get mapped to display space coords. As I am not
involved into abbot at all, I don't know whether this should happen in
SWTWorkarounds or in WidgetLocator.getBounds(). However,
SWTWorkarounds.getBounds(Menu menu) already answers display space coords for me
(Linux/GTK). So, I added a  

itemRect.y += menuRect.y;

in getBounds(MenuItem menuItem) and it seems to work fine for me. Here is the
whole method:

public static Rectangle getBounds(MenuItem menuItem) {
        Rectangle itemRect = getBounds ((Object)menuItem);
        Rectangle menuRect = getBounds (menuItem.getParent ());
        if ((menuItem.getParent ().getStyle() &amp; SWT.RIGHT_TO_LEFT) != 0) {
            itemRect.x = menuRect.x + menuRect.width - itemRect.width - itemRect.x;
        } else {
            itemRect.x += menuRect.x;
        }
        itemRect.y += menuRect.y;
        return itemRect;
}</pre>
    </div>

    <div id="c144" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c144">Comment 144</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-01 08:14:11 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=25499" name="attach_25499" title="SWTWorkarounds for Abbot (SWT 3.1: Windows, GTK, Motif)">attachment 25499</a> <a href="attachment.cgi?id=25499&amp;action=edit" title="SWTWorkarounds for Abbot (SWT 3.1: Windows, GTK, Motif)">[details]</a></span>
SWTWorkarounds for Abbot (SWT 3.1: Windows, GTK, Motif)

<a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Locating Widgets in display coordinates for automated whitebox testing"
   href="show_bug.cgi?id=38436#c143">https://bugs.eclipse.org/bugs/show_bug.cgi?id=38436#c143</a>
From <a href="mailto:i.maier&#64;tu-bs.de">i.maier&#64;tu-bs.de</a>  2005-08-01 06:08
<span class="quote">&gt; I added a  </span >

<span class="quote">&gt; itemRect.y += menuRect.y;</span >

<span class="quote">&gt; in getBounds(MenuItem menuItem) and it seems to work fine for me.</span >

Thanks, Ingo Maier! Attachment also fixes the stack overflows.
Remaining known issues:

* tree item finding (e.g. in New Wizard dialog) requires &quot;training&quot;: a
  test will fail the first time, but succeeds after first manual
  iteration. E.g. I observe the sequence [Run&gt;Run&gt;&lt;test&gt;: fails, run
  the same scenario manually, Run&gt;Run&gt;&lt;test&gt;: succeeds] with several
  tests (JavaProjectTester, WTPSimpleWebProjectTest, WTPWizardTest).

* need to handle cases when method is unavailable

* incomplete Carbon support</pre>
    </div>

    <div id="c145" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c145">Comment 145</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Roche</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tlroche&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tlroche&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-01 08:18:01 EDT
        </span>

      </div>




<pre class="bz_comment_text"><a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Locating Widgets in display coordinates for automated whitebox testing"
   href="show_bug.cgi?id=38436#c144">https://bugs.eclipse.org/bugs/show_bug.cgi?id=38436#c144</a>
<span class="quote">&gt; Remaining known issues:</span >

on win32: need reports from other platforms
</pre>
    </div>

    <div id="c146" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c146">Comment 146</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-02 13:34:32 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=25568" name="attach_25568" title="SWTWorkarounds for Abbot (SWT 3.1: Windows, GTK, Motif)">attachment 25568</a> <a href="attachment.cgi?id=25568&amp;action=edit" title="SWTWorkarounds for Abbot (SWT 3.1: Windows, GTK, Motif)">[details]</a></span>
SWTWorkarounds for Abbot (SWT 3.1: Windows, GTK, Motif)

OK, here is the latest class.  I tested the code on Windows, GTK and Motif.

TOM:  Do not put this class in org.eclipse.swt.widgets.  It is temporary work
around code specifically for Abbot.  I put it in the package abbot.swt which
was the original place you had the workaround.</pre>
    </div>

    <div id="c147" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c147">Comment 147</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-02 13:36:24 EDT
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt;* tree item finding (e.g. in New Wizard dialog) requires &quot;training&quot;: a
&gt;  test will fail the first time, but succeeds after first manual</span >

Enter a new bug report for this.  It has nothing to do with this bug report.</pre>
    </div>

    <div id="c148" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c148">Comment 148</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Julijus K.</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=weidox&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=weidox&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-03-06 07:19:59 EST
        </span>

      </div>




<pre class="bz_comment_text">As I see, this topic is dead for a half year, and still not solved. From what I understood here, MenuItem on MacOS is stuck, but other widgets, which have fixed place (like TabItem) didn't run into this problem and could be implemented on all platforms. Couldn't this be done at least for widgets for which it is possible? Cause I see the need not only for automatic testing, but for general use (such as creating context menus for TabItem's).</pre>
    </div>

    <div id="c149" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c149">Comment 149</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-04-28 10:56:03 EDT
        </span>

      </div>




<pre class="bz_comment_text">I agree with you, however, we cannot offer API on one platform that cannot be implemented on another or SWT will cease to be portable.</pre>
    </div>

    <div id="c150" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c150">Comment 150</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Julijus K.</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=weidox&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=weidox&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-05-02 01:47:33 EDT
        </span>

      </div>




<pre class="bz_comment_text">That's really true, but I'm talking only about widgets, for which such functionality can be implemented on all platforms. This wouldn't break portability.</pre>
    </div>

    <div id="c151" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c151">Comment 151</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gary Johnston</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=GaryJohnston&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=GaryJohnston&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-12 18:10:15 EST
        </span>

      </div>




<pre class="bz_comment_text">Steve, per our recent email exchange, would you please provide a workaround/patch implementation of getBounds() for TreeColumn (analogous to what we're using for some of the other non-Control Widgets in our SWTWorkarounds class in abbot.swt (on SourceForge)?  Thanks.</pre>
    </div>

    <div id="c152" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c152">Comment 152</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-13 09:49:28 EST
        </span>

      </div>




<pre class="bz_comment_text">NOTE:  Our email exchange consisted of me asking Gary to ask for this new feature in the bug report.</pre>
    </div>

    <div id="c153" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c153">Comment 153</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Northover</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=snorthov&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=snorthov&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-15 13:23:20 EST
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=56919" name="attach_56919" title="SWTWorkarounds for Abbot (SWT 3.2: Windows, GTK, Motif)">attachment 56919</a> <a href="attachment.cgi?id=56919&amp;action=edit" title="SWTWorkarounds for Abbot (SWT 3.2: Windows, GTK, Motif)">[details]</a></span>
SWTWorkarounds for Abbot (SWT 3.2: Windows, GTK, Motif) 

New versions of the code for 3.2.</pre>
    </div>

    <div id="c154" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c154">Comment 154</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">l. mclister</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=lmcliste&#64;adobe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=lmcliste&#64;adobe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-07-25 21:10:09 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=74636" name="attach_74636" title="extends SWT to add a getBounds method for MenuItem, and for TabItem, on OSX">attachment 74636</a> <a href="attachment.cgi?id=74636&amp;action=edit" title="extends SWT to add a getBounds method for MenuItem, and for TabItem, on OSX">[details]</a></span>
extends SWT to add a getBounds method for MenuItem, and for TabItem, on OSX

The enclosed code extends SWT to add a getBounds method for MenuItem, and for TabItem, on OSX.

The way it does this is to use the Accessibility API. You must first have checked the item
	'System Preferences/Universal Access/Enable access for assistive devices' 
This is unfortunate, but this seems like an acceptable cost for a test framework.</pre>
    </div>

    <div id="c155" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c155">Comment 155</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">l. mclister</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=lmcliste&#64;adobe.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=lmcliste&#64;adobe.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-07-26 13:14:08 EDT
        </span>

      </div>




<pre class="bz_comment_text">Comment on <span class=""><a href="attachment.cgi?id=74636" name="attach_74636" title="extends SWT to add a getBounds method for MenuItem, and for TabItem, on OSX">attachment 74636</a> <a href="attachment.cgi?id=74636&amp;action=edit" title="extends SWT to add a getBounds method for MenuItem, and for TabItem, on OSX">[details]</a></span>
extends SWT to add a getBounds method for MenuItem, and for TabItem, on OSX</pre>
    </div>

    <div id="c156" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=38436#c156">Comment 156</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eclipse Webmaster</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=webmaster&#64;eclipse.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=webmaster&#64;eclipse.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-09-06 16:15:51 EDT
        </span>

      </div>




<pre class="bz_comment_text">This bug hasn't had any activity in quite some time. Maybe the problem got resolved, was a duplicate of something else, or became less pressing for some reason - or maybe it's still relevant but just hasn't been looked at yet.

If you have further information on the current state of the bug, please add it. The information can be, for example, that the problem still occurs, that you still want the feature, that more information is needed, or that the bug is (for whatever reason) no longer relevant.</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=38436">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=38436">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=38436">Clone This Bug</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>

<br>
</div>

    <div id="footer">
      <div class="intro"></div>
<ul id="useful-links">
  <li id="links-actions"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_bottom" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_bottom");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_bottom" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_bottom"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_bottom">
  <span class="separator">| </span>
  <a id="login_link_bottom" href="show_bug.cgi?id=38436&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_bottom')">Log In</a>

  <form action="show_bug.cgi?id=38436" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_bottom">
    <input id="Bugzilla_login_bottom" required
           name="Bugzilla_login" class="bz_login"
        placeholder="Login">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_bottom" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_bottom">
    <a href="#" onclick="return hide_mini_login_form('_bottom')">[x]</a>
  </form>
</li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
</ul>
  </li>

  




  
</ul>

      <div class="outro"></div>
    </div>

  </body>
</html>