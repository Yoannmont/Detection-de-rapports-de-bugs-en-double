<!DOCTYPE html>
<html lang="en">
  <head>
    <title>89599 &ndash; [api][typing] Text Editor Undo stack (context) should be keyed of common document</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link href="https://bugs.eclipse.org/bugs/data/assets/03c4bb46b12126a79867f9a9f5323634.css?1593441374" rel="stylesheet" type="text/css">



    
<script type="text/javascript" src="https://bugs.eclipse.org/bugs/data/assets/a7c2f3a028f17a9aa60f56dc9d6e732d.js?1593441374"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/bugs',
                maxusermatches: 10
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    "You must enter a Description for this attachment.",
                component_required:
                    "You must select a Component for this bug.",
                description_required:
                    "You must enter a Description for this bug.",
                short_desc_required:
                    "You must enter a Summary for this bug.",
                version_required:
                    "You must select a Version for this bug."
            }
              , api_token: ''
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null,
                             "89599 – [api][typing] Text Editor Undo stack (context) should be keyed of common document",
                             "show_bug.cgi?id=89599" );
        document.title = "89599 – [api][typing] Text Editor Undo stack (context) should be keyed of common document";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "89599 – [api][typing] Text Editor Undo stack (context) should be keyed of common document", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();

    });
    // -->
    </script>
<script type="text/javascript" src="https://bugs.eclipse.org/bugs/data/assets/daf5e0fb6826e6a35280e622913f0c4a.js?1593441374"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico">
  </head>

  <body 
        class="bugs-eclipse-org-bugs
                 bz_bug
                 bz_status_RESOLVED
                 bz_product_Platform
                 bz_component_Text
                 bz_bug_89599 yui-skin-sam">

  <div id="header"><!-- 1.0@bugzilla.org -->





<!--  START OF SOLSTICE HEADER -->
 <link rel="stylesheet" type="text/css" href="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/stylesheets/vendor/cookieconsent/cookieconsent.min.css" />
 <script src="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/vendor/cookieconsent/default.min.js"></script>
 <style type="text/css">
    @import url('https://www.eclipse.org/eclipse.org-common/themes/solstice/public/stylesheets/barebone.min.css')
    </style>
    <script
      src="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/barebone.min.js">
    </script><header role="banner" class="barebone-layout thin-header padding-top-5 padding-bottom-5"  id="header-wrapper">
  <div class="container-fluid reset">
    <div class="row-fluid" id="header-row">
            <div class="col-sm-8 col-md-6 col-lg-4" id="header-left">
        <div class="wrapper-logo-default"><a href="https://www.eclipse.org/"><img class="logo-eclipse-default img-responsive hidden-xs" alt="logo" src="https://bugs.eclipse.org/eclipse.org-common/themes/solstice/public/images/logo/eclipse-426x100.png"/></a></div>
      </div>            <div class="col-sm-16 col-md-18 col-lg-20" id="main-menu-wrapper">
  <div class="navbar yamm" id="main-menu">
    <div id="navbar-collapse-1" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li class="visible-thin"><a href="https://www.eclipse.org/downloads/" target="_self">Download</a></li><li><a href="https://www.eclipse.org/users/" target="_self">Getting Started</a></li><li><a href="https://www.eclipse.org/membership/" target="_self">Members</a></li><li><a href="https://www.eclipse.org/projects/" target="_self">Projects</a></li>                  <li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Community <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="http://marketplace.eclipse.org">Marketplace</a></li><li><a href="http://events.eclipse.org">Events</a></li><li><a href="http://www.planeteclipse.org/">Planet Eclipse</a></li><li><a href="https://www.eclipse.org/community/eclipse_newsletter/">Newsletter</a></li><li><a href="https://www.youtube.com/user/EclipseFdn">Videos</a></li></ul></li><li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Participate <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="https://bugs.eclipse.org/bugs/">Report a Bug</a></li><li><a href="https://www.eclipse.org/forums/">Forums</a></li><li><a href="https://www.eclipse.org/mail/">Mailing Lists</a></li><li><a href="https://wiki.eclipse.org/">Wiki</a></li><li><a href="https://wiki.eclipse.org/IRC">IRC</a></li><li><a href="https://www.eclipse.org/contribute/">How to Contribute</a></li></ul></li><li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Working Groups <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="http://wiki.eclipse.org/Auto_IWG">Automotive</a></li><li><a href="http://iot.eclipse.org">Internet of Things</a></li><li><a href="http://locationtech.org">LocationTech</a></li><li><a href="http://lts.eclipse.org">Long-Term Support</a></li><li><a href="http://polarsys.org">PolarSys</a></li><li><a href="http://science.eclipse.org">Science</a></li><li><a href="http://www.openmdm.org">OpenMDM</a></li></ul></li>          <!-- More -->
          <li class="dropdown eclipse-more hidden-xs">
            <a data-toggle="dropdown" class="dropdown-toggle">More<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li>
                <!-- Content container to add padding -->
                <div class="yamm-content">
                  <div class="row">
                    <ul class="col-sm-8 list-unstyled"><li><p><strong>Community</strong></p></li><li><a href="http://marketplace.eclipse.org">Marketplace</a></li><li><a href="http://events.eclipse.org">Events</a></li><li><a href="http://www.planeteclipse.org/">Planet Eclipse</a></li><li><a href="https://www.eclipse.org/community/eclipse_newsletter/">Newsletter</a></li><li><a href="https://www.youtube.com/user/EclipseFdn">Videos</a></li></ul><ul class="col-sm-8 list-unstyled"><li><p><strong>Participate</strong></p></li><li><a href="https://bugs.eclipse.org/bugs/">Report a Bug</a></li><li><a href="https://www.eclipse.org/forums/">Forums</a></li><li><a href="https://www.eclipse.org/mail/">Mailing Lists</a></li><li><a href="https://wiki.eclipse.org/">Wiki</a></li><li><a href="https://wiki.eclipse.org/IRC">IRC</a></li><li><a href="https://www.eclipse.org/contribute/">How to Contribute</a></li></ul><ul class="col-sm-8 list-unstyled"><li><p><strong>Working Groups</strong></p></li><li><a href="http://wiki.eclipse.org/Auto_IWG">Automotive</a></li><li><a href="http://iot.eclipse.org">Internet of Things</a></li><li><a href="http://locationtech.org">LocationTech</a></li><li><a href="http://lts.eclipse.org">Long-Term Support</a></li><li><a href="http://polarsys.org">PolarSys</a></li><li><a href="http://science.eclipse.org">Science</a></li><li><a href="http://www.openmdm.org">OpenMDM</a></li></ul>                  </div>
                </div>
              </li>
            </ul>
          </li>
              </ul>
    </div>
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      </button>
      <div class="wrapper-logo-mobile"><a class="navbar-brand visible-xs" href="https://www.eclipse.org/"><img class="logo-eclipse-default-mobile img-responsive" alt="logo" src="https://bugs.eclipse.org/eclipse.org-common/themes/solstice/public/images/logo/eclipse-800x188.png"/></a></div>    </div>
  </div>
</div>
    </div>
  </div>
</header>
<!--  END OF SOLSTICE HEADER -->

    <div id="titles">
      <span id="title">Bugzilla &ndash; Bug&nbsp;89599</span>

        <span id="subtitle" class="subheader">[api][typing] Text Editor Undo stack (context) should be keyed of common document</span>

        <span id="information" class="header_addl_info">Last modified: 2006-01-30 09:17:14 EST</span>
    </div>


    <div id="common_links"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_top" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_top");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_top" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_top"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_top">
  <span class="separator">| </span>
  <a id="login_link_top" href="show_bug.cgi?id=89599&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_top')">Log In</a>

  <form action="show_bug.cgi?id=89599" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_top">
    <input id="Bugzilla_login_top" required
           name="Bugzilla_login" class="bz_login"
        placeholder="Login">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_top" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_top">
    <a href="#" onclick="return hide_mini_login_form('_top')">[x]</a>
  </form>
</li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
</ul>
    </div>
  </div>

  <div id="bugzilla-body">


<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2006-01-30 09:17:14">
  <input type="hidden" name="id" value="89599">
  <input type="hidden" name="token" value="1629873177-7cx1zBw2NiMmC8VCcY_U8HSqw-xNzAnQhy6Z6MUsLcA">
<div class="bz_short_desc_container edit_form">
     <a href="show_bug.cgi?id=89599"><b>Bug&nbsp;89599</b></a> <span id="summary_container" class="bz_default_hidden">
      - <span id="short_desc_nonedit_display">[api][typing] Text Editor Undo stack (context) should be keyed of common document</span>
     </span>

    <div id="summary_input"><span class="field_label "
    id="field_label_short_desc">


  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>

</span><span title="[api][typing] Text Editor Undo stack (context) should be keyed of common document">[api][typing] Text Editor Undo stack (context) should be keyed of common docu...
        </span>
    </div>
  </div>
  <script type="text/javascript">
    hideEditableField('summary_container',
                      'summary_input',
                      'summary_edit_action',
                      'short_desc',
                      '[api][typing] Text Editor Undo stack (context) should be keyed of common document' );
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          FIXED
      </span>
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_alias">


  <a 
      title="A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#alias"
  >Alias:</a>

</th>
    <td>
        None
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components. Select a Classification to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Platform

</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Eclipse Project

</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=Platform"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Text

  (<a href="buglist.cgi?component=Text&amp;product=Platform&amp;bug_status=__open__"
      target="_blank">show other bugs</a>)
</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">


  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=fields.html#version"
  >Version:</a>

</th>

      <td>3.1 &#160; <a href="https://dev.eclipse.org/committers/bugs/bugz_manager.php"><img src="//dev.eclipse.org/small_icons/apps/accessories-text-editor.png" alt="Edit" title="Edit these values" /></a></td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">


  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>

</th>
      <td class="field_value">PC
        Windows XP
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label  accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>P3
       normal<span id="votes_container">
    (<a href="page.cgi?id=voting/user.html&amp;bug_id=89599#vote_89599">vote</a>)
  </span>
      </td>
    </tr>

      <tr><th class="field_label "
    id="field_label_target_milestone">


  <a 
      title="The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it."
      class="field_help_link"
      href="page.cgi?id=fields.html#target_milestone"
  >Target Milestone:</a>

</th>
        <td>3.2 M5 &#160; <a href="https://dev.eclipse.org/committers/bugs/bugz_manager.php"><img src="//dev.eclipse.org/small_icons/apps/accessories-text-editor.png" alt="Edit" title="Edit these values" /></a></td>
      </tr>
          
          <tr><th class="field_label "
    id="field_label_assigned_to">


  <a 
      title="The person in charge of resolving the bug."
      class="field_help_link"
      href="page.cgi?id=fields.html#assigned_to"
  >Assignee:</a>

</th>
      <td><span class="vcard"><span class="fn">Dani Megert</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=daniel_megert&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=daniel_megert&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
      </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_qa_contact">


  <a 
      title="The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#qa_contact"
  >QA Contact:</a>

</th>
      <td><span class="vcard">
</span>
      </td>
    </tr>
    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'platform-text-inbox\x40eclipse.org',
        '');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">


  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>

</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>

    <tr><th class="field_label "
    id="field_label_status_whiteboard">


  <a 
      title="Each bug has a free-form single line text entry box for adding tags and status information."
      class="field_help_link"
      href="page.cgi?id=fields.html#status_whiteboard"
  >Whiteboard:</a>

</th><td>  
  </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_keywords">


  <a 
      title="You can add keywords from a defined list to bugs, in order to easily identify and group them."
      class="field_help_link"
      href="describekeywords.cgi"
  >Keywords:</a>

</th>
  <td class="field_value "
      id="field_container_keywords" >

</td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          <tr>
    <th class="field_label">
      <label>Duplicates (4)</label>:
    </th>
    <td class="field_value">
      <span id="duplicates"><a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - [misc] Inconsistent undo with multiple windows"
   href="show_bug.cgi?id=66926">66926</a> <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - [Undo] [implementation] Rename Type/CompilationUnit flushes the editor undo stack"
   href="show_bug.cgi?id=93955">93955</a> <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - undo: editor history of two editor on the same file not in sync"
   href="show_bug.cgi?id=99642">99642</a> <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Undo stack out of sync when multiple editors are open on same file"
   href="show_bug.cgi?id=103855">103855</a> 
      </span>
      (<a href="buglist.cgi?bug_id=66926,93955,99642,103855">view as bug list</a>)
    </td>
  </tr>
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
<a class="bz_bug_link 
          bz_status_VERIFIED  bz_closed"
   title="VERIFIED FIXED - [Undo] - action handlers should refer adapter requests to their part"
   href="show_bug.cgi?id=108144">108144</a> 
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - [Undo] [implementation] Rename Type/CompilationUnit flushes the editor undo stack"
   href="show_bug.cgi?id=93955">93955</a> 
  </td>
  </tr>

    <tr>
      <th>&nbsp;</th>

      <td id="show_dependency_tree_or_graph">
        Show dependency <a href="showdependencytree.cgi?id=89599&amp;hide_resolved=1">tree</a>

      </td>
    </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table>
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2005-03-30 11:58 EST by <span class="vcard"><span class="fn">David Williams</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=david_williams&#64;acm.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=david_williams&#64;acm.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2006-01-30 09:17 EST
      (<a href="show_activity.cgi?id=89599">History</a>)
    </td>
  
  </tr>
<tr>
      <th class="field_label">
        <label  accesskey="a">
          CC List:
        </label>
      </th>
      <td>10 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5" >
                <option value="bob">bob</option>
                <option value="christof_marti">christof_marti</option>
                <option value="daniel_megert">daniel_megert</option>
                <option value="eclipse">eclipse</option>
                <option value="gunnar">gunnar</option>
                <option value="markus.kell.r">markus.kell.r</option>
                <option value="mlists">mlists</option>
                <option value="n.a.edgar">n.a.edgar</option>
                <option value="susan">susan</option>
                <option value="thatnitind">thatnitind</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" >

</td>
    </tr> 

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>



        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts">
  <tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table">
  <tr id="a0">
    <th colspan="3" class="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=26122"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">org.eclipse.text.patch</span></b></a>

          <span class="bz_attach_extra_info">
              (54.04 KB,
                patch)

            <br>
            <a href="#attach_26122"
               title="Go to the comment associated with the attachment">2005-08-15 15:55 EDT</a>,

            <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=26122&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=26122&amp;action=diff">Diff</a>
        </td>
      </tr>
      <tr id="a2" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=26123"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">org.eclipse.jface.text.patch</span></b></a>

          <span class="bz_attach_extra_info">
              (15.68 KB,
                patch)

            <br>
            <a href="#attach_26123"
               title="Go to the comment associated with the attachment">2005-08-15 15:56 EDT</a>,

            <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=26123&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=26123&amp;action=diff">Diff</a>
        </td>
      </tr>
      <tr id="a3" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=26124"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">org.eclipse.ui.workbench.texteditor.patch</span></b></a>

          <span class="bz_attach_extra_info">
              (1.56 KB,
                patch)

            <br>
            <a href="#attach_26124"
               title="Go to the comment associated with the attachment">2005-08-15 15:58 EDT</a>,

            <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=26124&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=26124&amp;action=diff">Diff</a>
        </td>
      </tr>
      <tr id="a4" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=26125"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">org.eclipse.ui.editors.patch</span></b></a>

          <span class="bz_attach_extra_info">
              (1.34 KB,
                patch)

            <br>
            <a href="#attach_26125"
               title="Go to the comment associated with the attachment">2005-08-15 15:59 EDT</a>,

            <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=26125&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=26125&amp;action=diff">Diff</a>
        </td>
      </tr>
      <tr id="a5" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=26126"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">org.eclipse.jdt.ui.tests.patch</span></b></a>

          <span class="bz_attach_extra_info">
              (9.03 KB,
                patch)

            <br>
            <a href="#attach_26126"
               title="Go to the comment associated with the attachment">2005-08-15 15:59 EDT</a>,

            <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=26126&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=26126&amp;action=diff">Diff</a>
        </td>
      </tr>
      <tr id="a6" class="bz_contenttype_text_plain bz_patch">
        <td>
            <a href="attachment.cgi?id=26127"
               title="View the content of the attachment">
          <b>org.eclipse.jface.text.tests.patch</b></a>

          <span class="bz_attach_extra_info">
              (16.12 KB,
                patch)

            <br>
            <a href="#attach_26127"
               title="Go to the comment associated with the attachment">2005-08-15 16:00 EDT</a>,

            <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=26127&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=26127&amp;action=diff">Diff</a>
        </td>
      </tr>
      <tr id="a7" class="bz_contenttype_text_plain bz_patch">
        <td>
            <a href="attachment.cgi?id=26542"
               title="View the content of the attachment">
          <b>org.eclipse.jface.text.patch</b></a>

          <span class="bz_attach_extra_info">
              (16.04 KB,
                patch)

            <br>
            <a href="#attach_26542"
               title="Go to the comment associated with the attachment">2005-08-26 13:02 EDT</a>,

            <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=26542&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=26542&amp;action=diff">Diff</a>
        </td>
      </tr>
      <tr id="a8" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=26543"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">org.eclipse.text.patch</span></b></a>

          <span class="bz_attach_extra_info">
              (55.04 KB,
                patch)

            <br>
            <a href="#attach_26543"
               title="Go to the comment associated with the attachment">2005-08-26 13:03 EDT</a>,

            <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=26543&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=26543&amp;action=diff">Diff</a>
        </td>
      </tr>
      <tr id="a9" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=26544"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">org.eclipse.ui.workbench.texteditor.patch</span></b></a>

          <span class="bz_attach_extra_info">
              (2.19 KB,
                patch)

            <br>
            <a href="#attach_26544"
               title="Go to the comment associated with the attachment">2005-08-26 13:04 EDT</a>,

            <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=26544&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=26544&amp;action=diff">Diff</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="3">
        <span class="bz_attach_view_hide">
            <a href="#a0" onclick="return toggle_display(this);">Show
              Obsolete</a> (7)
            <a id="view_all" href="attachment.cgi?bugid=89599&amp;action=viewall&amp;hide_obsolete=1">View All</a>
        </span>
        <a href="attachment.cgi?bugid=89599&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>
<div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=89599&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>
  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="https://bugs.eclipse.org/bugs/js/comments.js?1463425338" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the 'comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>


<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table">
<tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">David Williams</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=david_williams&#64;acm.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=david_williams&#64;acm.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-03-30 11:58:37 EST
        </span>

      </div>




<pre class="bz_comment_text">Now that editors can (should?) use a common document from the FileBufferManager, 
I think the editor's undo management should be &quot;keyed&quot; off of that common
document (I'm guessing location?), instead of each instance of an editor. 

This is easiest to conceptualize by having multiple workbench windows open, with
an editor opened in each on a common resource ... but even in one workbench,
there's multiple ways of modifying a resource. 

In WTP, we've found this to be user's expecation that undo/redo be based on the
resource the are modifing (not based on a particular UI widget or method of
interaction. 

Plus, in WTP, -- to change this undo behavior -- is one of the major reasons we
have to subclass SourceViewer, etc.

So ... thought'd I'd open this &quot;bug&quot; for comment, to see if there was
fundamental  differences in philosophy, or just a matter of who implements what
when. 

Thanks.</pre>
    </div>

    <div id="c1" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dani Megert</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=daniel_megert&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=daniel_megert&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-04-08 08:35:42 EDT
        </span>

      </div>




<pre class="bz_comment_text">David, for me this works, i.e. if I open the same document in two windows (or as
of today ;-) in the same window, type in one editor, go to the other and then
undo, it undoes the last change applied to the document.

Or did you think of another scenario?</pre>
    </div>

    <div id="c2" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">David Williams</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=david_williams&#64;acm.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=david_williams&#64;acm.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-04-08 09:15:58 EDT
        </span>

      </div>




<pre class="bz_comment_text">Thanks Dani [same document, same window ... wow, I can't wait to see what else
we need to catch up with -- or get for free!]

What I'm thinking of needs one more step. If modication is made in editor A,
then  in editor B, you pick &quot;undo x&quot;, then its current undo stack says &quot;redo x&quot;
to ... well, redo the operation on the document. But editor A, to redo the 
modification made to the document (via undo-operation operation in B), the user
needs to pick &quot;undo x&quot;. I think conceptually its because the editors considers
the two text changes as different things, but from the shared document's point
of view, they are the same thing. And, for our users also the same thing (and,
in admittedly more complicated scenerios) they think of it in terms of changes
to the shared document/resource/object they are working on -- the history of the
document, in other words, not the history of the particular UI that happened to
make the change. 

Thanks for any insights. 
</pre>
    </div>

    <div id="c3" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Michael Van Meekeren</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=michaelvanmeekeren&#64;yahoo.ca" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=michaelvanmeekeren&#64;yahoo.ca" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-04-29 15:04:05 EDT
        </span>

      </div>




<pre class="bz_comment_text">I found the last comment a little hard to parse.  

So you're saying with two editors on the same file open in two windows I can
make a change in either editor and I see the Undo option available in both
editors and when I undo in either it has the same effect.  But after an undo,
only the editor (or window) where I performed the undo will show redo, the other
editor shows undo.

If this is true then I agree this seems inconsistent at best.</pre>
    </div>

    <div id="c4" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-04-29 17:29:31 EDT
        </span>

      </div>




<pre class="bz_comment_text">I think I understand the comment.  He is saying it's not enough for the two 
editors on a single document to remain in sync, but that once a user 
performs &quot;Undo typing&quot; (let's call it Undo typing of &quot;XYZ&quot;) in one of those 
editors, both of those editors should show &quot;Redo typing&quot; in their menus, and 
both of those choices should redo the typing of &quot;XYZ&quot;.  In effect, the editors 
share the same undo history.

Is this what you mean, David?

The undo framework would theoretically allow this if each editor had the same 
undo context, but currently each undo manager is set up with its own private 
(per-editor) context.  If the undo context was shared between them, the 
behavior David describes would be possible.  From the point of view of the undo 
framework it's a matter of what the users want/expect.  Both are possible.

But to be honest, I'm not sure if the current DefaultUndoManager implementation 
in JFace text would correctly support it.  It might work for free or it might 
be a lot of work.  Would have to try it.  I could investigate this if there's 
consensus that it should be pursued.</pre>
    </div>

    <div id="c5" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">David Williams</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=david_williams&#64;acm.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=david_williams&#64;acm.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-04-29 20:59:32 EDT
        </span>

      </div>




<pre class="bz_comment_text">Yes, Michael and Susan, I think you are both parsing my obtuse comments correctly. 

I just tried with &quot;open again&quot; in with M7 stream I-0426 (and placed opened
editors side by side), and honestly, I could not even figure out how to write
down an confusing example because it was so confusing. But, definitely undo in
one becomes redo in other which once again becomes undo in the other ... or
something. 

And Michael's comment of &quot;this seems inconsistent at best&quot; is especially
accurate. At best it is confusing. At worst it is an architectural flaw that
&quot;common undo&quot;  is not so common. I apologize for not being able to investigate
deeper and offer concrete suggestions, but my suspicion is there is not so much
a &quot;common undo api&quot; as there is a &quot;common hidden api&quot; that every client has to
know the secret of and re-implement to work as expected. [And, that's not to
dimenish all the hard work that's gone on here, just to re-state that is a hard
problem to solve, and you have a good start -- but this simple case of documents
and editors seems, to me, to be the first apparent failure of implementing it
correctly]. 
</pre>
    </div>

    <div id="c6" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-04-30 19:30:03 EDT
        </span>

      </div>




<pre class="bz_comment_text">My comment was to explain that it has not been a goal to date to share undo 
stacks between editors on the same document but it is technically possible in 
the new undo framework.  

The reason it is not working as you expect is because text undo uses the common 
framework, but defines its own private undo context for each editor.  Changing 
it is a matter of using the same undo context for the same document and testing 
out the implementation of DefaultUndoManager to see if it works for free (it 
might) or requires some changes.  There's no hidden magic, it should be 
possible today but has not been set up that way or tested.
</pre>
    </div>

    <div id="c7" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">David Williams</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=david_williams&#64;acm.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=david_williams&#64;acm.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-04-30 20:54:03 EDT
        </span>

      </div>




<pre class="bz_comment_text">Thanks Susan, your phrase of &quot;private undo context&quot; is undoubtedly more accurate
and less loaded than my &quot;hidden api&quot; phrase, and I think you've stated the issue
well. 

The concern I was trying to voice (which probably goes beyond this specific
bugzilla, which is just one visible instance of my concern) is if something as
common as documents and editors have a &quot;private undo context&quot; then Eclipse as a
platform does not have a &quot;common undo&quot; story or design (and that's no reflection
on your framework ... mabye its a policy or larger design issue that has yet to
be coordinated -- I'm not sure how &quot;Eclipse as a platform&quot; plans to handle
&quot;common undo&quot;).

I hope my appreciation of your work and the sincerity of my confusion comes
across in these written notes ... and, I'm sure its only a lack of my
understanding and imagination that can not grasp how an editor and a refactoring
can &quot;share&quot; undo (one of your prime use caess), but two editors currently do not. </pre>
    </div>

    <div id="c8" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-01 17:57:38 EDT
        </span>

      </div>




<pre class="bz_comment_text">Hi, again David.
I think the best place to voice concerns about the general undo strategy/policy 
in Eclipse is in <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - [Undo] - Add more undo support in Eclipse"
   href="show_bug.cgi?id=86753">bug #86753</a>.  There is not a coordinated story right now, as 
most of the time we've put into it has been getting the existing undo clients 
(text, refactoring) integrated.  There is a lot to decide about the undo 
strategy overall and it looks like that is going to have to happen in the 3.2 
time frame.  At any rate, your comments/ideas about overall strategy, what 
should be undoable, etc. etc. would be much appreciated in <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - [Undo] - Add more undo support in Eclipse"
   href="show_bug.cgi?id=86753">bug #86753</a>.

We'll keep this bug open as the request to have text editors share undo when 
they share a document.  

Dani - if you want to punt this bug to me for experimentation, you can do so, 
but it won't be right away until other bugs are dealt with.  As I've said, it 
might &quot;just work&quot; but I've just been too tied up to try it.</pre>
    </div>

    <div id="c9" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Randy Hudson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=hudsonr&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=hudsonr&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-09 11:03:17 EDT
        </span>

      </div>




<pre class="bz_comment_text">Basically, you can go back and forth between two editors on the same document, 
and keep undoing forever (which is really just cycling forward and backward 
through the user's real modifications).

However strange, I just verified this is consistent with 3.0.1 behavior.</pre>
    </div>

    <div id="c10" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dani Megert</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=daniel_megert&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=daniel_megert&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-05-17 09:19:53 EDT
        </span>

      </div>




<pre class="bz_comment_text">The goal for 3.1 was to provide the basis for an unified undo history and move
existing code and functionality to it. This has been delivered by the new
operation history API and has been validated by implementing text editors and
refactoring on top of this new infrastructure . The missing piece i.e. sharing
the undo context per document  - as correctly reported in this PR - this can be
implemented with the operation history API but requires new API in Platform Text
that allows to share the undo context for a document. Though we could hard code
this into the DefaultUndoManager I think making this explicit and let clients
decide is the right approach. The shared document is managed by the File Buffers
plug-in, but this isn't a good place for a shared undo context because undo is
introduced by org.eclipse.jface.text in a layer that doesn't know about File
Buffers. Offering shared undo context per document is something we want to
provide for 3.2.</pre>
    </div>

    <div id="c11" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dani Megert</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=daniel_megert&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=daniel_megert&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-13 11:22:48 EDT
        </span>

      </div>




<pre class="bz_comment_text">*** <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - undo: editor history of two editor on the same file not in sync"
   href="show_bug.cgi?id=99642">Bug 99642</a> has been marked as a duplicate of this bug. ***</pre>
    </div>

    <div id="c12" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dani Megert</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=daniel_megert&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=daniel_megert&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-16 07:02:38 EDT
        </span>

      </div>




<pre class="bz_comment_text">*** <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - [misc] Inconsistent undo with multiple windows"
   href="show_bug.cgi?id=66926">Bug 66926</a> has been marked as a duplicate of this bug. ***</pre>
    </div>

    <div id="c13" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-14 15:25:39 EDT
        </span>

      </div>




<pre class="bz_comment_text">*** <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Undo stack out of sync when multiple editors are open on same file"
   href="show_bug.cgi?id=103855">Bug 103855</a> has been marked as a duplicate of this bug. ***</pre>
    </div>

    <div id="c14" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-19 18:15:33 EDT
        </span>

      </div>




<pre class="bz_comment_text">I've done a little experimenting on this one, and it's a bit more complicated 
than simply sharing the undo context between undo managers.

The current JFace text undo manager is assigned per viewer.  It responds to 
document content changes by building an undoable operation (TextCommand) 
describing the change.  But if we change things so that each editor still has 
its own undo manager, and they share the undo context, then each undo manager 
will create a separate undoable operation when it receives a document change 
notification.  This results in duplicate operations in the shared context.  
There are probably ways to work around this (recognize duplicate changes) but 
that would be hacking around the problem.  I think it makes more sense to 
create the undo manager per document, and assign a shared undo manager (with a 
shared context) to the viewer.  This will also help in managing the life cycle 
of the undo context, since you don't want viewer-based undo managers disposing 
of an undo context that may be used by someone else.

Dani - any comments on this?  I have time to investigate further, but am 
curious on your thoughts regarding a shared undo manager.  </pre>
    </div>

    <div id="c15" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Hofmann</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse&#64;tom.hofmann.name" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse&#64;tom.hofmann.name" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-20 03:20:42 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=89599#c14">comment #14</a>)
<span class="quote">&gt; There are probably ways to work around this (recognize duplicate changes) but 
&gt; that would be hacking around the problem.  I think it makes more sense to 
&gt; create the undo manager per document, and assign a shared undo manager (with a 
&gt; shared context) to the viewer. </span >

Having an undo manager per model object (document) is quite certainly the right
way. 

Probably not the right forum... but:

It might be worth thinking about whether o.e.text needs a UI agnostic *editing
model* besides the already existing *text model* (IDocument) - it would offer
services currently managed by the viewer but really not depending on the
presentation. Things that come to my mind:

- compound changes (which are important not just for undo)
- undo (IRewriteTarget)
[- find/replace (IFindReplaceTarget)]
- patch documents: recording a minimal edit script while freely modifying a
document. The underlying document is not changed until the script is applied,
but one can get a 'patched' view of what the document would look like if it were.

I filed <a class="bz_bug_link 
          bz_status_CLOSED  bz_closed"
   title="CLOSED WONTFIX - [api] editing model for org.eclipse.text"
   href="show_bug.cgi?id=104461">bug 104461</a> to investigate this.</pre>
    </div>

    <div id="c16" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dani Megert</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=daniel_megert&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=daniel_megert&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-20 03:32:01 EDT
        </span>

      </div>




<pre class="bz_comment_text">I also had an undo manager per document in mind as backup. If this is the path
to follow we
- have to make sure the current undo manager uses the new one and works as is i.e.
  clients don't have to change their code and switch to the new undo manager
- have to put it into org.eclipse.text so that headless plug-ins like file buffers
  can profit from this as well</pre>
    </div>

    <div id="c17" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-20 12:58:43 EDT
        </span>

      </div>




<pre class="bz_comment_text">If we go down the path of one undo manager, it means we are not giving clients 
a choice as to whether the undo model is shared across editors on the same 
document (see <a href="show_bug.cgi?id=89599#c10">comment #10</a>).  However I still think it's the preferred way to 
implement this behavior.  

What I see happening is that the current undo manager would be largely a 
wrapper into the document's undo manager.  Note that the current undo manager 
does use mouse down and arrow key presses to commit undo changes, so there 
would still have to be a way to do programmatic commits into the document's 
undo manager.

The rest of the API seems as if it could be supported as before.  There would 
be life cycle differences since the viewer's undo manager would be largely 
meaningless until the viewer it connected to had its document.  (The document 
is null on connect in today's implementation).

Side question:  would moving to this strategy also help us solve <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - [Undo] [implementation] Rename Type/CompilationUnit flushes the editor undo stack"
   href="show_bug.cgi?id=93955">bug #93955</a>?  
(transferring undo context after rename).  When a CU is renamed, does the 
document get regenerated?  If the document stays the same, this bug would be 
fixed &quot;for free.&quot;

How do you want to proceed?  I have cycles to separate out the undo manager but 
would feel better if someone wrote stubs for the API and classes in the text 
world so that things are in the right place.</pre>
    </div>

    <div id="c18" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dani Megert</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=daniel_megert&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=daniel_megert&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-08 11:36:10 EDT
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt;I've done a little experimenting on this one, and it's a bit more complicated 
&gt;than simply sharing the undo context between undo managers.</span >
Agree, but I guess the other solution might even even more complex ;-)

<span class="quote">&gt;If we go down the path of one undo manager, it means we are not giving clients 
&gt;a choice as to whether the undo model is shared across editors on the same 
&gt;document (see <a href="show_bug.cgi?id=89599#c10">comment #10</a>).</span >
That's already the case now (sort of): if two editors use a shared document then
the currently different undo managers undo the changes on the shared document
already i.e. they are somehow connected. If we still want to support this it
could be a configuration of the current DefaultUndoManager.

<span class="quote">&gt;Side question:  would moving to this strategy also help us solve <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - [Undo] [implementation] Rename Type/CompilationUnit flushes the editor undo stack"
   href="show_bug.cgi?id=93955">bug #93955</a>?  </span >
It depends at which level the new undo manager would be and whether it knows
about resources or file names and whether the document is even the same after
the rename.

<span class="quote">&gt;How do you want to proceed?  I have cycles to separate out the undo manager but 
&gt;would feel better if someone wrote stubs for the API and classes in the text 
&gt;world so that things are in the right place.</span >
The API has to come from the one who works on the item. It makes no sense that
we provide a stub if we're (currently) not directly working on this problem.
Please go ahead and make a prototype that shows the separation of the undo
manager (shared one probably in o.e.text) and attach a patch to this PR or
transfer the work item back to us.</pre>
    </div>

    <div id="c19" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-08 16:20:31 EDT
        </span>

      </div>




<pre class="bz_comment_text">I'm working on this one right now.  My current approach (for initial simplicity 
and flexibility):
- keep DefaultUndoManager as is for now.
- introduce a new shared undo manager in o.e.jface.text that is largely a 
wrapper into the document undo manager
- implement the DocumentUndoManager in o.e.text

Once the shared undo manager passes the same test suites, I will attach the 
patch and return this bug to Platform Text.  At that point you should be able 
to massage the API as you see fit and decide how you are deciding which undo 
manager to create (preference driven or switch to new model).  

Note that keeping both styles will introduce dual maintenance in the long run 
(bugs in the original DefaultUndoManager may have similar variants in the 
document undo manager.)</pre>
    </div>

    <div id="c20" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tom Hofmann</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse&#64;tom.hofmann.name" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse&#64;tom.hofmann.name" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-15 06:10:53 EDT
        </span>

      </div>




<pre class="bz_comment_text">One thing about the UndoManager API: 

IMO, IUndoManager has a serious limitation: it relies on clients to correctly
begin/end compound changes. This becomes a problem in the case where client A
only detects the end of its compound change when client B starts editing the
document (and has therefore already started its compound change).

I believe that compound changes should be keyed, so that the undo manager knows
exactly which compound change is being ended when it receives a
endCompoundChange message. This would allow the manager to detect misbehaving
clients and to handle the case of overlapping compound changes (which could be
trivially resolved if there are no actual document modifications while the two
changes overlap, which happens if client A ends its change when it receives a
documentAboutToBeChanged message).

An UndoManager API could either return an opaque token in beginChange that the
client uses when ending an change:

class UndoManager {
  Token beginCompoundChange();
  void endCompoundChange(Token token);
}

Or beginChange could return a change object which the client could cancel directly:

class CompoundChange {
  void end();
}

class UndoManager {
  CompoundChange beginCompoundChange();
}
</pre>
    </div>

    <div id="c21" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-15 15:45:05 EDT
        </span>

      </div>




<pre class="bz_comment_text">I am attaching patches for a prototype of a SharedUndoManager and transferring 
this bug back to Platform-Text for comment.  

The following comments are intended to be read when the patches are being 
examined:

Functionality Differences:
- when multiple editors are open on the same document, they now share undo 
history.  For example, if the user has made several undoable changes in file A 
and then opens another editor on file A, the complete history is available in 
both.  Undoing in one will cause the &quot;Redo&quot; for that operation to appear in 
both editors.  I think this achieves the desired expectation
- However, when an undo or redo occurs in one editor, the effect of the change 
is selected and revealed in BOTH editors.  This is different than before, when 
the undo was not tied together.  You could undo in one without affecting the 
visibility on the other.  Now that undo executes in both editors, both will 
select and reveal the undo.

API Notes
- IDocumentExtension5 defines a document that supplies an undo manager, 
IDocumentUndoManager
- IDocumentUndoManager defines an undo manager for a document, and the 
corresponding implementation, DocumentUndoManager is based on the 3.1 non-
viewer parts of DefaultUndoManager.  The intention is that this undo manager 
does NOT have to implement IUndoManager, but rather this is a new style of 
undo manager related to document models, which assumes that the client can use 
the undo context and operations history API to perform the undo and redo.  
Thus the API is leaner than IUndoManager.
- The presence of IDocumentUndoManager and its implementation in the 
org.eclipse.text plug-in adds dependencies to this plug-in (the same 
dependencies introduced onto org.eclipse.jface.text when the operations 
history was integrated).  
- Re: compound changes (Tom's <a href="show_bug.cgi?id=89599#c20">comment #20</a>):  If we believe the potential 
misuse of begin/endCompoundChange is increased by sharing an undo manager, we 
could choose to implement a keyed compound change in IDocumentUndoManager 
rather than change IUndoManager.  If this problem is already arising in 3.1, 
then it is probably best to change it in IUndoManager and forward into 
IDocumentUndoManager.  I did not attempt to address this issue in the 
prototype, as I want to demonstrate compatibility with 3.1.
- SharedDocumentUndoManager is API equivalent to DefaultUndoManager.  It maps 
its API to the underlying document undo manager.  The big decision here is 
whether we should retain both classes (so that users can choose which style of 
undo to use) or replace the old DefaultUndoManager with the implementation 
defined in SharedDocumentUndoManager.  Due to the complexity of the undo 
managers, my preference would be to eventually replace DefaultUndoManager with 
SharedDocumentUndoManager.  The patches use a bogus local flag to decide which 
undo manager to use (left this way for testing/comparing).  The JFace Text 
Undo tests and the JDT UI leak tests were patched to test both implementations 
for now.
</pre>
    </div>

    <div id="c22" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c22">Comment 22</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-15 15:55:46 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=26122&amp;action=diff" name="attach_26122" title="org.eclipse.text.patch">attachment 26122</a> <a href="attachment.cgi?id=26122&amp;action=edit" title="org.eclipse.text.patch">[details]</a></span>
org.eclipse.text.patch

patches to eclipse text - IDocumentUndoManager and implementation classes</pre>
    </div>

    <div id="c23" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c23">Comment 23</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-15 15:56:43 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=26123&amp;action=diff" name="attach_26123" title="org.eclipse.jface.text.patch">attachment 26123</a> <a href="attachment.cgi?id=26123&amp;action=edit" title="org.eclipse.jface.text.patch">[details]</a></span>
org.eclipse.jface.text.patch

patches to jface text - SharedDocumentUndoManager which could replace
DefaultUndoManager</pre>
    </div>

    <div id="c24" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c24">Comment 24</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-15 15:58:13 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=26124&amp;action=diff" name="attach_26124" title="org.eclipse.ui.workbench.texteditor.patch">attachment 26124</a> <a href="attachment.cgi?id=26124&amp;action=edit" title="org.eclipse.ui.workbench.texteditor.patch">[details]</a></span>
org.eclipse.ui.workbench.texteditor.patch

AbstractTextEditor - changes related to new life-cycle of undo context</pre>
    </div>

    <div id="c25" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c25">Comment 25</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-15 15:59:24 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=26125&amp;action=diff" name="attach_26125" title="org.eclipse.ui.editors.patch">attachment 26125</a> <a href="attachment.cgi?id=26125&amp;action=edit" title="org.eclipse.ui.editors.patch">[details]</a></span>
org.eclipse.ui.editors.patch

source viewer configuration - creates new style undo manager.</pre>
    </div>

    <div id="c26" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c26">Comment 26</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-15 15:59:53 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=26126&amp;action=diff" name="attach_26126" title="org.eclipse.jdt.ui.tests.patch">attachment 26126</a> <a href="attachment.cgi?id=26126&amp;action=edit" title="org.eclipse.jdt.ui.tests.patch">[details]</a></span>
org.eclipse.jdt.ui.tests.patch

updated leak test suite</pre>
    </div>

    <div id="c27" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c27">Comment 27</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-15 16:00:24 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=26127&amp;action=diff" name="attach_26127" title="org.eclipse.jface.text.tests.patch">attachment 26127</a> <a href="attachment.cgi?id=26127&amp;action=edit" title="org.eclipse.jface.text.tests.patch">[details]</a></span>
org.eclipse.jface.text.tests.patch

updated jface text undo manager test suite</pre>
    </div>

    <div id="c28" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c28">Comment 28</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dani Megert</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=daniel_megert&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=daniel_megert&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-26 10:06:30 EDT
        </span>

      </div>




<pre class="bz_comment_text">Thanks for the patches Susan.
I did not have time yet to look into them but have a first comment about the
functional difference: this is not a valid option. If we have two different
editors (i.e. views) on the same model and change the model through one of them
then we must only updated the minimum. Changing the context i.e. current
selection is not an option unless of course that selection itself is included in
the change.

How tight are your patches tied to the new behavior?</pre>
    </div>

    <div id="c29" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c29">Comment 29</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-26 12:11:12 EDT
        </span>

      </div>




<pre class="bz_comment_text">This behavior is not too tightly bound to the new model, it was just expedient 
to preserve the old undo manager behavior.  

To change it so that the only the originating viewer does the select/reveal, 
the viewer's undo manager needs to know which viewer triggered the undo/redo.  
The mechanism is there (the adaptable passed by the action handler to the 
operation history).  In order for the undo manager to make a viewer-based 
comparison, the editor needs to provide API (or more likely an adapter) that 
provides its text viewer, so that the action handler can provide this info on 
request when the undo manager makes its comparison.</pre>
    </div>

    <div id="c30" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c30">Comment 30</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-26 12:52:41 EDT
        </span>

      </div>




<pre class="bz_comment_text">It was pretty simple to fix the select and reveal issue.  
You must have the org.eclipse.ui.workbench from HEAD to get the 
OperationHistoryActionHandler fix in <a class="bz_bug_link 
          bz_status_VERIFIED  bz_closed"
   title="VERIFIED FIXED - [Undo] - action handlers should refer adapter requests to their part"
   href="show_bug.cgi?id=108144">bug #108144</a> before it will work.  

Attaching new patches.  I had to change AbstractTextEditor to provide an 
adapter for its text viewer.  The other changes were to ensure the IAdaptable 
is passed all the way through the event flow, which it should have been in the 
first place.</pre>
    </div>

    <div id="c31" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c31">Comment 31</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Bob Foster</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=bob&#64;objfac.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=bob&#64;objfac.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-26 12:59:49 EDT
        </span>

      </div>




<pre class="bz_comment_text">I must be missing something. Was it a problem that all viewers reset their
selection, or simply an implementation problem, e.g., the undo history doesn't
have the selection in terms of all possible viewers?</pre>
    </div>

    <div id="c32" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c32">Comment 32</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-26 13:02:54 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=26542&amp;action=diff" name="attach_26542" title="org.eclipse.jface.text.patch">attachment 26542</a> <a href="attachment.cgi?id=26542&amp;action=edit" title="org.eclipse.jface.text.patch">[details]</a></span>
org.eclipse.jface.text.patch</pre>
    </div>

    <div id="c33" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c33">Comment 33</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-26 13:03:34 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=26543&amp;action=diff" name="attach_26543" title="org.eclipse.text.patch">attachment 26543</a> <a href="attachment.cgi?id=26543&amp;action=edit" title="org.eclipse.text.patch">[details]</a></span>
org.eclipse.text.patch</pre>
    </div>

    <div id="c34" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c34">Comment 34</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-26 13:04:25 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=26544&amp;action=diff" name="attach_26544" title="org.eclipse.ui.workbench.texteditor.patch">attachment 26544</a> <a href="attachment.cgi?id=26544&amp;action=edit" title="org.eclipse.ui.workbench.texteditor.patch">[details]</a></span>
org.eclipse.ui.workbench.texteditor.patch</pre>
    </div>

    <div id="c35" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c35">Comment 35</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-26 13:22:10 EDT
        </span>

      </div>




<pre class="bz_comment_text">re: <a href="show_bug.cgi?id=89599#c31">comment #31</a>:  
Bob - Dani was saying that it was a problem for all viewers to respond with a 
select and reveal on undo.  When there are multiple open viewers/editors on 
the same document, typing or making changes in one is reflected in the content 
of the others, but the user's context (selection, cursor position, scrolling 
position, etc.) is never changed.  My original patches were violating this.

The problem was that only the viewer originating the undo should perform a 
select and reveal.  What was missing was a way for the viewer's undo manager 
to know which viewer triggered the undo, so it could figure out whether it 
should select and reveal.  That is what today's patches fixed.  </pre>
    </div>

    <div id="c36" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c36">Comment 36</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-09-01 13:24:57 EDT
        </span>

      </div>




<pre class="bz_comment_text">Dani - please see the patches attached to <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - [Undo] [implementation] Rename Type/CompilationUnit flushes the editor undo stack"
   href="show_bug.cgi?id=93955">bug #93955</a> before examining these 
patches in detail.  The inner types of DocumentUndoManager had to be promoted 
to support the rename CU scenario, causing a significant bit of refactoring of 
these patches.  I will attach all relevant patches to <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - [Undo] [implementation] Rename Type/CompilationUnit flushes the editor undo stack"
   href="show_bug.cgi?id=93955">bug #93955</a> for 
completeness.</pre>
    </div>

    <div id="c37" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c37">Comment 37</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-09-01 14:12:25 EDT
        </span>

      </div>




<pre class="bz_comment_text">Comment on <span class="bz_obsolete"><a href="attachment.cgi?id=26125&amp;action=diff" name="attach_26125" title="org.eclipse.ui.editors.patch">attachment 26125</a> <a href="attachment.cgi?id=26125&amp;action=edit" title="org.eclipse.ui.editors.patch">[details]</a></span>
org.eclipse.ui.editors.patch

see updated patches in <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - [Undo] [implementation] Rename Type/CompilationUnit flushes the editor undo stack"
   href="show_bug.cgi?id=93955">bug #93955</a></pre>
    </div>

    <div id="c38" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c38">Comment 38</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-09-01 14:13:29 EDT
        </span>

      </div>




<pre class="bz_comment_text">Comment on <span class="bz_obsolete"><a href="attachment.cgi?id=26543&amp;action=diff" name="attach_26543" title="org.eclipse.text.patch">attachment 26543</a> <a href="attachment.cgi?id=26543&amp;action=edit" title="org.eclipse.text.patch">[details]</a></span>
org.eclipse.text.patch

see updated patch in <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - [Undo] [implementation] Rename Type/CompilationUnit flushes the editor undo stack"
   href="show_bug.cgi?id=93955">bug #93955</a></pre>
    </div>

    <div id="c39" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c39">Comment 39</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-09-01 14:14:20 EDT
        </span>

      </div>




<pre class="bz_comment_text">Comment on <span class="bz_obsolete"><a href="attachment.cgi?id=26126&amp;action=diff" name="attach_26126" title="org.eclipse.jdt.ui.tests.patch">attachment 26126</a> <a href="attachment.cgi?id=26126&amp;action=edit" title="org.eclipse.jdt.ui.tests.patch">[details]</a></span>
org.eclipse.jdt.ui.tests.patch

see updated patch in <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - [Undo] [implementation] Rename Type/CompilationUnit flushes the editor undo stack"
   href="show_bug.cgi?id=93955">bug #93955</a></pre>
    </div>

    <div id="c40" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c40">Comment 40</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-09-01 14:14:45 EDT
        </span>

      </div>




<pre class="bz_comment_text">Comment on <span class="bz_obsolete"><a href="attachment.cgi?id=26544&amp;action=diff" name="attach_26544" title="org.eclipse.ui.workbench.texteditor.patch">attachment 26544</a> <a href="attachment.cgi?id=26544&amp;action=edit" title="org.eclipse.ui.workbench.texteditor.patch">[details]</a></span>
org.eclipse.ui.workbench.texteditor.patch

see updated patch in <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - [Undo] [implementation] Rename Type/CompilationUnit flushes the editor undo stack"
   href="show_bug.cgi?id=93955">bug #93955</a></pre>
    </div>

    <div id="c41" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c41">Comment 41</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Susan McCourt </span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=susan&#64;rapicorp.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=susan&#64;rapicorp.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-12-10 20:55:55 EST
        </span>

      </div>




<pre class="bz_comment_text">Just a reminder that this involves API change and must be settled during M5.</pre>
    </div>

    <div id="c42" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c42">Comment 42</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dani Megert</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=daniel_megert&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=daniel_megert&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-01-24 06:57:38 EST
        </span>

      </div>




<pre class="bz_comment_text">*** <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - [Undo] [implementation] Rename Type/CompilationUnit flushes the editor undo stack"
   href="show_bug.cgi?id=93955">Bug 93955</a> has been marked as a duplicate of this bug. ***</pre>
    </div>

    <div id="c43" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c43">Comment 43</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dani Megert</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=daniel_megert&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=daniel_megert&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-01-24 06:59:17 EST
        </span>

      </div>




<pre class="bz_comment_text">First cut has been released to HEAD, in builds &gt;= I20060124-0800. See <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - [Undo] [implementation] Rename Type/CompilationUnit flushes the editor undo stack"
   href="show_bug.cgi?id=93955#c40">bug 93955, comment 40</a> for a more detailed updated.</pre>
    </div>

    <div id="c44" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=89599#c44">Comment 44</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dani Megert</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=daniel_megert&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=daniel_megert&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-01-30 09:17:14 EST
        </span>

      </div>




<pre class="bz_comment_text">Fixed in HEAD.
Available in builds &gt;= N20060128-0010.</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=89599">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=89599">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=89599">Clone This Bug</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>

<br>
</div>

    <div id="footer">
      <div class="intro"></div>
<ul id="useful-links">
  <li id="links-actions"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_bottom" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_bottom");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_bottom" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_bottom"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_bottom">
  <span class="separator">| </span>
  <a id="login_link_bottom" href="show_bug.cgi?id=89599&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_bottom')">Log In</a>

  <form action="show_bug.cgi?id=89599" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_bottom">
    <input id="Bugzilla_login_bottom" required
           name="Bugzilla_login" class="bz_login"
        placeholder="Login">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_bottom" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_bottom">
    <a href="#" onclick="return hide_mini_login_form('_bottom')">[x]</a>
  </form>
</li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
</ul>
  </li>

  




  
</ul>

      <div class="outro"></div>
    </div>

  </body>
</html>