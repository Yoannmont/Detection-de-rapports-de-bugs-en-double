<!DOCTYPE html>
<html lang="en">
  <head>
    <title>203385 &ndash; Indexer doesn't recognize &quot;usingT::S;&quot; in header file</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link href="https://bugs.eclipse.org/bugs/data/assets/03c4bb46b12126a79867f9a9f5323634.css?1593441374" rel="stylesheet" type="text/css">



    
<script type="text/javascript" src="https://bugs.eclipse.org/bugs/data/assets/a7c2f3a028f17a9aa60f56dc9d6e732d.js?1593441374"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/bugs',
                maxusermatches: 10
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    "You must enter a Description for this attachment.",
                component_required:
                    "You must select a Component for this bug.",
                description_required:
                    "You must enter a Description for this bug.",
                short_desc_required:
                    "You must enter a Summary for this bug.",
                version_required:
                    "You must select a Version for this bug."
            }
              , api_token: ''
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null,
                             "203385 – Indexer doesn\'t recognize \"usingT::S;\" in header file",
                             "show_bug.cgi?id=203385" );
        document.title = "203385 – Indexer doesn\'t recognize \"usingT::S;\" in header file";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "203385 – Indexer doesn\'t recognize \"usingT::S;\" in header file", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();

    });
    // -->
    </script>
<script type="text/javascript" src="https://bugs.eclipse.org/bugs/data/assets/daf5e0fb6826e6a35280e622913f0c4a.js?1593441374"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico">
  </head>

  <body 
        class="bugs-eclipse-org-bugs
                 bz_bug
                 bz_status_RESOLVED
                 bz_product_CDT
                 bz_component_cdt-parser
                 bz_bug_203385 yui-skin-sam">

  <div id="header"><!-- 1.0@bugzilla.org -->





<!--  START OF SOLSTICE HEADER -->
 <link rel="stylesheet" type="text/css" href="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/stylesheets/vendor/cookieconsent/cookieconsent.min.css" />
 <script src="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/vendor/cookieconsent/default.min.js"></script>
 <style type="text/css">
    @import url('https://www.eclipse.org/eclipse.org-common/themes/solstice/public/stylesheets/barebone.min.css')
    </style>
    <script
      src="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/barebone.min.js">
    </script><header role="banner" class="barebone-layout thin-header padding-top-5 padding-bottom-5"  id="header-wrapper">
  <div class="container-fluid reset">
    <div class="row-fluid" id="header-row">
            <div class="col-sm-8 col-md-6 col-lg-4" id="header-left">
        <div class="wrapper-logo-default"><a href="https://www.eclipse.org/"><img class="logo-eclipse-default img-responsive hidden-xs" alt="logo" src="https://bugs.eclipse.org/eclipse.org-common/themes/solstice/public/images/logo/eclipse-426x100.png"/></a></div>
      </div>            <div class="col-sm-16 col-md-18 col-lg-20" id="main-menu-wrapper">
  <div class="navbar yamm" id="main-menu">
    <div id="navbar-collapse-1" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li class="visible-thin"><a href="https://www.eclipse.org/downloads/" target="_self">Download</a></li><li><a href="https://www.eclipse.org/users/" target="_self">Getting Started</a></li><li><a href="https://www.eclipse.org/membership/" target="_self">Members</a></li><li><a href="https://www.eclipse.org/projects/" target="_self">Projects</a></li>                  <li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Community <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="http://marketplace.eclipse.org">Marketplace</a></li><li><a href="http://events.eclipse.org">Events</a></li><li><a href="http://www.planeteclipse.org/">Planet Eclipse</a></li><li><a href="https://www.eclipse.org/community/eclipse_newsletter/">Newsletter</a></li><li><a href="https://www.youtube.com/user/EclipseFdn">Videos</a></li></ul></li><li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Participate <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="https://bugs.eclipse.org/bugs/">Report a Bug</a></li><li><a href="https://www.eclipse.org/forums/">Forums</a></li><li><a href="https://www.eclipse.org/mail/">Mailing Lists</a></li><li><a href="https://wiki.eclipse.org/">Wiki</a></li><li><a href="https://wiki.eclipse.org/IRC">IRC</a></li><li><a href="https://www.eclipse.org/contribute/">How to Contribute</a></li></ul></li><li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Working Groups <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="http://wiki.eclipse.org/Auto_IWG">Automotive</a></li><li><a href="http://iot.eclipse.org">Internet of Things</a></li><li><a href="http://locationtech.org">LocationTech</a></li><li><a href="http://lts.eclipse.org">Long-Term Support</a></li><li><a href="http://polarsys.org">PolarSys</a></li><li><a href="http://science.eclipse.org">Science</a></li><li><a href="http://www.openmdm.org">OpenMDM</a></li></ul></li>          <!-- More -->
          <li class="dropdown eclipse-more hidden-xs">
            <a data-toggle="dropdown" class="dropdown-toggle">More<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li>
                <!-- Content container to add padding -->
                <div class="yamm-content">
                  <div class="row">
                    <ul class="col-sm-8 list-unstyled"><li><p><strong>Community</strong></p></li><li><a href="http://marketplace.eclipse.org">Marketplace</a></li><li><a href="http://events.eclipse.org">Events</a></li><li><a href="http://www.planeteclipse.org/">Planet Eclipse</a></li><li><a href="https://www.eclipse.org/community/eclipse_newsletter/">Newsletter</a></li><li><a href="https://www.youtube.com/user/EclipseFdn">Videos</a></li></ul><ul class="col-sm-8 list-unstyled"><li><p><strong>Participate</strong></p></li><li><a href="https://bugs.eclipse.org/bugs/">Report a Bug</a></li><li><a href="https://www.eclipse.org/forums/">Forums</a></li><li><a href="https://www.eclipse.org/mail/">Mailing Lists</a></li><li><a href="https://wiki.eclipse.org/">Wiki</a></li><li><a href="https://wiki.eclipse.org/IRC">IRC</a></li><li><a href="https://www.eclipse.org/contribute/">How to Contribute</a></li></ul><ul class="col-sm-8 list-unstyled"><li><p><strong>Working Groups</strong></p></li><li><a href="http://wiki.eclipse.org/Auto_IWG">Automotive</a></li><li><a href="http://iot.eclipse.org">Internet of Things</a></li><li><a href="http://locationtech.org">LocationTech</a></li><li><a href="http://lts.eclipse.org">Long-Term Support</a></li><li><a href="http://polarsys.org">PolarSys</a></li><li><a href="http://science.eclipse.org">Science</a></li><li><a href="http://www.openmdm.org">OpenMDM</a></li></ul>                  </div>
                </div>
              </li>
            </ul>
          </li>
              </ul>
    </div>
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      </button>
      <div class="wrapper-logo-mobile"><a class="navbar-brand visible-xs" href="https://www.eclipse.org/"><img class="logo-eclipse-default-mobile img-responsive" alt="logo" src="https://bugs.eclipse.org/eclipse.org-common/themes/solstice/public/images/logo/eclipse-800x188.png"/></a></div>    </div>
  </div>
</div>
    </div>
  </div>
</header>
<!--  END OF SOLSTICE HEADER -->

    <div id="titles">
      <span id="title">Bugzilla &ndash; Bug&nbsp;203385</span>

        <span id="subtitle" class="subheader">Indexer doesn't recognize &quot;usingT::S;&quot; in header file</span>

        <span id="information" class="header_addl_info">Last modified: 2014-01-29 20:24:58 EST</span>
    </div>


    <div id="common_links"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_top" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_top");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_top" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_top"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_top">
  <span class="separator">| </span>
  <a id="login_link_top" href="show_bug.cgi?id=203385&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_top')">Log In</a>

  <form action="show_bug.cgi?id=203385" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_top">
    <input id="Bugzilla_login_top" required
           name="Bugzilla_login" class="bz_login"
        placeholder="Login">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_top" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_top">
    <a href="#" onclick="return hide_mini_login_form('_top')">[x]</a>
  </form>
</li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
</ul>
    </div>
  </div>

  <div id="bugzilla-body">


<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2014-01-29 20:24:58">
  <input type="hidden" name="id" value="203385">
  <input type="hidden" name="token" value="1629875358-m9DczX_KHjdy0KfOqv8-Nu_s_C54OdD2Bm_8a4OJ80U">
<div class="bz_short_desc_container edit_form">
     <a href="show_bug.cgi?id=203385"><b>Bug&nbsp;203385</b></a> <span id="summary_container" class="bz_default_hidden">
      - <span id="short_desc_nonedit_display">Indexer doesn't recognize &quot;usingT::S;&quot; in header file</span>
     </span>

    <div id="summary_input"><span class="field_label "
    id="field_label_short_desc">


  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>

</span>Indexer doesn't recognize &quot;usingT::S;&quot; in header file
    </div>
  </div>
  <script type="text/javascript">
    hideEditableField('summary_container',
                      'summary_input',
                      'summary_edit_action',
                      'short_desc',
                      'Indexer doesn\'t recognize \"usingT::S;\" in header file' );
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          FIXED
      </span>
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_alias">


  <a 
      title="A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#alias"
  >Alias:</a>

</th>
    <td>
        None
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components. Select a Classification to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >CDT

</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Tools

</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=CDT"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >cdt-parser

  (<a href="buglist.cgi?component=cdt-parser&amp;product=CDT&amp;bug_status=__open__"
      target="_blank">show other bugs</a>)
</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">


  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=fields.html#version"
  >Version:</a>

</th>

      <td>4.0 &#160; <a href="https://dev.eclipse.org/committers/bugs/bugz_manager.php"><img src="//dev.eclipse.org/small_icons/apps/accessories-text-editor.png" alt="Edit" title="Edit these values" /></a></td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">


  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>

</th>
      <td class="field_value">PC
        Windows XP
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label  accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>P3
       normal<span id="votes_container">
      with
      <a href="page.cgi?id=voting/bug.html&amp;bug_id=203385">1 
            vote</a>
    (<a href="page.cgi?id=voting/user.html&amp;bug_id=203385#vote_203385">vote</a>)
  </span>
      </td>
    </tr>

      <tr><th class="field_label "
    id="field_label_target_milestone">


  <a 
      title="The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it."
      class="field_help_link"
      href="page.cgi?id=fields.html#target_milestone"
  >Target Milestone:</a>

</th>
        <td>5.0 M6 &#160; <a href="https://dev.eclipse.org/committers/bugs/bugz_manager.php"><img src="//dev.eclipse.org/small_icons/apps/accessories-text-editor.png" alt="Edit" title="Edit these values" /></a></td>
      </tr>
          
          <tr><th class="field_label "
    id="field_label_assigned_to">


  <a 
      title="The person in charge of resolving the bug."
      class="field_help_link"
      href="page.cgi?id=fields.html#assigned_to"
  >Assignee:</a>

</th>
      <td><span class="vcard"><span class="fn">Sergey Prigogin</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.sprigogin&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.sprigogin&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
      </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_qa_contact">


  <a 
      title="The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#qa_contact"
  >QA Contact:</a>

</th>
      <td><span class="vcard">
</span>
      </td>
    </tr>
    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'cdt-parser-inbox\x40eclipse.org',
        'jonah\x40kichwacoders.com');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">


  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>

</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>

    <tr><th class="field_label "
    id="field_label_status_whiteboard">


  <a 
      title="Each bug has a free-form single line text entry box for adding tags and status information."
      class="field_help_link"
      href="page.cgi?id=fields.html#status_whiteboard"
  >Whiteboard:</a>

</th><td>  
  </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_keywords">


  <a 
      title="You can add keywords from a defined list to bugs, in order to easily identify and group them."
      class="field_help_link"
      href="describekeywords.cgi"
  >Keywords:</a>

</th>
  <td class="field_value "
      id="field_container_keywords" >

</td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          <tr>
    <th class="field_label">
      <label>Duplicates (2)</label>:
    </th>
    <td class="field_value">
      <span id="duplicates"><a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Parser/indexer doesn't handle using namespace directives in header files"
   href="show_bug.cgi?id=204046">204046</a> <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Problem with using directive is a header file"
   href="show_bug.cgi?id=207723">207723</a> 
      </span>
      (<a href="buglist.cgi?bug_id=204046,207723">view as bug list</a>)
    </td>
  </tr>
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Passing macros from the index to the parser"
   href="show_bug.cgi?id=209614">209614</a> 
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Problem with parsing of standard gcc header files"
   href="show_bug.cgi?id=175470">175470</a> 
  </td>
  </tr>

    <tr>
      <th>&nbsp;</th>

      <td id="show_dependency_tree_or_graph">
        Show dependency <a href="showdependencytree.cgi?id=203385&amp;hide_resolved=1">tree</a>

      </td>
    </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table>
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2007-09-13 19:33 EDT by <span class="vcard"><span class="fn">David Pickens</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=pickens&#64;arc.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=pickens&#64;arc.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2014-01-29 20:24 EST
      (<a href="show_activity.cgi?id=203385">History</a>)
    </td>
  
  </tr>
<tr>
      <th class="field_label">
        <label  accesskey="a">
          CC List:
        </label>
      </th>
      <td>9 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5" >
                <option value="cdtdoug">cdtdoug</option>
                <option value="eclipse.sprigogin">eclipse.sprigogin</option>
                <option value="emanuel">emanuel</option>
                <option value="hancock">hancock</option>
                <option value="jens.elmenthaler">jens.elmenthaler</option>
                <option value="mikekucera">mikekucera</option>
                <option value="mschorn.eclipse">mschorn.eclipse</option>
                <option value="rolando.martins">rolando.martins</option>
                <option value="sgifford">sgifford</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" >

</td>
    </tr> 

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>



        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts">
  <tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table">
  <tr id="a0">
    <th colspan="3" class="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_text_plain bz_patch">
        <td>
            <a href="attachment.cgi?id=82639"
               title="View the content of the attachment">
          <b>Proposed fix</b></a>

          <span class="bz_attach_extra_info">
              (15.68 KB,
                patch)

            <br>
            <a href="#attach_82639"
               title="Go to the comment associated with the attachment">2007-11-12 00:16 EST</a>,

            <span class="vcard"><span class="fn">Sergey Prigogin</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.sprigogin&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.sprigogin&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
                  <span title="Doug Schaefer">cdtdoug</span>:
                iplog-
                <br>
          </td>

        <td>
          <a href="attachment.cgi?id=82639&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=82639&amp;action=diff">Diff</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="3">
        <span class="bz_attach_view_hide">
            <a id="view_all" href="attachment.cgi?bugid=203385&amp;action=viewall">View All</a>
        </span>
        <a href="attachment.cgi?bugid=203385&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>
<div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=203385&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>
  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="https://bugs.eclipse.org/bugs/js/comments.js?1463425338" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the 'comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>


<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table">
<tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">David Pickens</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=pickens&#64;arc.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=pickens&#64;arc.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-09-13 19:33:22 EDT
        </span>

      </div>




<pre class="bz_comment_text">Build ID: I20070625-1500

Steps To Reproduce:
1. Create a header file with the following contents:
#ifndef HEADER_H_
#define HEADER_H_
namespace T {
    class S { };
};

using  T::S;
#endif /*HEADER_H_*/


2. Create a source file that includes the above header followed by a declaration that references &quot;S&quot;:

#include &quot;header.h&quot;
S *p;


3. Make sure Full Indexing is enabled. Rebuild index. Select &quot;S&quot; and attempt &quot;Open Declaration&quot; operation. The Indexer will fail to find the declaration of &quot;S&quot;.</pre>
    </div>

    <div id="c1" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Anton Leherbauer</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=aleherb+eclipse&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=aleherb+eclipse&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-09-21 03:34:00 EDT
        </span>

      </div>




<pre class="bz_comment_text">*** <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Parser/indexer doesn't handle using namespace directives in header files"
   href="show_bug.cgi?id=204046">Bug 204046</a> has been marked as a duplicate of this bug. ***</pre>
    </div>

    <div id="c2" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Rolando Martins</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=rolando.martins&#64;efacec.pt" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=rolando.martins&#64;efacec.pt" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-09-26 08:49:18 EDT
        </span>

      </div>




<pre class="bz_comment_text">Dont know if this help in solving this annoying bug, but I will five it a try.
If in the 2 step we use:

#include &quot;header.h&quot;
T::S *p;


then the indexer finds the declaration of &quot;S&quot;.
</pre>
    </div>

    <div id="c3" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Robert Hancock</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=hancock&#64;sedsystems.ca" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=hancock&#64;sedsystems.ca" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-09-26 11:06:48 EDT
        </span>

      </div>




<pre class="bz_comment_text">A &quot;using namespace T;&quot; in place of the &quot;using T::S;&quot; also exposes this problem. It appears that using directives inside of headers are just not handled properly.</pre>
    </div>

    <div id="c4" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Markus Schorn</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mschorn.eclipse&#64;gmx.at" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mschorn.eclipse&#64;gmx.at" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-10-29 04:38:14 EDT
        </span>

      </div>




<pre class="bz_comment_text">*** <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Problem with using directive is a header file"
   href="show_bug.cgi?id=207723">Bug 207723</a> has been marked as a duplicate of this bug. ***</pre>
    </div>

    <div id="c5" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sergey Prigogin</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.sprigogin&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.sprigogin&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-12 00:16:58 EST
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=82639&amp;action=diff" name="attach_82639" title="Proposed fix">attachment 82639</a> <a href="attachment.cgi?id=82639&amp;action=edit" title="Proposed fix">[details]</a></span>
Proposed fix

It turned out that &quot;using ns::name&quot; directive was not represented in the index. I've added PDOMCPPUsingDeclaration and CompositeCPPUsingDeclaration classes. The way &quot;using&quot; directive is modeled in PDOM is somewhat hacky, but I couldn't figure out anything better given the unusual API of ICPPUsingDeclaration. On my code base this patch reduced percentage of problems from 9.19% to 5.29%.

Doug, could you please take a look at this patch and let me know if you agree with the approach.</pre>
    </div>

    <div id="c6" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Markus Schorn</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mschorn.eclipse&#64;gmx.at" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mschorn.eclipse&#64;gmx.at" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-12 03:08:24 EST
        </span>

      </div>




<pre class="bz_comment_text">Sergey, I have been thinking about this issue for a while and also discussed it with Andrew F. on our CDT-summit. I think different to other global declarations it is important that the parser gets to see the using directives of one compilation unit, only. These directives can be quite different in each compilation unit.
==&gt; The modelling should follow a similar approach to what we do with macro definitions. However, currently this is done through a back-door by modifying the scanner during finding the include file. This should be made more explicit and clean and then we can extend it to using directives.</pre>
    </div>

    <div id="c7" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sergey Prigogin</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.sprigogin&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.sprigogin&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-12 13:19:11 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c6">comment #6</a>)
When do you expect a cleaner solution for macros to be ready? Is there a bugzilla for it?
</pre>
    </div>

    <div id="c8" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sergey Prigogin</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.sprigogin&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.sprigogin&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-12 23:09:15 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c6">comment #6</a>)
<span class="quote">&gt; I think different to other global
&gt; declarations it is important that the parser gets to see the using directives
&gt; of one compilation unit, only. These directives can be quite different in each
&gt; compilation unit.</span >

Consider the following example:

header1.h
---------
class A {...};

namespace ns1 {
  class B {...};
}

using ns1::B;

source1.cc
----------
#include &quot;header1.h&quot;

A a1;
B b1;

header2.h
---------
class A {...}; 

namespace ns2 {
  class B {...};
}

using ns2::B;

source2.cc
----------
#include &quot;header2.h&quot;

A a2;
B b2;

Distinguishing between header1's A and header2's A is just as important as distinguishing between ns1::B and ns2::B. Why should a using declaration in a header be treated differently from a simple class declaration? It seems that a comprehensive solution has to include a general mechanism for filtering index based on reachability from a particular translation unit. In presence of such mechanism using T::S declaration doesn't require any special treatment. In absence of such mechanism using T::S declaration doesn't deserve any special treatment.</pre>
    </div>

    <div id="c9" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Markus Schorn</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mschorn.eclipse&#64;gmx.at" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mschorn.eclipse&#64;gmx.at" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-13 05:45:42 EST
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; Distinguishing between header1's A and header2's A is just as important as
&gt; distinguishing between ns1::B and ns2::B. Why should a using declaration in a
&gt; header be treated differently from a simple class declaration? It seems that a
&gt; comprehensive solution has to include a general mechanism for filtering index
&gt; based on reachability from a particular translation unit. In presence of such
&gt; mechanism using T::S declaration doesn't require any special treatment. In
&gt; absence of such mechanism using T::S declaration doesn't deserve any special
&gt; treatment.</span >

Certainly there are limits in the model CDT is using. However, like a linker it assumes that global declarations with the same scoped names resolve to the same bindings. I can have multiple class definitions (os-specific implementations) that actually use the same functions to operate on them. In this case your model fails because independent of which class definition the compiler is seing it is using the same functions!
There is a huge difference to the using-directives, because those basically allow short-hand notations without any global meaning (not seen by the linker). In many cases you will find 'using std;' directives and you do not want to introduce the namespace into global scope for the entire indexing.
</pre>
    </div>

    <div id="c10" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sergey Prigogin</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.sprigogin&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.sprigogin&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-18 00:25:04 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c9">comment #9</a>)

<span class="quote">&gt; Certainly there are limits in the model CDT is using. However, like a linker it
&gt; assumes that global declarations with the same scoped names resolve to the same
&gt; bindings. I can have multiple class definitions (os-specific implementations)
&gt; that actually use the same functions to operate on them. In this case your
&gt; model fails because independent of which class definition the compiler is seing
&gt; it is using the same functions!
&gt; There is a huge difference to the using-directives, because those basically
&gt; allow short-hand notations without any global meaning (not seen by the linker).
&gt; In many cases you will find 'using std;' directives and you do not want to
&gt; introduce the namespace into global scope for the entire indexing.</span >

Do you envision the approach used for passing macros from the index to the parser (<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Passing macros from the index to the parser"
   href="show_bug.cgi?id=209614">bug 209614</a>) to be used for all of the following constructs that are not visible to the linker?
- using T;
- using T::S;
- typedef
- static variable in a header file
- static function in a header file


</pre>
    </div>

    <div id="c11" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Markus Schorn</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mschorn.eclipse&#64;gmx.at" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mschorn.eclipse&#64;gmx.at" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-19 03:42:59 EST
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; Do you envision the approach used for passing macros from the index to the
&gt; parser (<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Passing macros from the index to the parser"
   href="show_bug.cgi?id=209614">bug 209614</a>) to be used for all of the following constructs that are not
&gt; visible to the linker?
&gt; - using T;
&gt; - using T::S;
&gt; - typedef
&gt; - static variable in a header file
&gt; - static function in a header file</span >

I think it is necessary to do this for the two variants of the using-directives and also for namespace composition (<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [Index] namespace composition is not handled"
   href="show_bug.cgi?id=200673">bug 200673</a>).
I think we can treat typedefs like the other types (although they don't make it to the linker).
Static functions/variables declared in a header are especially tricky because it is unclear whether you need to consider them as the same thing (even if they are used in different compilation units) or not. An example for this would be a variable that is 'static' and 'const'. It'd be the same in all compilation units. I am leaning towards treating statics in headers just like globals. (<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [Index] handling static variables/functions defined in a header"
   href="show_bug.cgi?id=180305">bug 180305</a>)
</pre>
    </div>

    <div id="c12" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Rolando Martins</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=rolando.martins&#64;efacec.pt" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=rolando.martins&#64;efacec.pt" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-12-21 05:38:59 EST
        </span>

      </div>




<pre class="bz_comment_text">Build : I200712201323

I can access a class reference only while the indexer is rebuilding. When the indexer stops the rebuilding process, I receive the usual 'cannot find symbol...'.

I am using fast index.</pre>
    </div>

    <div id="c13" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sergey Prigogin</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.sprigogin&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.sprigogin&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-12-24 18:59:49 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c11">comment #11</a>)
Markus, when do you expect to have something for <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Passing macros from the index to the parser"
   href="show_bug.cgi?id=209614">bug 209614</a> that can be extended to 'using' declarations and directives. This bug blocks a very important <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Problem with parsing of standard gcc header files"
   href="show_bug.cgi?id=175470">bug 175470</a>.

</pre>
    </div>

    <div id="c14" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Markus Schorn</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mschorn.eclipse&#64;gmx.at" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mschorn.eclipse&#64;gmx.at" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-02 03:44:26 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c13">comment #13</a>)
<span class="quote">&gt; (In reply to <a href="show_bug.cgi?id=203385#c11">comment #11</a>)
&gt; Markus, when do you expect to have something for <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Passing macros from the index to the parser"
   href="show_bug.cgi?id=209614">bug 209614</a> that can be
&gt; extended to 'using' declarations and directives. This bug blocks a very
&gt; important <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Problem with parsing of standard gcc header files"
   href="show_bug.cgi?id=175470">bug 175470</a>.</span >

I'll look into this next week. </pre>
    </div>

    <div id="c15" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sergey Prigogin</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.sprigogin&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.sprigogin&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-10 21:52:37 EST
        </span>

      </div>




<pre class="bz_comment_text">Markus,
How do you envision the macro-like approach to work when &quot;using&quot; declaration or directive is not in global scope? For example, in the namespace composition use case.</pre>
    </div>

    <div id="c16" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Markus Schorn</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mschorn.eclipse&#64;gmx.at" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mschorn.eclipse&#64;gmx.at" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-11 04:00:34 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c15">comment #15</a>)
I don't see the specific problem with non-global directives. Let's discuss how we can handle directives (assuming they are stored with the file in the index): It should be easy to provide a list of using declarations to the preprocessor via the new class IncludeFileContent. From there we need to create a new mechanism to make the translation-unit aware of the additional directives. I can see two options for that:
(a) let the preprocessor create tokens for the directives, the parser will 
    insert the correct directives into the AST
(b) create explicit support for a list of additional directives in the AST and
    let the preprocessor insert the directives.

(a) is fairly easy to implement, we don't have to change the name resolution. 
    The tricky part is to setup the location map such that it computes the 
    correct file-locations for the directives taken from the index. I could
    help making this happen.
(b) We'd need to change the name resolution to make use of the additional
    directives. I have not looked into this, so I don't know how difficult it 
    is. Over all, it's probably the cleaner approach.

</pre>
    </div>

    <div id="c17" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mike Kucera</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mikekucera&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mikekucera&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-11 10:43:08 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c16">comment #16</a>)

<span class="quote">&gt; (a) let the preprocessor create tokens for the directives, the parser will 
&gt;     insert the correct directives into the AST</span >

This places part of the burden on the parser that uses CPreprocessor. The preprocessor can be reused for other parsers that are contributed via ILangage. For this reason I think that option (b) might be cleaner.

However if you do decide to go with (a) I will be ok with that. I don't think LPG will have any problem handling the new tokens.

<span class="quote">&gt; (b) create explicit support for a list of additional directives in the AST and
&gt;     let the preprocessor insert the directives.</span >

I agree that on the surface this sounds like the cleaner approach. But, I can't really say either because I'm not familiar with the name resolution code.


Perhaps we could make use of the new refactoring API to insert the directives after the parse :)
</pre>
    </div>

    <div id="c18" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sergey Prigogin</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.sprigogin&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.sprigogin&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-13 18:11:01 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c16">comment #16</a>)
<span class="quote">&gt; (b) create explicit support for a list of additional directives in the AST and
&gt;     let the preprocessor insert the directives.</span >

The name resolution should not be an issue as long as the additional directives are represented by classes that implement ICPPUsingDeclaration and
ICPPNamespaceAlias for the two kinds of &quot;using&quot; statements respectively.

Here is an outline of the proposal:
1. The &quot;using&quot; directives are represented by PDOMCPPUsingDeclaration (defined in <a href="https://bugs.eclipse.org/bugs/attachment.cgi?id=82639">https://bugs.eclipse.org/bugs/attachment.cgi?id=82639</a>) and PDOMCPPNamespaceAlias.
2. PDOMCPPUsingDeclaration and PDOMCPPNamespaceAlias are hidden from index name resolution by putting them in PDOMFileLocalScope.
2. List&lt;IIndexFragmentBinding&gt; getIncludeScopeBindings() method is added to IncludeFileContent, CPreprocessor and IScanner.
3. AbstractGNUSourceCodeParser#parse() method gets the include scope bindings from the scanner and adds them to the global scope of the AST. The bindings may have to be wrapped into adapters that provide setScope()/getScope() methods, but I'm not sure if it's necessary. 

Please let me know your opinion.</pre>
    </div>

    <div id="c19" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Markus Schorn</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mschorn.eclipse&#64;gmx.at" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mschorn.eclipse&#64;gmx.at" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-14 03:58:38 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c17">comment #17</a>)
<span class="quote">&gt; (In reply to <a href="show_bug.cgi?id=203385#c16">comment #16</a>)
&gt; &gt; (a) let the preprocessor create tokens for the directives, the parser will 
&gt; &gt;     insert the correct directives into the AST
&gt; This places part of the burden on the parser that uses CPreprocessor....</span >
I was thinking of inserting exactly those tokens that represent a using-declaration, so there would be no need to change the parsers. Anyways it looks like we all prefer option (b).
</pre>
    </div>

    <div id="c20" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Markus Schorn</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mschorn.eclipse&#64;gmx.at" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mschorn.eclipse&#64;gmx.at" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-14 05:22:58 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c18">comment #18</a>)
<span class="quote">&gt; Here is an outline of the proposal:
&gt; 1. The &quot;using&quot; directives are represented by PDOMCPPUsingDeclaration (defined
&gt; in <a href="https://bugs.eclipse.org/bugs/attachment.cgi?id=82639">https://bugs.eclipse.org/bugs/attachment.cgi?id=82639</a>) and
&gt; PDOMCPPNamespaceAlias.
&gt; 2. PDOMCPPUsingDeclaration and PDOMCPPNamespaceAlias are hidden from index name
&gt; resolution by putting them in PDOMFileLocalScope.
&gt; 2. List&lt;IIndexFragmentBinding&gt; getIncludeScopeBindings() method is added to
&gt; IncludeFileContent, CPreprocessor and IScanner.
&gt; 3. AbstractGNUSourceCodeParser#parse() method gets the include scope bindings
&gt; from the scanner and adds them to the global scope of the AST. The bindings may
&gt; have to be wrapped into adapters that provide setScope()/getScope() methods,
&gt; but I'm not sure if it's necessary. 
&gt; Please let me know your opinion.</span >

My hope is that T::S will only have one binding in the index. Attached to the 
binding one then can find all references and declarations. Introducing bindings for using-declarations puts a significant burdon on the clients of the index, because in order to find all references of T::S they'd need to search for all related using-directives and then for all references to those.

The using-directive is currently stored as a reference (should it be a declaration?) to the original binding, which is good (it is found by the C/C++ search). However, we loose the information that the referece is actually a using-declaration and we do not have a way to search the using-declarations for
a file.

We can add a flag to the name (as this is done with base-class declarations) and/or we can add extra objects in the PDOMFiles. Then it is possible to get a
hand on the using-directives starting from a file. Note, that with this approach we do not have to deal with composite bindings at all (the information for a file is never composed out of multiple index fragments).

Independent of how this information is stored in the index we can construct objects implementing ICPPUsingDeclaration or whatever is best for the name resolution. The parser should not get involved into passing the information to the ASTTranslationUnit. This can be done by the preprocessor via the locationmap. 

One remark towards the name-resolution: It is probably necessary to keep track of the position where a using-directive is inserted into the ast. Without that a using-declaration in a source-file can disturb the name-resolution in a header included before.
</pre>
    </div>

    <div id="c21" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mike Kucera</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mikekucera&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mikekucera&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-14 11:35:09 EST
        </span>

      </div>




<pre class="bz_comment_text">I have a question about the solution being discussed. I'm not that familiar with the internal workings of the index so please excuse me if I get some things wrong... 

Is it possible that the solution that is being described here can be made general enough so that it can work with other information from the index as opposed to just working for namespaces? Perhaps there is a bigger picture here. Instead of just focusing on the namespace bug there is a chance here to create a general mechanism of using the index to feed useful information to the parser.

Let me explain why I'm asking. Ambiguities arise in both C and C++ because some sentences can be parsed differently based on how identifiers have been previously declared. The standard example of this is the following:

x * y;

If x has been declared as a type then this should be parsed as a declaration of a pointer variable named y. Otherwise if x and y have been previously declared as variables then this is x multiplied by y. 

Currently CDT solves this problem by creating an ambiguity node in the AST that contains both possible AST subtrees. Then the correct one is chosen during binding resolution. This causes a complete extra tree-traversal of the entire AST (done by the resolveAmbiguities() method in AbstractGNUSourceCodeParser).

Another way to solve the problem would be to keep track of typedef declarations during the parse using a symbol table. This information is then fed to the parser by defining different token types, one for 'identifier' and one for 'typedefname'. Normally the lexer would have no way to tell the difference between the token types, but with a symbol table the token type could be modified on the fly before being fed to the parser. Then there is no more ambiguity, the parser will parse the correct way.

(In fact these two token types are actually defined in the C99 spec. And C++ goes even further to define separate token types for class names and namespace names. This makes C and C++ context sensitive languages, and it makes them very hard to parse correctly.) 

This strategy brakes down when headers are being skipped, because some typedefs may be skipped and the parser won't know about them.

It turns out that this strategy for disambiguation works very well for bottom-up parsers, which is what I'm using. So, is it possible that the solution be general enough that it could also be used to get information on typedefs, and other declarations, out of the index?

It sounds like option b) that is being discussed is intended on working just for namespaces. Perhaps option a) is better in the sense that no changes need to be made in the parser, AST or location map. If inserting the tokens for a namespace alias works then it should also work for inserting the tokens for a typedef declaration. 

Maybe instead of just focusing on fixing this bug there is an opportunity here to beef up the semantic resolution capabilities of the DOM parser framework in a more general way.</pre>
    </div>

    <div id="c22" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c22">Comment 22</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Markus Schorn</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mschorn.eclipse&#64;gmx.at" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mschorn.eclipse&#64;gmx.at" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-15 10:11:52 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c21">comment #21</a>)
<span class="quote">&gt; .... Normally the lexer would have no way to tell the difference
&gt; between the token types, but with a symbol table the token type could be
&gt; modified on the fly before being fed to the parser. Then there is no more
&gt; ambiguity, the parser will parse the correct way.
&gt; ...</span >
To figure out whether a name is a typedef or not you need to perform a proper
name resolution, a simple symbol table will not do the job. If you want to discuss fundamental changes to the name-resolution, please use a separate bug for that, I'll join you there.

Sergey, I can offer to split the work on this bug. It will take me just a few hours to change the indexer to provide the additional information within the CPPASTTranslationUnit. (i.e.: a list of using-declarations and namespace-compositions). You could then work on incorporating these into the name-resolution? </pre>
    </div>

    <div id="c23" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c23">Comment 23</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mike Kucera</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mikekucera&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mikekucera&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-15 11:41:20 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c22">comment #22</a>)

<span class="quote">&gt; To figure out whether a name is a typedef or not you need to perform a proper
&gt; name resolution, a simple symbol table will not do the job. If you want to
&gt; discuss fundamental changes to the name-resolution, please use a separate bug
&gt; for that, I'll join you there.</span >

Of course a symbol table will do the job. Do you think that C compilers use the weird backwards tree traversal algorithms CDT uses? Pick up any textbook on compilers and you will find a chapter on symbol tables, they are the standard method for name resolution.

The reason name resolution works the way it does in CDT is because its based on lazy evaluation. A name doesn't need to be resolved until it is asked for, which is perfect for F3. Of course this advantage is gone for situations where all names must be resolved, like during indexing. A real compiler will always need to resolve every single name so the CDT approach wouldn't make sense there.

Now here's where things get interesting... we *can* consider CDT to be a compiler: CDT takes source code and compiles it into an index! This is why I've suggested in the past that maybe a symbol table approach does make some sense for CDT. But every time I say this people treat me like I'm crazy. 

In any case the amount of work that has gone into name resolution in CDT is substantial, so I'm not suggesting fundamental changes.


The reason why I'm interested in this bug is this: I'm using a symbol table to track things like typedefs in my new parsers. This is necessary because it is pretty much impossible to parse C++ with a bottom-up parser without this information. Its not that hard to maintain a symbol table during the parse just to track identifiers, not to do full name resolution. But I run into a similar problem to this bug, skipping includes means skipping very useful information. If there was a general mechanism for getting info from the index for use by the parser that would help immensely. But I guess I'm not understanding fully how the index works so maybe I'm wrong about this. 

</pre>
    </div>

    <div id="c24" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c24">Comment 24</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sergey Prigogin</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.sprigogin&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.sprigogin&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-15 17:03:34 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c20">comment #20</a>)
<span class="quote">&gt; My hope is that T::S will only have one binding in the index. Attached to the 
&gt; binding one then can find all references and declarations. Introducing bindings
&gt; for using-declarations puts a significant burdon on the clients of the index,
&gt; because in order to find all references of T::S they'd need to search for all
&gt; related using-directives and then for all references to those.</span >

The same problem applies to typedefs. Solving it for &quot;using&quot; but not for typedef wouldn't bring a major relief.

<span class="quote">&gt; Independent of how this information is stored in the index we can construct
&gt; objects implementing ICPPUsingDeclaration or whatever is best for the name
&gt; resolution. The parser should not get involved into passing the information to
&gt; the ASTTranslationUnit. This can be done by the preprocessor via the
&gt; locationmap. </span >

I was thinking of taking existing PDOM objects and inserting them into AST. This would have an advantage of not creating additional PDOM objects when AST itself is written to the index.

(In reply to <a href="show_bug.cgi?id=203385#c21">comment #21</a>)
<span class="quote">&gt; Is it possible that the solution that is being described here can be made
&gt; general enough so that it can work with other information from the index as
&gt; opposed to just working for namespaces? Perhaps there is a bigger picture here.
&gt; Instead of just focusing on the namespace bug there is a chance here to create
&gt; a general mechanism of using the index to feed useful information to the
&gt; parser.</span >

I'm glad you saw an opportunity for generalization here. I was also thinking about generalization but along a slightly different line. If the index is organized in such a way that the file local scope of every include file is easily accessible, then the parser could take all objects from the file local scopes of the included files and inject them into the file local scope of the AST. This approach could be applied to all object types listed in <a href="show_bug.cgi?id=203385#c10">comment #10</a>.

(In reply to <a href="show_bug.cgi?id=203385#c22">comment #22</a>)
<span class="quote">&gt; Sergey, I can offer to split the work on this bug. It will take me just a few
&gt; hours to change the indexer to provide the additional information within the
&gt; CPPASTTranslationUnit. (i.e.: a list of using-declarations and
&gt; namespace-compositions). You could then work on incorporating these into the
&gt; name-resolution? </span >

I gladly accept your offer if we decide against the file local scope inclusion idea above.

I'm not sure namespace composition should be addressed this way though. I haven't looked closely at <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [Index] namespace composition is not handled"
   href="show_bug.cgi?id=200673">bug 200673</a>, but it looks to me like a problem in the name resolution.

</pre>
    </div>

    <div id="c25" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c25">Comment 25</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Markus Schorn</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mschorn.eclipse&#64;gmx.at" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mschorn.eclipse&#64;gmx.at" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-16 03:34:38 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c23">comment #23</a>)
Clearly you can create a symbol-table to perform name lookups as long as this thing is complex enough, I meant to say you cannot just use a hashtable. Above that in C++ you cannot populate the symbol table on the fly, the following is valid C++-code:
   class Lookahead {
      void test() {
	 xxx * a;
	 a= 0;
      }
      typedef int xxx;
   };
</pre>
    </div>

    <div id="c26" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c26">Comment 26</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Markus Schorn</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mschorn.eclipse&#64;gmx.at" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mschorn.eclipse&#64;gmx.at" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-16 04:11:26 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c24">comment #24</a>)
<span class="quote">&gt; (In reply to <a href="show_bug.cgi?id=203385#c20">comment #20</a>)
&gt; &gt; My hope is that T::S will only have one binding in the index
&gt; &gt; ...
&gt; The same problem applies to typedefs. Solving it for &quot;using&quot; but not for
&gt; typedef wouldn't bring a major relief.</span >
There is a fundamental difference between typedefs and using declarations: The typedef introduces a new name, the using declaration just changes the way the name resolution works. If you think of a rename refactoring, for a typedef you may want to rename the typedef and all its references or you may want to rename the target type and all its references, so the notion of references for a typedef is meaningful. For a using declaration there is no such distinction, all references belong to the original type and renaming the type requires to rename all references.
In the index I really want to avoid the creation of a separate bindings for using declarations. 


<span class="quote">&gt; (In reply to <a href="show_bug.cgi?id=203385#c22">comment #22</a>)
&gt; &gt; Sergey, I can offer to split the work on this bug. It will take me just a few
&gt; &gt; hours to change the indexer to provide the additional information within the
&gt; &gt; CPPASTTranslationUnit. (i.e.: a list of using-declarations and
&gt; &gt; namespace-compositions). You could then work on incorporating these into the
&gt; &gt; name-resolution? 
&gt; I gladly accept your offer if we decide against the file local scope inclusion
&gt; idea above.
&gt; I'm not sure namespace composition should be addressed this way though. I
&gt; haven't looked closely at <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [Index] namespace composition is not handled"
   href="show_bug.cgi?id=200673">bug 200673</a>, but it looks to me like a problem in the
&gt; name resolution.</span >
If you look at using-directives as a means to configure the symbol lookup, namespace composition is not different to the other using-declarations. CDT's
name resolution handles using-directives including namespace-composition. With the fast indexer it just lacks the information about the directives. By providing this information to the name resolution both bugs should get fixed.

The name resolution accesses the using directives (including those for namespace composition) via ICPPNamespaceScope.getUsingDirectives(), that or the places where this method is called could be the point to inject the directives provided by the index.
</pre>
    </div>

    <div id="c27" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c27">Comment 27</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Markus Schorn</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mschorn.eclipse&#64;gmx.at" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mschorn.eclipse&#64;gmx.at" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-16 04:57:40 EST
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; I'm glad you saw an opportunity for generalization here. I was also thinking
&gt; about generalization but along a slightly different line. If the index is
&gt; organized in such a way that the file local scope of every include file is
&gt; easily accessible, then the parser could take all objects from the file local
&gt; scopes of the included files and inject them into the file local scope of the
&gt; AST. This approach could be applied to all object types listed in <a href="show_bug.cgi?id=203385#c10">comment #10</a>.
&gt; (In reply to <a href="show_bug.cgi?id=203385#c22">comment #22</a>)</span >
I see your point. That'd be a more elagant solution to <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [Index] handling static variables/functions defined in a header"
   href="show_bug.cgi?id=180305">bug 180305</a>. It'd work for 'using T::S;'. However, I don't think it would be a good solution for handling 'using namespace T' or namespace composition. </pre>
    </div>

    <div id="c28" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c28">Comment 28</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mike Kucera</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mikekucera&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mikekucera&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-16 10:10:27 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c25">comment #25</a>)

<span class="quote">&gt; Clearly you can create a symbol-table to perform name lookups as long as this
&gt; thing is complex enough, I meant to say you cannot just use a hashtable. </span >

A symbol table tracks names and also scopes. So for example a hashtable plus a stack would do the job. This words great and supports stuff like variable shadowing. I admit I have yet to apply this approach to C++, but I remain optimistic. I'm more worried about supporting skipping headers, thats going to be the toughest part.

<span class="quote">&gt; Above
&gt; that in C++ you cannot populate the symbol table on the fly, the following is
&gt; valid C++-code:
&gt;    class Lookahead {
&gt;       void test() {
&gt;          xxx * a;
&gt;          a= 0;
&gt;       }
&gt;       typedef int xxx;
&gt;    };</span >

Forward references are a whole challenge on their own. I've read that this can be solved by parsing class bodies twice, or by saving the tokens that make up the body of inline methods and then parsing them after the class is parsed. In any case a fancy solution will be needed here. Hopefully whatever approach is best won't invalidate using a symbol table.

Why oh why did they add forward references to C++. It goes against the entire declare-before-use paradigm.</pre>
    </div>

    <div id="c29" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c29">Comment 29</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mike Kucera</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mikekucera&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mikekucera&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-16 10:21:47 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c24">comment #24</a>)

<span class="quote">&gt; I'm glad you saw an opportunity for generalization here. I was also thinking
&gt; about generalization but along a slightly different line. If the index is
&gt; organized in such a way that the file local scope of every include file is
&gt; easily accessible, then the parser could take all objects from the file local
&gt; scopes of the included files and inject them into the file local scope of the
&gt; AST. This approach could be applied to all object types listed in <a href="show_bug.cgi?id=203385#c10">comment #10</a>.</span >

This sounds like a great idea. But, I would love for this information to be available to the parser *before* the AST is built.

But I'm an index noob so what do I know.</pre>
    </div>

    <div id="c30" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c30">Comment 30</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sergey Prigogin</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.sprigogin&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.sprigogin&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-17 00:34:29 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c26">comment #26</a>)
<span class="quote">&gt; CDT's name resolution handles using-directives including namespace-composition.
&gt; With the fast indexer it just lacks the information about the directives. By
&gt; providing this information to the name resolution both bugs should get fixed.</span >

I'm not sure I understand. &quot;using&quot; declarations are already present in the index as PDOMCPPNamespaceAlias objects. What additional required information is missing in the index?

I understand that PDOMCPPNamespaceAlias objects have undesired global effect, but that depends on the scope they belong to and can be changed.

(In reply to <a href="show_bug.cgi?id=203385#c27">comment #27</a>)
<span class="quote">&gt; I see your point. That'd be a more elagant solution to <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [Index] handling static variables/functions defined in a header"
   href="show_bug.cgi?id=180305">bug 180305</a>. It'd work
&gt; for 'using T::S;'. However, I don't think it would be a good solution for
&gt; handling 'using namespace T' or namespace composition. </span >

I don't see a fundamental difference between using T::S and using namespace. The prior is essentially a collection of ICPPDelegate's, the latter is a single ICPPDelegate. The single-delegate case looks simpler than the multi-delegate one.

</pre>
    </div>

    <div id="c31" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c31">Comment 31</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Markus Schorn</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mschorn.eclipse&#64;gmx.at" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mschorn.eclipse&#64;gmx.at" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-17 05:42:30 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c30">comment #30</a>)
<span class="quote">&gt; I'm not sure I understand. &quot;using&quot; declarations are already present in the
&gt; index as PDOMCPPNamespaceAlias objects. What additional required 
&gt; information is missing in the index?
&gt; I understand that PDOMCPPNamespaceAlias objects have undesired global effect,
&gt; but that depends on the scope they belong to and can be changed.</span >

The class is there but is never actually used. The reason is that you do not find names in the AST that actually resolve to an ICPPNamespaceAlias (the name of the namespace-alias resolves to the namespace it points to).

<span class="quote">&gt; (In reply to <a href="show_bug.cgi?id=203385#c27">comment #27</a>)
&gt; &gt; I see your point. That'd be a more elagant solution to <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [Index] handling static variables/functions defined in a header"
   href="show_bug.cgi?id=180305">bug 180305</a>. It'd work
&gt; &gt; for 'using T::S;'. However, I don't think it would be a good solution for
&gt; &gt; handling 'using namespace T' or namespace composition. 
&gt; I don't see a fundamental difference between using T::S and using namespace.
&gt; The prior is essentially a collection of ICPPDelegate's, the latter is a single
&gt; ICPPDelegate. The single-delegate case looks simpler than the multi-delegate
&gt; one.</span >

A using-declaration simply inserts a name into a namespace, whereas the namespace-alias changes the way the name-resolution proceeds. At the point where the namespace-alias is provided it is unclear what names will actually be inserted into the current namespace. That can be different for different name-lookups:
   namespace a {
      int a1;
   };
   using namespace a;

   int x= a1; // ok
   // int y= a2; // not ok

   namespace a {
      int a2;
   }
   int b= a2;  // ok
</pre>
    </div>

    <div id="c32" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c32">Comment 32</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Markus Schorn</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mschorn.eclipse&#64;gmx.at" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mschorn.eclipse&#64;gmx.at" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-17 05:57:50 EST
        </span>

      </div>




<pre class="bz_comment_text">Any way we look at this we need to provide the using-declarations and namespace-aliases from the headers included in the translation-unit. Since there are existing interfaces for those (extending IBinding) its probably best to use those interfaces.

Here is a potential solution:

(1) Create a mechanism in the index+indexer to provide a list of bindings for a given scope and offset in the ast which are not found through the index.findBinding(...) method, because we hide it on intention. 

(2) Make sure that using-directives and namespace-aliases are stored as such bindings in the index.

(3) Make use of this information in the name resolution to fix this bug and namespace composition (<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [Index] namespace composition is not handled"
   href="show_bug.cgi?id=200673">bug 200673</a>)

After we achieve this, we can still discuss whether it is a good idea to use the same concept for other use-cases and I can challenge whether names should ever resolve to using-directives.</pre>
    </div>

    <div id="c33" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c33">Comment 33</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sergey Prigogin</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.sprigogin&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.sprigogin&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-17 12:52:42 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c32">comment #32</a>)
<span class="quote">&gt; (1) Create a mechanism in the index+indexer to provide a list of bindings for a
&gt; given scope and offset in the ast which are not found through the
&gt; index.findBinding(...) method, because we hide it on intention. 
&gt; 
&gt; (2) Make sure that using-directives and namespace-aliases are stored as such
&gt; bindings in the index.
&gt; 
&gt; (3) Make use of this information in the name resolution to fix this bug and
&gt; namespace composition (<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [Index] namespace composition is not handled"
   href="show_bug.cgi?id=200673">bug 200673</a>)</span >

I think we are in complete agreement now. I feel comfortable with (2) and (3). Will you be willing to help with (1)?
</pre>
    </div>

    <div id="c34" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c34">Comment 34</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Markus Schorn</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mschorn.eclipse&#64;gmx.at" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mschorn.eclipse&#64;gmx.at" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-18 07:45:13 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c33">comment #33</a>)
<span class="quote">&gt; I think we are in complete agreement now. I feel comfortable with (2) and (3).
&gt; Will you be willing to help with (1)?</span >
I can do that and have created <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [Index/Indexer] provide access to local bindings of includes"
   href="show_bug.cgi?id=215783">bug 215783</a> for that. I'll start next week by suggesting an interface for accessing the information and provide an implementation only after we have agreed on the interface.
</pre>
    </div>

    <div id="c35" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c35">Comment 35</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sergey Prigogin</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.sprigogin&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.sprigogin&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-20 15:29:19 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c31">comment #31</a>)
<span class="quote">&gt; A using-declaration simply inserts a name into a namespace, whereas the
&gt; namespace-alias changes the way the name-resolution proceeds. At the point
&gt; where the namespace-alias is provided it is unclear what names will actually be
&gt; inserted into the current namespace. That can be different for different
&gt; name-lookups:
&gt;    namespace a {
&gt;       int a1;
&gt;    };
&gt;    using namespace a;
&gt; 
&gt;    int x= a1; // ok
&gt;    // int y= a2; // not ok
&gt; 
&gt;    namespace a {
&gt;       int a2;
&gt;    }
&gt;    int b= a2;  // ok
&gt; </span >

For the record I'd like to provide an example showing that using T::S applies only to names declared before it:

example1.cc
-----------
namespace ns {
void C(int x) {};
}

using ns::C;

namespace ns {
void C(int x, int y) {};
}

void m() {
  C(1);
  C(1, 2);  // error: too many arguments to function 'void ns::C(int)'
}

example2.cc
-----------
namespace ns {
void C(int x) {};
}

namespace ns {
void C(int x, int y) {};
}

using ns::C;

void m() {
  C(1);
  C(1, 2);  // ok
}
</pre>
    </div>

    <div id="c36" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c36">Comment 36</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Markus Schorn</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mschorn.eclipse&#64;gmx.at" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mschorn.eclipse&#64;gmx.at" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-22 08:21:11 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c35">comment #35</a>)
<span class="quote">&gt; For the record I'd like to provide an example showing that using T::S applies
&gt; only to names declared before it:</span >
Yes.

In most of my previous comments I used inconsistent and wrong terminology. I'd like to straighten that out:

* using delcarations: 'using T::S;'
* namespace alias:  'namespace X= T;'
* using directives: 'using namespace T;'

Using declarations and namespace aliases are similar in that they introduce an existing binding into another namespace (which can be the global scope). Both constructs can be represented with bindings. After all I am not entirely sure whether it is necessary to store those as file-local bindings in the index, nevertheless I am going to introduce the mechanism for that, then we'll have the choice (<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [Index/Indexer] provide access to local bindings of includes"
   href="show_bug.cgi?id=215783">bug 215783</a>). If you like, you can work on this without using file-local bindings first.

Using directives do not introduce a name into the namespace, they change how the lookup proceeds. There are no bindings to represent these. I'll need to create a new interface that should be used as a return type for the existing method ICPPNamespaceScope.getUsingDirectives(), which currently returns IASTName[].</pre>
    </div>

    <div id="c37" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c37">Comment 37</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sergey Prigogin</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.sprigogin&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.sprigogin&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-22 22:24:30 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c36">comment #36</a>)
<span class="quote">&gt; (In reply to <a href="show_bug.cgi?id=203385#c35">comment #35</a>)
&gt; &gt; For the record I'd like to provide an example showing that using T::S applies
&gt; &gt; only to names declared before it:
&gt; Yes.
&gt; 
&gt; In most of my previous comments I used inconsistent and wrong terminology. I'd
&gt; like to straighten that out:
&gt; 
&gt; * using delcarations: 'using T::S;'
&gt; * namespace alias:  'namespace X= T;'
&gt; * using directives: 'using namespace T;'</span >

You clarified things for me. Before I didn't understand why PDOMCPPNamespaceAlias was not used for using directives.

<span class="quote">&gt; After all I am not entirely sure
&gt; whether it is necessary to store those as file-local bindings in the index,
&gt; nevertheless I am going to introduce the mechanism for that, then we'll have
&gt; the choice (<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [Index/Indexer] provide access to local bindings of includes"
   href="show_bug.cgi?id=215783">bug 215783</a>). If you like, you can work on this without using
&gt; file-local bindings first.</span >

Where would you get the bindings from if you don't store them in the index? I don't think it's possible to create them without a complete AST.

<span class="quote">&gt; Using directives do not introduce a name into the namespace, they change how
&gt; the lookup proceeds. There are no bindings to represent these. I'll need to
&gt; create a new interface that should be used as a return type for the existing
&gt; method ICPPNamespaceScope.getUsingDirectives(), which currently returns
&gt; IASTName[].</span >

I propose that we tackle using declarations and namespace aliases first and move using directives to a separate bug.

</pre>
    </div>

    <div id="c38" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c38">Comment 38</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Markus Schorn</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mschorn.eclipse&#64;gmx.at" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mschorn.eclipse&#64;gmx.at" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-23 04:21:02 EST
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; &gt; After all I am not entirely sure
&gt; &gt; whether it is necessary to store those as file-local bindings in the index,
&gt; &gt; nevertheless I am going to introduce the mechanism for that, then we'll have
&gt; &gt; the choice (<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [Index/Indexer] provide access to local bindings of includes"
   href="show_bug.cgi?id=215783">bug 215783</a>). If you like, you can work on this without using
&gt; &gt; file-local bindings first.
&gt; Where would you get the bindings from if you don't store them in the index? I
&gt; don't think it's possible to create them without a complete AST.</span >
Sure they need to go into the index, you could add them as regular bindings to the index, first.  

<span class="quote">&gt; I propose that we tackle using declarations and namespace aliases first and
&gt; move using directives to a separate bug.</span >
Good idea, we can use <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [Index] namespace composition is not handled"
   href="show_bug.cgi?id=200673">bug 200673</a> for the using directives (namespace composition is a special case of that).

</pre>
    </div>

    <div id="c39" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c39">Comment 39</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sergey Prigogin</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.sprigogin&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.sprigogin&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-23 12:33:59 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c38">comment #38</a>)
<span class="quote">&gt; Sure they need to go into the index, you could add them as regular bindings to
&gt; the index, first.</span >

Patch <a href="https://bugs.eclipse.org/bugs/attachment.cgi?id=82639">https://bugs.eclipse.org/bugs/attachment.cgi?id=82639</a> adds bindings for using declarations to the global scope. Binding for namespace aliases are already there. I can check in the attachment as a first step, if you like.

</pre>
    </div>

    <div id="c40" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c40">Comment 40</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sergey Prigogin</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=eclipse.sprigogin&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=eclipse.sprigogin&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-26 20:36:23 EST
        </span>

      </div>




<pre class="bz_comment_text">I've submitted a fix based on PDOMCPPUsingDeclaration. There is still an issue described in <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [Index/Indexer] provide access to local bindings of includes"
   href="show_bug.cgi?id=215783#c7">https://bugs.eclipse.org/bugs/show_bug.cgi?id=215783#c7</a>, but it is not specific to using declarations and affects static variables and functions the same way.

It would be nice to add a test that verifies that a using declaration in a header file doesn't affect a source, which doesn't include that header file. I'm not sure what is the most convenient place for such a test. Suggestions are welcome.</pre>
    </div>

    <div id="c41" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=203385#c41">Comment 41</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Markus Schorn</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mschorn.eclipse&#64;gmx.at" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mschorn.eclipse&#64;gmx.at" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-01-28 09:50:54 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=203385#c40">comment #40</a>)
<span class="quote">&gt; I've submitted a fix based on PDOMCPPUsingDeclaration. There is still an issue
&gt; described in <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [Index/Indexer] provide access to local bindings of includes"
   href="show_bug.cgi?id=215783#c7">https://bugs.eclipse.org/bugs/show_bug.cgi?id=215783#c7</a>, but it is
&gt; not specific to using declarations and affects static variables and functions
&gt; the same way.
&gt; It would be nice to add a test that verifies that a using declaration in a
&gt; header file doesn't affect a source, which doesn't include that header file.
&gt; I'm not sure what is the most convenient place for such a test. Suggestions are
&gt; welcome.</span >


Great work! I have made the following changes on top of your work:
* The scope returned by CPPClassTypeDelegate was the scope.
* Changed the way how the local-file for using-declarations is computed, see
  also <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [Index/Indexer] provide access to local bindings of includes"
   href="show_bug.cgi?id=215783">bug 215783</a>. Moved the implementation to PDOMCPPLinkage, because it is
  c++-specific.
* Removed hard-coded PDOMCPPUsingDeclaration.hasDeclaration(), it has to return
  false after the declaration is removed from the code. 
* I made a change to mark using-directives within namespaces as file-local, too.
  I wanted to see whether this works, and it does. If you think it's better not
  to make them file-local, go ahead and revert this change.
* updated testcase NamespaceTests.testUsingDirective() (now returns both refs)
* updated IndexCPPBindingResolutionTest.testUsingTypeDirective_177917_2() (needs
  an include statement to work)

My suggestion for testcases:
* IndexCPPBindingResolutionBugs is a good place for testing the index-based 
  name resolution, if you ommit the #include &quot;header.h&quot; the header is not 
  included.
* It'd be good to test overloaded functions used via a using declaration. 
* It'd be good to test whether changing the file-content (removing or adding
  a directive to the code) has the desired effect. For that you can use 
  IndexUpdateTests.
</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=203385">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=203385">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=203385">Clone This Bug</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>

<br>
</div>

    <div id="footer">
      <div class="intro"></div>
<ul id="useful-links">
  <li id="links-actions"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_bottom" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_bottom");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_bottom" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_bottom"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_bottom">
  <span class="separator">| </span>
  <a id="login_link_bottom" href="show_bug.cgi?id=203385&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_bottom')">Log In</a>

  <form action="show_bug.cgi?id=203385" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_bottom">
    <input id="Bugzilla_login_bottom" required
           name="Bugzilla_login" class="bz_login"
        placeholder="Login">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_bottom" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_bottom">
    <a href="#" onclick="return hide_mini_login_form('_bottom')">[x]</a>
  </form>
</li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
</ul>
  </li>

  




  
</ul>

      <div class="outro"></div>
    </div>

  </body>
</html>