<!DOCTYPE html>
<html lang="en">
  <head>
    <title>99497 &ndash; In some cases Java project refresh should kick clean build</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link href="https://bugs.eclipse.org/bugs/data/assets/03c4bb46b12126a79867f9a9f5323634.css?1593441374" rel="stylesheet" type="text/css">



    
<script type="text/javascript" src="https://bugs.eclipse.org/bugs/data/assets/a7c2f3a028f17a9aa60f56dc9d6e732d.js?1593441374"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/bugs',
                maxusermatches: 10
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    "You must enter a Description for this attachment.",
                component_required:
                    "You must select a Component for this bug.",
                description_required:
                    "You must enter a Description for this bug.",
                short_desc_required:
                    "You must enter a Summary for this bug.",
                version_required:
                    "You must select a Version for this bug."
            }
              , api_token: ''
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null,
                             "99497 – In some cases Java project refresh should kick clean build",
                             "show_bug.cgi?id=99497" );
        document.title = "99497 – In some cases Java project refresh should kick clean build";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "99497 – In some cases Java project refresh should kick clean build", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();

    });
    // -->
    </script>
<script type="text/javascript" src="https://bugs.eclipse.org/bugs/data/assets/daf5e0fb6826e6a35280e622913f0c4a.js?1593441374"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico">
  </head>

  <body 
        class="bugs-eclipse-org-bugs
                 bz_bug
                 bz_status_VERIFIED
                 bz_product_JDT
                 bz_component_Core
                 bz_bug_99497 yui-skin-sam">

  <div id="header"><!-- 1.0@bugzilla.org -->





<!--  START OF SOLSTICE HEADER -->
 <link rel="stylesheet" type="text/css" href="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/stylesheets/vendor/cookieconsent/cookieconsent.min.css" />
 <script src="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/vendor/cookieconsent/default.min.js"></script>
 <style type="text/css">
    @import url('https://www.eclipse.org/eclipse.org-common/themes/solstice/public/stylesheets/barebone.min.css')
    </style>
    <script
      src="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/barebone.min.js">
    </script><header role="banner" class="barebone-layout thin-header padding-top-5 padding-bottom-5"  id="header-wrapper">
  <div class="container-fluid reset">
    <div class="row-fluid" id="header-row">
            <div class="col-sm-8 col-md-6 col-lg-4" id="header-left">
        <div class="wrapper-logo-default"><a href="https://www.eclipse.org/"><img class="logo-eclipse-default img-responsive hidden-xs" alt="logo" src="https://bugs.eclipse.org/eclipse.org-common/themes/solstice/public/images/logo/eclipse-426x100.png"/></a></div>
      </div>            <div class="col-sm-16 col-md-18 col-lg-20" id="main-menu-wrapper">
  <div class="navbar yamm" id="main-menu">
    <div id="navbar-collapse-1" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li class="visible-thin"><a href="https://www.eclipse.org/downloads/" target="_self">Download</a></li><li><a href="https://www.eclipse.org/users/" target="_self">Getting Started</a></li><li><a href="https://www.eclipse.org/membership/" target="_self">Members</a></li><li><a href="https://www.eclipse.org/projects/" target="_self">Projects</a></li>                  <li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Community <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="http://marketplace.eclipse.org">Marketplace</a></li><li><a href="http://events.eclipse.org">Events</a></li><li><a href="http://www.planeteclipse.org/">Planet Eclipse</a></li><li><a href="https://www.eclipse.org/community/eclipse_newsletter/">Newsletter</a></li><li><a href="https://www.youtube.com/user/EclipseFdn">Videos</a></li></ul></li><li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Participate <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="https://bugs.eclipse.org/bugs/">Report a Bug</a></li><li><a href="https://www.eclipse.org/forums/">Forums</a></li><li><a href="https://www.eclipse.org/mail/">Mailing Lists</a></li><li><a href="https://wiki.eclipse.org/">Wiki</a></li><li><a href="https://wiki.eclipse.org/IRC">IRC</a></li><li><a href="https://www.eclipse.org/contribute/">How to Contribute</a></li></ul></li><li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Working Groups <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="http://wiki.eclipse.org/Auto_IWG">Automotive</a></li><li><a href="http://iot.eclipse.org">Internet of Things</a></li><li><a href="http://locationtech.org">LocationTech</a></li><li><a href="http://lts.eclipse.org">Long-Term Support</a></li><li><a href="http://polarsys.org">PolarSys</a></li><li><a href="http://science.eclipse.org">Science</a></li><li><a href="http://www.openmdm.org">OpenMDM</a></li></ul></li>          <!-- More -->
          <li class="dropdown eclipse-more hidden-xs">
            <a data-toggle="dropdown" class="dropdown-toggle">More<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li>
                <!-- Content container to add padding -->
                <div class="yamm-content">
                  <div class="row">
                    <ul class="col-sm-8 list-unstyled"><li><p><strong>Community</strong></p></li><li><a href="http://marketplace.eclipse.org">Marketplace</a></li><li><a href="http://events.eclipse.org">Events</a></li><li><a href="http://www.planeteclipse.org/">Planet Eclipse</a></li><li><a href="https://www.eclipse.org/community/eclipse_newsletter/">Newsletter</a></li><li><a href="https://www.youtube.com/user/EclipseFdn">Videos</a></li></ul><ul class="col-sm-8 list-unstyled"><li><p><strong>Participate</strong></p></li><li><a href="https://bugs.eclipse.org/bugs/">Report a Bug</a></li><li><a href="https://www.eclipse.org/forums/">Forums</a></li><li><a href="https://www.eclipse.org/mail/">Mailing Lists</a></li><li><a href="https://wiki.eclipse.org/">Wiki</a></li><li><a href="https://wiki.eclipse.org/IRC">IRC</a></li><li><a href="https://www.eclipse.org/contribute/">How to Contribute</a></li></ul><ul class="col-sm-8 list-unstyled"><li><p><strong>Working Groups</strong></p></li><li><a href="http://wiki.eclipse.org/Auto_IWG">Automotive</a></li><li><a href="http://iot.eclipse.org">Internet of Things</a></li><li><a href="http://locationtech.org">LocationTech</a></li><li><a href="http://lts.eclipse.org">Long-Term Support</a></li><li><a href="http://polarsys.org">PolarSys</a></li><li><a href="http://science.eclipse.org">Science</a></li><li><a href="http://www.openmdm.org">OpenMDM</a></li></ul>                  </div>
                </div>
              </li>
            </ul>
          </li>
              </ul>
    </div>
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      </button>
      <div class="wrapper-logo-mobile"><a class="navbar-brand visible-xs" href="https://www.eclipse.org/"><img class="logo-eclipse-default-mobile img-responsive" alt="logo" src="https://bugs.eclipse.org/eclipse.org-common/themes/solstice/public/images/logo/eclipse-800x188.png"/></a></div>    </div>
  </div>
</div>
    </div>
  </div>
</header>
<!--  END OF SOLSTICE HEADER -->

    <div id="titles">
      <span id="title">Bugzilla &ndash; Bug&nbsp;99497</span>

        <span id="subtitle" class="subheader">In some cases Java project refresh should kick clean build</span>

        <span id="information" class="header_addl_info">Last modified: 2006-03-28 14:56:02 EST</span>
    </div>


    <div id="common_links"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_top" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_top");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_top" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_top"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_top">
  <span class="separator">| </span>
  <a id="login_link_top" href="show_bug.cgi?id=99497&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_top')">Log In</a>

  <form action="show_bug.cgi?id=99497" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_top">
    <input id="Bugzilla_login_top" required
           name="Bugzilla_login" class="bz_login"
        placeholder="Login">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_top" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_top">
    <a href="#" onclick="return hide_mini_login_form('_top')">[x]</a>
  </form>
</li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
</ul>
    </div>
  </div>

  <div id="bugzilla-body">


<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2006-03-28 14:56:02">
  <input type="hidden" name="id" value="99497">
  <input type="hidden" name="token" value="1629850562-pbSEFr0YWc_0NjAPCkhtnbL2NF2p39XFI85nN5CqO04">
<div class="bz_short_desc_container edit_form">
     <a href="show_bug.cgi?id=99497"><b>Bug&nbsp;99497</b></a> <span id="summary_container" class="bz_default_hidden">
      - <span id="short_desc_nonedit_display">In some cases Java project refresh should kick clean build</span>
     </span>

    <div id="summary_input"><span class="field_label "
    id="field_label_short_desc">


  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>

</span>In some cases Java project refresh should kick clean build
    </div>
  </div>
  <script type="text/javascript">
    hideEditableField('summary_container',
                      'summary_input',
                      'summary_edit_action',
                      'short_desc',
                      'In some cases Java project refresh should kick clean build' );
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">VERIFIED
          FIXED
      </span>
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_alias">


  <a 
      title="A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#alias"
  >Alias:</a>

</th>
    <td>
        None
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components. Select a Classification to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >JDT

</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Eclipse Project

</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=JDT"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Core

  (<a href="buglist.cgi?component=Core&amp;product=JDT&amp;bug_status=__open__"
      target="_blank">show other bugs</a>)
</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">


  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=fields.html#version"
  >Version:</a>

</th>

      <td>3.1 &#160; <a href="https://dev.eclipse.org/committers/bugs/bugz_manager.php"><img src="//dev.eclipse.org/small_icons/apps/accessories-text-editor.png" alt="Edit" title="Edit these values" /></a></td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">


  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>

</th>
      <td class="field_value">PC
        Windows XP
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label  accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>P3
       normal<span id="votes_container">
      with
      <a href="page.cgi?id=voting/bug.html&amp;bug_id=99497">4 
            votes</a>
    (<a href="page.cgi?id=voting/user.html&amp;bug_id=99497#vote_99497">vote</a>)
  </span>
      </td>
    </tr>

      <tr><th class="field_label "
    id="field_label_target_milestone">


  <a 
      title="The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it."
      class="field_help_link"
      href="page.cgi?id=fields.html#target_milestone"
  >Target Milestone:</a>

</th>
        <td>3.2 M5 &#160; <a href="https://dev.eclipse.org/committers/bugs/bugz_manager.php"><img src="//dev.eclipse.org/small_icons/apps/accessories-text-editor.png" alt="Edit" title="Edit these values" /></a></td>
      </tr>
          
          <tr><th class="field_label "
    id="field_label_assigned_to">


  <a 
      title="The person in charge of resolving the bug."
      class="field_help_link"
      href="page.cgi?id=fields.html#assigned_to"
  >Assignee:</a>

</th>
      <td><span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
      </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_qa_contact">


  <a 
      title="The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#qa_contact"
  >QA Contact:</a>

</th>
      <td><span class="vcard">
</span>
      </td>
    </tr>
    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'jdt-core-inbox\x40eclipse.org',
        '');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">


  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>

</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>

    <tr><th class="field_label "
    id="field_label_status_whiteboard">


  <a 
      title="Each bug has a free-form single line text entry box for adding tags and status information."
      class="field_help_link"
      href="page.cgi?id=fields.html#status_whiteboard"
  >Whiteboard:</a>

</th><td>  
  </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_keywords">


  <a 
      title="You can add keywords from a defined list to bugs, in order to easily identify and group them."
      class="field_help_link"
      href="describekeywords.cgi"
  >Keywords:</a>

</th>
  <td class="field_value "
      id="field_container_keywords" >

</td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          <tr>
    <th class="field_label">
      <label>Duplicates (1)</label>:
    </th>
    <td class="field_value">
      <span id="duplicates"><a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Removing generated classes doesn't trigger automatic rebuild"
   href="show_bug.cgi?id=107831">107831</a> 
      </span>
      (<a href="buglist.cgi?bug_id=107831">view as bug list</a>)
    </td>
  </tr>
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>

  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>

  </td>
  </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table>
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2005-06-11 00:55 EDT by <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2006-03-28 14:56 EST
      (<a href="show_activity.cgi?id=99497">History</a>)
    </td>
  
  </tr>
<tr>
      <th class="field_label">
        <label  accesskey="a">
          CC List:
        </label>
      </th>
      <td>6 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5" >
                <option value="alexander.smirnoff">alexander.smirnoff</option>
                <option value="bogofilter+eclipse.org">bogofilter+eclipse.org</option>
                <option value="gunnar">gunnar</option>
                <option value="max.gilead">max.gilead</option>
                <option value="philippe_mulet">philippe_mulet</option>
                <option value="pombredanne">pombredanne</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" >

</td>
    </tr> 

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>



        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts">
  <tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table">
  <tr id="a0">
    <th colspan="3" class="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_text_plain bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=23353"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">Build errors after refresh</span></b></a>

          <span class="bz_attach_extra_info">
              (7.23 KB,
                text/plain)

            <br>
            <a href="#attach_23353"
               title="Go to the comment associated with the attachment">2005-06-16 14:26 EDT</a>,

            <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=23353&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a2" class="bz_contenttype_text_plain bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=23354"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">Trace file with suggested .options enabled</span></b></a>

          <span class="bz_attach_extra_info">
              (14.28 KB,
                text/plain)

            <br>
            <a href="#attach_23354"
               title="Go to the comment associated with the attachment">2005-06-16 14:27 EDT</a>,

            <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=23354&amp;action=edit">Details</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="3">
        <span class="bz_attach_view_hide">
            <a href="#a0" onclick="return toggle_display(this);">Show
              Obsolete</a> (2)
            <a id="view_all" href="attachment.cgi?bugid=99497&amp;action=viewall&amp;hide_obsolete=1">View All</a>
        </span>
        <a href="attachment.cgi?bugid=99497&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>
<div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=99497&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>
  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="https://bugs.eclipse.org/bugs/js/comments.js?1463425338" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the 'comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>


<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table">
<tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-11 00:55:58 EDT
        </span>

      </div>




<pre class="bz_comment_text">I'm using external tools (Ant or Maven) to do a clean builds on the same source
code as Eclipse is working with (it is verified on 3.1 N20050609-0010 on Windows
XP with auto refresh rurned off). During an external build Maven removes several
source directories and creates them again using XDoclet to generate these
sources from scratch. When build is done I go back to eclipse and manually run
refresh on this project and when refresh is done I see several compilation
errors (usually not on regenerated sources) and they disappear only after I run
Project -&gt; Clean...

It seems that this is a very old issue, because I've filled request for a
workaround almost a year ago. <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED INVALID - [Workbench] Option to refresh projects in new Project/Clean... dialog"
   href="show_bug.cgi?id=60905">https://bugs.eclipse.org/bugs/show_bug.cgi?id=60905</a>

Please let me know if you need more details or testcases.</pre>
    </div>

    <div id="c1" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Olivier Thomann</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=Olivier_Thomann&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=Olivier_Thomann&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-11 13:49:26 EDT
        </span>

      </div>




<pre class="bz_comment_text">Moving to Platform/Resources.
The refresh should trigger a recompilation of the changed resources.</pre>
    </div>

    <div id="c2" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-11 13:55:14 EDT
        </span>

      </div>




<pre class="bz_comment_text">It does trigger some recompilation, but recompilation is incomplete after that.</pre>
    </div>

    <div id="c3" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">John Arthorne</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=john.arthorne&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=john.arthorne&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-15 20:11:16 EDT
        </span>

      </div>




<pre class="bz_comment_text">If a build is occurring but the errors don't go away, it sounds like a problem 
with the Java builder.  I think this is a duplicate bug but I can't find the 
original right now - Kent, I think it was one of yours?</pre>
    </div>

    <div id="c4" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-16 00:27:12 EDT
        </span>

      </div>




<pre class="bz_comment_text">It is hapening on every external build for me. Please, please fix this!

My build deletes some source dirs that are in Eclipse's .claspath and create
them from scratch (using XDoclet) and I noticed that if build does not delete
directories compilation is ok. But when it deletes (autorefresh is off),
compilation always incomplete and require explicit &quot;Clean&quot; action.</pre>
    </div>

    <div id="c5" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-16 09:59:25 EDT
        </span>

      </div>




<pre class="bz_comment_text">Can you please provide us a reproduceable testcase?

What specifically are the errors that do not go away?

What happens if you refresh the projects individually &amp; in order (instead of 
all together), do the errors still happen?</pre>
    </div>

    <div id="c6" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-16 11:46:22 EDT
        </span>

      </div>




<pre class="bz_comment_text">Kent, it is a _single_ Eclipse project with multiple source directories managed
with Maven, XDoclet and Cactus. No dependencies on other projects.

I've uploaded a bundle at <a href="http://w8.platonoff.com/11/commonj.zip">http://w8.platonoff.com/11/commonj.zip</a>
Before importing this project into Eclipse you'll have to run Maven to get
dependencies.

Download and install Maven 1.0.2 from <a href="http://maven.apache.org/">http://maven.apache.org/</a>

Add properties to ~/build.properties (on Windows C:/Documents and Settings/&lt;user
name&gt;/build.properties

---
  commonj.home=c:/dev/xcommonj/lib
---

  Run following commands:

  maven plugin:download -DgroupId=cactus -DartifactId=cactus-maven -Dversion=1.7

  maven plugin:download -DgroupId=xdoclet -DartifactId=maven-xdoclet-plugin
-Dversion=1.2.3

  maven default

  Now you need to add MAVEN_REPO classpath variable pointing to local Maven's
repository. Eg. C:/Documents and Settings/&lt;user name&gt;/.maven/repository

  After that you can import Eclipse project into workbench. Make sure that it
can be compiled (refresh, clean). Then from a command line run 

  maven clean default

  Go back to Eclipse and refresh project. You'll see build errors. I wasn't able
to figure out any patters about what classes are failing. Those errors will go
away after &quot;Clean...&quot; 

By the way, new Clean... dialog is really suck in a large workspace.

</pre>
    </div>

    <div id="c7" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-16 12:46:14 EDT
        </span>

      </div>




<pre class="bz_comment_text">the command 'maven default' failed. It said: 'Goal &quot;default&quot; does not exist in 
this project.'

I tried to continue but none of the jars in the maven repo match the expected 
ones in your project, so the build fails with 15 missing jars &amp; 3 missing 
source folders.


BUT just to clarify:
1. All your compile errors go away when you do a Clean? If so then this is not 
a JavaBuilder issue but a refresh problem in Core.

2. What happens if you turn off 'Project-&gt;Build Automatically' &amp; then perform 
the refresh. Do the deleted/recreated source folders appear in the workspace? 
If they do not, can you create them &amp; do a build (hit the build button, not 
Clean). Do you get errors in this case?</pre>
    </div>

    <div id="c8" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-16 13:07:53 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=99497#c7">comment #7</a>)
<span class="quote">&gt; the command 'maven default' failed. It said: 'Goal &quot;default&quot; does not exist in 
&gt; this project.'</span >

  Strange. It is defined in maven.xml. Did you run &quot;maven default&quot; from a
commonj2 dir?
  I'm not using external tools here, just a command line on windows.
 
<span class="quote">&gt; I tried to continue but none of the jars in the maven repo match the expected 
&gt; ones in your project, so the build fails with 15 missing jars &amp; 3 missing 
&gt; source folders.</span >

  This is very strange. All jars are on ibiblio.com/maven repository.

<span class="quote">&gt; BUT just to clarify:
&gt; 1. All your compile errors go away when you do a Clean? If so then this is not 
&gt; a JavaBuilder issue but a refresh problem in Core.</span >

  Yes. They all go away on clean.

<span class="quote">&gt; 2. What happens if you turn off 'Project-&gt;Build Automatically' &amp; then perform 
&gt; the refresh. Do the deleted/recreated source folders appear in the workspace? 
&gt; If they do not, can you create them &amp; do a build (hit the build button, not 
&gt; Clean). Do you get errors in this case?</span >

-------
  Disabled build
  Run Project -&gt; build project  No errors
  From command line run &quot;maven clean default&quot;
  Switch to Eclipse and run refresh on this project. All folders and files are
there. No build errors
  Run Project -&gt; Build project. Errors appears!
  Run Project -&gt; Clean... Errors cleaned up.
--------
  It seems there is no difference if autobuild is on or off.

  One more thing. Eclipse build output folder is different from the folders used
by external builds. See .classpath
</pre>
    </div>

    <div id="c9" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-16 14:01:29 EDT
        </span>

      </div>




<pre class="bz_comment_text">How many errors are there, and what are they?


Also could you please turn on builder tracing so we can see what is happening:

1. Create a .options file with the following content:

# Turn on debug tracing for org.eclipse.jdt.core plugin
org.eclipse.jdt.core/debug=true
# Reports incremental builder activity : nature of build...
org.eclipse.jdt.core/debug/builder=true
# Turn on debugging for the org.eclipse.core.resources plugin.
org.eclipse.core.resources/debug=true
# Reports the start and end of all builder invocations
org.eclipse.core.resources/build/invoking=true

2. Start Eclipse with -debug &lt;path to the .options file&gt; -vm &lt;path to 
jre&gt;\bin\java.exe

3. Ensure that the DOS console that is opened has a buffer size set to 9999

4. Copy/paste the trace in a .txt file and attach it to this bug report

thanks</pre>
    </div>

    <div id="c10" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-16 14:26:56 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=23353" name="attach_23353" title="Build errors after refresh">attachment 23353</a> <a href="attachment.cgi?id=23353&amp;action=edit" title="Build errors after refresh">[details]</a></span>
Build errors after refresh

Here is the list of errors I'm getting. It looks like I'm getting the same
errors on every run.</pre>
    </div>

    <div id="c11" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-16 14:27:56 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=23354" name="attach_23354" title="Trace file with suggested .options enabled">attachment 23354</a> <a href="attachment.cgi?id=23354&amp;action=edit" title="Trace file with suggested .options enabled">[details]</a></span>
Trace file with suggested .options enabled</pre>
    </div>

    <div id="c12" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-16 15:46:00 EDT
        </span>

      </div>




<pre class="bz_comment_text">I'm starting to wonder if this just may be a bug/problem with your setup.

You have the same package in several source folders (which is supposed to 
work) and it also appears that the output folder is in the same folder as your 
generated files.

Could you please move the output folder to /bin instead of /target/classes &amp; 
see if things are better.


Its very strange that you would have errors like:

&quot;Locator cannot be resolved&quot; from XWorkManager.java since the 2 types are in 
the same package in the same source folder.

It would also be very helpful to get a list of .class files in the output 
folder before AND after maven has generated files.

I suspect some .class files (such as Locator.class) are being deleted.</pre>
    </div>

    <div id="c13" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-16 15:58:58 EDT
        </span>

      </div>




<pre class="bz_comment_text">For the list of .class files, please get them from Windows (not Eclipse 
itself, which may not know that they have been deleted).

Given your errors, I'm really interested when Locator.class was deleted.</pre>
    </div>

    <div id="c14" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-16 16:20:23 EDT
        </span>

      </div>




<pre class="bz_comment_text">Hmm. It looks like Maven's clean goal is deleting the entire target dir in a
project root. So, all classes compiled by eclipse are deleted. Also note that
the following source folders also deleted on clean:

  &lt;classpathentry kind=&quot;src&quot; path=&quot;commonj-ejb/target/xdoclet/ejb&quot;/&gt;
  &lt;classpathentry kind=&quot;src&quot; path=&quot;commonj-it1/target/xdoclet/ejb&quot;/&gt;
  &lt;classpathentry kind=&quot;src&quot; path=&quot;commonj-it2/target/xdoclet/ejb&quot;/&gt;

I can see that Eclipse is recreating target/classes directory on refresh and
even see new classes in there (including Locator.class).

Note that Maven build is not compiling into /target/classes, but put all
compiled classes into the following dirs (primarily because javac target is
different from the one used by Eclipse's builder):

  /commonj-ejb/target/classes
  /commonj-ejb/target/test-classes
  /commonj-ejb/target/test-cactus-classes
  /commonj-it1/target/classes
  ...

</pre>
    </div>

    <div id="c15" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-16 16:41:15 EDT
        </span>

      </div>




<pre class="bz_comment_text">Well we don't consider this to be our bug.

I strongly suggest to keep your eclipse source files &amp; .class files away from 
anything created/modified by maven.</pre>
    </div>

    <div id="c16" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-16 16:58:01 EDT
        </span>

      </div>




<pre class="bz_comment_text">Kent, please consider to fix this. It is very annoying when building/running
integration tests for in-container testing to do refresh, clean, select projects
for cleaning. 5..6 operations just to pickup external changes is way too much
for frequent activity.

Generated source files can't be kept away from Eclipse classpath because they
are used to compile annotated classes (currently annotated with XDoclet). 

Keeping away compiled classes probably possible, but I consider it risky because
I don't feel that Eclipse's incremental compiler can completely track down all
the dependencies from the modified sources.</pre>
    </div>

    <div id="c17" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-16 17:28:15 EDT
        </span>

      </div>




<pre class="bz_comment_text">Sorry but how is this our bug when an external builder is deleting our 
generated .class files?

You can easily setup your project so that the eclipse files are not in the 
same folder structure as the maven files. Just have 2 folders at the root: 
eclipse vs. maven.

It does not prevent eclipse source types from referencing maven types, but it 
does keep maven from deleting our .class files.</pre>
    </div>

    <div id="c18" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-16 17:42:18 EDT
        </span>

      </div>




<pre class="bz_comment_text">Kent, first of all I consider that deleting Eclipse's output folder is a way to
force Eclipse to rebuild everything. To me it makes sense if half part of the
sources were regenerated.

Also note that currently, there is no way to force &quot;Clean&quot; from external tool
configuration, so you can only do refresh of selected folders. So, I assume that
Eclipse _must_ nicely recover from the situation when its classes had been
changed externally.</pre>
    </div>

    <div id="c19" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-17 03:50:21 EDT
        </span>

      </div>




<pre class="bz_comment_text">Well that is where we disagree.

Eclipse should handle external changes to its source files, but the 
generated .class files are just that - generated .class files. Why have 
Eclipse build them, only to have an external builder delete them?

If Eclipse was deleting the maven generated .class files, do you think they 
would notice &amp; rebuild them?

Not a change - they would tell you to report it to us as our bug.

Please change your setup. It will take you a few minutes &amp; you won't 
experience any more problems.</pre>
    </div>

    <div id="c20" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-17 11:58:31 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=99497#c19">comment #19</a>)
<span class="quote">&gt; Well that is where we disagree.
&gt; 
&gt; Eclipse should handle external changes to its source files, but the 
&gt; generated .class files are just that - generated .class files. Why have 
&gt; Eclipse build them, only to have an external builder delete them?</span >

Let's be reasonable. Recovering from the situation when external tools deletes
classes should be just natural and I look at it as a feature that improve user
experience and simplify integration with external tools.

<span class="quote">&gt; If Eclipse was deleting the maven generated .class files, do you think they 
&gt; would notice &amp; rebuild them?</span >
&gt;
<span class="quote">&gt; Not a change - they would tell you to report it to us as our bug.</span >

I probably agree with you if automatic updates are turned on. However when thay
are off, it is reasonable to assume that eclipse build and external build does
not overlap and developers may choose to automate a cleanup process using
external tools, so when they switching back into eclipse it should recover.
Actually Eclipse does recreate output folder, but does not complain or rebuild
all the classes.

I believe that if any of the output folder has to be recreated, Eclipse should
run clean automatically.

<span class="quote">&gt; Please change your setup. It will take you a few minutes &amp; you won't 
&gt; experience any more problems.</span >

Unfortunately it is not that easy. We have over 50 modules (in a different
project, then I've sent to you) configured to share output folders beteen
Eclipse and Ant build. There are advantages to share classes folders between
eclipse and external tools, such as Ant or Maven:

-- Disk space
-- Improve Ant build time (it can pickup classes already built by Eclipse)
-- Ensure that remotely deployed classes are the same as the one used by
debugger without using manual launch configuration
-- Easy to run clean build between Eclipse and Ant (this one apparently does not
work now)

From other hand, there is also chances that configuration of the output folders
is managed by custom classpath container (eg. maven project.xml or even 3rd part
IDE configs) and you have to use the same output folders as declared in external
config and don't use any Eclipse-managed output folders at all.

So, I believe this is very important and actually very natural to recover for
the situation when output folders are deleted.

</pre>
    </div>

    <div id="c21" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Randy Rizun</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=rrizun&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=rrizun&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-17 14:15:56 EDT
        </span>

      </div>




<pre class="bz_comment_text">
Consider this simple experiment:

1. Eclipse 3.1 RC2 on Windows (any release/version of Eclipse will suffice)
2. Create a new Java project using the 'New Java Project' wizard
2a. Name the project 'TryIt'
2b. Check 'Create separate source and output folders' so that 'bin' and 'src'
folders are created
3. Click 'Finish'
4. Create some Java source file in the default package, say, 'Main.java'. Its
contents don't really matter.
5. Now here's the fun part: let's go behind Eclipse's back and open a Command
Prompt and delete the 'bin' directory:

   C:\workspace\TryIt&gt;rmdir /q/s bin

As a developer, I would intuitively *think* that this would be a good way to
manually clean the project...

6. Now go back to Eclipse and do a 'Refresh' of the Java project. Note that
nothing really happens. The 'bin' directory is *not* 

recreated. Neither are the .class files. I would have expected Eclipse to
discover that 'bin' and its class files have suddenly 

disappeared and that the 'bin' directory needs to be recreated and .class files
need to be regenerated.

So, ya, I've run into similar situations as Eugene has run into, though not as
complicated (i.e., does not involve Maven).

In my situation, I have an external build.xml ANT script whose 'clean' target
simply deletes the entire 'bin' directory (including the 

actual directory itself), and I always run into the above problem, whereby I
clean externally via ANT and then zoom back to Eclipse 

and do a Project 'Refresh', but nothing happens.. though the problem is solved
by doing an explicitProject-&gt;Clean from within 

Eclipse...
</pre>
    </div>

    <div id="c22" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c22">Comment 22</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-17 14:38:23 EDT
        </span>

      </div>




<pre class="bz_comment_text">Comment on <span class="bz_obsolete"><a href="attachment.cgi?id=23353" name="attach_23353" title="Build errors after refresh">attachment 23353</a> <a href="attachment.cgi?id=23353&amp;action=edit" title="Build errors after refresh">[details]</a></span>
Build errors after refresh

nailed the issue</pre>
    </div>

    <div id="c23" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c23">Comment 23</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-17 14:38:37 EDT
        </span>

      </div>




<pre class="bz_comment_text">Comment on <span class="bz_obsolete"><a href="attachment.cgi?id=23354" name="attach_23354" title="Trace file with suggested .options enabled">attachment 23354</a> <a href="attachment.cgi?id=23354&amp;action=edit" title="Trace file with suggested .options enabled">[details]</a></span>
Trace file with suggested .options enabled

nailed the issue</pre>
    </div>

    <div id="c24" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c24">Comment 24</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ed Burnette</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ed.burnette&#64;sas.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ed.burnette&#64;sas.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-18 01:32:02 EDT
        </span>

      </div>




<pre class="bz_comment_text">I think I'm seeing this same problem when trying to do Mondrian development
(mondrian.sourceforge.net) in Eclipse. The main Mondrian developer doesn't use
Eclipse so he has everything building with ant files. Whenever I update the code
from source control I have to go through this dance that takes me about an hour,
cleaning the project in Eclipse, cleaning it with ant, rebuilding with one or
the other or both, turning off automatic rebuilds, repeat, turn builds on, have
tests fail because something didn't get rebuilt, etc. etc.. I couldn't tell you
what order of things works because I just keep messing around until it runs
again. One of the things his ant script does is generate some java files and
then compile them.</pre>
    </div>

    <div id="c25" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c25">Comment 25</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-18 01:38:05 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=99497#c24">comment #24</a>)

Ed, that's exactly right! I too have a hard time explaining other developers how
to sort out all the errors in Eclipse builder after picking up major changes
that require some cleanup and source regeneration.</pre>
    </div>

    <div id="c26" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c26">Comment 26</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-19 13:02:33 EDT
        </span>

      </div>




<pre class="bz_comment_text">Yes be reasonable! There is no Java Builder bug here.

1. Eclipse allows you to setup your project in numerous ways &amp; the root of 
your problem is YOUR project setup.
2. Why share the output folder with an external builder? You can have 
multiple .class folders on your path.
3. The Java Builder will NEVER do a refresh for you since it does not know 
when you have run an external builder.

You must always initiate the refresh, but not every refresh requires a Clean...

Spend your time convincing Core that <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED INVALID - [Workbench] Option to refresh projects in new Project/Clean... dialog"
   href="show_bug.cgi?id=60905">bug 60905</a> is a useful feature that will 
save you time, but there is no Eclipse builder bug here.

It is totally unacceptable to slow down every incremental build for every user 
of Eclipse to look for non-source deletions because an external builder has 
bugs &amp; may have changed the project.</pre>
    </div>

    <div id="c27" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c27">Comment 27</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-19 13:52:20 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=99497#c26">comment #26</a>)
<span class="quote">&gt; Yes be reasonable! There is no Java Builder bug here.
&gt; 
&gt; 1. Eclipse allows you to setup your project in numerous ways &amp; the root of 
&gt; your problem is YOUR project setup.</span >

Unfortunately this luxury is not always awailable. I can give you number of
examples when project configuration can't be changed. Please read my previous
responses, I have several complicated cases explained up there.

By the way, if you look at JUnit project by Erich Gamma, it is even use project
root folder as a source dir, so there is no other place to put classes in order
to keep eclipse build separate from external one. I'm not saying this is the
best way to configure project, but it is a representative example of real case.

<span class="quote">&gt; 2. Why share the output folder with an external builder? You can have 
&gt; multiple .class folders on your path.</span >

This is making project configuration more complicated and I don't really see any
reasons (except this issue with Eclipse) why to duplicate class directories. In
some cases I have to use 2 or 3 differwent IDEs and several external tools on
the same project, so why should I spearate their class files?

<span class="quote">&gt; 3. The Java Builder will NEVER do a refresh for you since it does not know 
&gt; when you have run an external builder.</span >

This in _NOT_ about builder. This is about runnin authomatic clean when Eclipse
tetect that target folder disappear.

<span class="quote">&gt; You must always initiate the refresh, but not every refresh requires a Clean...</span >

I agree with that. However &quot;Clear...&quot; action is completely NOT intuitive and
really annoying feature in Eclipse. Refresh should be smart enough to pickup
external changes.

<span class="quote">&gt; Spend your time convincing Core that <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED INVALID - [Workbench] Option to refresh projects in new Project/Clean... dialog"
   href="show_bug.cgi?id=60905">bug 60905</a> is a useful feature that will 
&gt; save you time, but there is no Eclipse builder bug here.</span >

What could help but does not resolve actual problem cause. The very same issue
happens when I run external tool from eclipse where you can only specify refresh
for selected resources, but not Clean! 

<span class="quote">&gt; It is totally unacceptable to slow down every incremental build for every user 
&gt; of Eclipse to look for non-source deletions because an external builder has 
&gt; bugs &amp; may have changed the project.</span >

I believe that it is acceptable and not performance critical to verify if target
directories _WITHIN_ manual refresh scope had been deleted (don't you schan
trough this dir already?) and then run full build in this case!</pre>
    </div>

    <div id="c28" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c28">Comment 28</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-19 20:01:23 EDT
        </span>

      </div>




<pre class="bz_comment_text">No we do not scan the generated .class files. Why should we?

For the large majority of eclipse users, their .class files remain unchanged 
until the Java Builder recreates them.

Our goal for incremental builds with auto-build enabled is 50-250 ms... we do 
not have spare cycles to waste looking for changes from out of the blue.


&quot;so why should I spearate their class files?&quot;

To prevent the exact problem you are having! Maven has is corrupting the 
Eclipse build state. Why are you not asking Maven to fix their problem?

&quot;This in _NOT_ about builder. This is about runnin authomatic clean when 
Eclipse detect that target folder disappear.&quot;

Then please continue the discussion in your other bug, because JDT/Core does 
not define the semantics of Refresh or Clean.</pre>
    </div>

    <div id="c29" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c29">Comment 29</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-19 21:56:19 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=99497#c28">comment #28</a>)

Kent, I have feeling that JDT/Core component could be a wrong asignee for this
bug. Please reassign it to JDT inbox or to more appropriate component.

<span class="quote">&gt; No we do not scan the generated .class files. Why should we?</span >

I wasn't talking about class files. I was talking about directories that contain
class files.

<span class="quote">&gt; For the large majority of eclipse users, their .class files remain unchanged 
&gt; until the Java Builder recreates them.</span >

I wonder how do you measure that? I see that my coworkers have to run refresh
and then clean.

I know that some people are using &quot;export to jar&quot; feature and never using ant or
other command line tools. So what? It should be an excure to do not fix this
issue. :-)

<span class="quote">&gt; Our goal for incremental builds with auto-build enabled is 50-250 ms... we do 
&gt; not have spare cycles to waste looking for changes from out of the blue.</span >

Before incremental build is kicked of, I guess there is another process that is
scanning trough project directories on &quot;refresh&quot; action. Am I right? If so, this
process should decide to run complete build when it detected that output folders
had been deleted (or maybe even externally modified).

<span class="quote">&gt; &quot;so why should I spearate their class files?&quot;
&gt; 
&gt; To prevent the exact problem you are having! Maven has is corrupting the 
&gt; Eclipse build state. Why are you not asking Maven to fix their problem?</span >

If Eclipse would run &quot;Clean&quot; when detected that target directory had been
deleted it wouldn't be an issue.

Consideting that Maven is not the only tool, and I can continue list of such
tools... it would make sense to fix just one other tool that is toooooo
sensitive about its own directories. I'm talking about Eclipse here. :-)

<span class="quote">&gt; &quot;This in _NOT_ about builder. This is about runnin authomatic clean when 
&gt; Eclipse detect that target folder disappear.&quot;
&gt; 
&gt; Then please continue the discussion in your other bug, because JDT/Core does 
&gt; not define the semantics of Refresh or Clean.</span >

I have feeling that this bug is more appropriate, comparing with refresh option
in Clean dialog, which is quite hidden then btw. From an end user prospective it
should significantly improve user experience with picking up external changes.
It is not about incremental builds, but about very specific cases that should be
possible to detect without performance issues in incremental builder.</pre>
    </div>

    <div id="c30" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c30">Comment 30</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ed Burnette</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ed.burnette&#64;sas.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ed.burnette&#64;sas.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-19 22:31:22 EDT
        </span>

      </div>




<pre class="bz_comment_text">Even if it's not a builder bug there's some kind of issue here with people
working in a mixed environment where some developers use Eclipse and some don't.
It would be nice to support this in some way without changing the project
structure. For example on Mondrian I'm not the main developer, and the main
developer doesn't use Eclipse, and he's not going to change anything to make the
Eclipse users happier.

So although I'm not going to reopen the bug, and don't know exactly where it
belongs, it's annoying enough and common enough that I think it should be
considered for addressing somehow in a future release. Maybe through a smarter
Eclipse&lt;-&gt;Ant integration (without losing the Eclipse integrated incremental
compiliation) or something, I don't know. Thx.</pre>
    </div>

    <div id="c31" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c31">Comment 31</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-20 08:34:43 EDT
        </span>

      </div>




<pre class="bz_comment_text">Eugene, I have been very polite and patient while trying to explain to you 
that the Java Builder is one of many builders.

JDT does not define refresh or clean. We do not know when a refresh has 
happened before an incremental build is invoked. We will not slow down every 
incremental build trying to recover from an external builder's bug.

If you want the option to force a clean after a refresh, then please add your 
comments to <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED INVALID - [Workbench] Option to refresh projects in new Project/Clean... dialog"
   href="show_bug.cgi?id=60905">bug 60905</a>.

The only bug you have found is with Maven. Please be reasonable and recognize 
that fact.</pre>
    </div>

    <div id="c32" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c32">Comment 32</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-20 08:49:20 EDT
        </span>

      </div>




<pre class="bz_comment_text">Ed, for some users who build portions of their project with external builders, 
they could use an integrated refresh/clean command.

But the Java Builder, as one of many builders in Eclipse, does not know when a 
refresh has been started by the user. The incremental build which follows 
(assuming source changes are found) is the first time the Java Builder is 
invoked by the Build Manager.

But as the user you do know &amp; can force the Clean &amp; full build to happen. Its 
not reasonable to expect an incremental build to detect/recover from any 
number of external changes to non-source files - that's what a Clean/full 
build is for...</pre>
    </div>

    <div id="c33" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c33">Comment 33</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-20 11:13:36 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=99497#c32">comment #32</a>)
<span class="quote">&gt; Ed, for some users who build portions of their project with external builders, 
&gt; they could use an integrated refresh/clean command.</span >

The thing is that they don't really know when to run just refresh and when
refresh + clean. I have difficult time to explain how it suppose to work from
Eclipse. So, developers are ending up with using command-line tool to compile,
or even swith to other IDEs that have explicit build command.

<span class="quote">&gt; But the Java Builder, as one of many builders in Eclipse, does not know when a 
&gt; refresh has been started by the user. The incremental build which follows 
&gt; (assuming source changes are found) is the first time the Java Builder is 
&gt; invoked by the Build Manager.</span >

As you said, it should happens before incremental builder. So, build manager
should be able to discover that target/output directories had been changed or
deleted and it should kick clean (or full rebuild) authomatically.

<span class="quote">&gt; But as the user you do know &amp; can force the Clean &amp; full build to happen. Its 
&gt; not reasonable to expect an incremental build to detect/recover from any 
&gt; number of external changes to non-source files - that's what a Clean/full 
&gt; build is for...</span >

Again, lets leave both your incremental build and our tools (Maven, Ant, make,
and all others) aside of this issue. The point is that it could happend that
external tool may need to clean output folders. Please accept this as a fact. I
don't really see any reasons why only Eclipse has to have problem with this if
none other tools have any issues with this and can share the same output folder.
</pre>
    </div>

    <div id="c34" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c34">Comment 34</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Alex Smirnoff</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=alexander.smirnoff&#64;oracle.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=alexander.smirnoff&#64;oracle.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-20 12:25:03 EDT
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; But as the user you do know &amp; can force the Clean &amp; full build to happen. Its 
&gt; not reasonable to expect an incremental build to detect/recover from any 
&gt; number of external changes to non-source files - that's what a Clean/full 
&gt; build is for...</span >

it looks like the functionality is not belong to incremental builder, but to
something else (external thread), that will trigger full build...</pre>
    </div>

    <div id="c35" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c35">Comment 35</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Randy Rizun</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=rrizun&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=rrizun&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-20 13:36:53 EDT
        </span>

      </div>




<pre class="bz_comment_text">The proposed solution &quot;clean project when output folder disappears&quot; is probably
quite misleading... (it is to me) I doubt the solution is to throw more code at
it... The solution might be do just fix a small bug in the jdt builder? Here's
my theory:

I think the problem/solution is much easier/simpler to explain... I'll give a
shot (also, note that I might be completely wrong!)

I would assume that when a user invokes &quot;Project Refresh&quot; that JDT builder is
notified of changes in *source* files (not generated output files)... fine.

When the JDT builder is notified of changes in, say, .java source files, I would
assume that it runs off and checks the date/time stamp of the corresponding
generated .class file wrt the .java source file to see if it needs to be
rebuilt? (Note- if this is false then my theory is blown out of the water!)

Well, perhaps the problem is that everything works fine when the output
directory where the generated .class file lives in (e.g., 'bin') exists... And
the problem is that this bug surfaces when the output directory where the the
generated .class file lives in does *NOT* exist... Perhaps there's a bug
somewhere whereby this timestamp comparison trips up when 'bin' does not exist
that causes the resources/refresh jdt/builder to trip up in the case..?!?

This would certainly consistent with my previous comment &quot;Consider this simple
experiment...&quot;

(Note- this is just a theory: I have *not* looked at any JDT source to attempt
to verify this theory...)</pre>
    </div>

    <div id="c36" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c36">Comment 36</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-20 13:55:35 EDT
        </span>

      </div>




<pre class="bz_comment_text">&quot;Note- if this is false then my theory is blown out of the water!&quot;

Its false.

Individual builders in Eclipse do not scan files/folders looking for changes. 
The Build Manager computes the deltas &amp; informs each builder attached to the 
changed project to incrementally build IF it is affected by the deltas.

The Java Builder records build state information about its generated .class 
files &amp; projects it depends on. We must do full builds when this information 
cannot be trusted (such as external builders deleting .class files).



So how many projects are being rebuilt by Ant or some other external builder 
AND then by Eclipse... over and over?

If your project is built by Ant, then why build it again with Eclipse? Why is 
the Ant output not acceptable?

If you have added all the source into Eclipse, why run the external builder 
(if it does NOT generate more source files), only to build it with Eclipse 
afterwards? If it does generate source, then why compile it with the external 
builder if Eclipse will build it anyway?</pre>
    </div>

    <div id="c37" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c37">Comment 37</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Randy Rizun</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=rrizun&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=rrizun&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-20 13:56:58 EDT
        </span>

      </div>




<pre class="bz_comment_text">JavaBuilder.hasClasspathChanged() perhaps this could be changed to detected the
physical non-presence of any output folders? dunno... or perhaps JavaBuilder's
IBuild.build(...) could do the actual check for the presence/absence of any
output folders and invoke a buildAll() if they are physically missing from the
filesystem (is this also applicable for source folders too?!? dunno...)</pre>
    </div>

    <div id="c38" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c38">Comment 38</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-20 14:01:22 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=99497#c35">comment #35</a>)
<span class="quote">&gt; The proposed solution &quot;clean project when output folder disappears&quot; is probably
&gt; quite misleading... (it is to me) ...</span >

What called &quot;Clean...&quot; in JDT is actually full rebuild.</pre>
    </div>

    <div id="c39" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c39">Comment 39</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Randy Rizun</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=rrizun&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=rrizun&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-20 14:05:20 EDT
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt;&gt;&gt; We must do full builds when this information </span >
cannot be trusted (such as external builders deleting .class files).

How about instead of:
(such as external builders deleting .class files)
How about:
(such as external builders deleting folders containing .class files)

I think this is the root cause... I think this is the case that is not taken
care of?
</pre>
    </div>

    <div id="c40" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c40">Comment 40</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-20 14:12:53 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=99497#c35">comment #35</a>)
<span class="quote">&gt; So how many projects are being rebuilt by Ant or some other external builder 
&gt; AND then by Eclipse... over and over?
&gt; 
&gt; If your project is built by Ant, then why build it again with Eclipse? Why is 
&gt; the Ant output not acceptable?
&gt; 
&gt; If you have added all the source into Eclipse, why run the external builder 
&gt; (if it does NOT generate more source files), only to build it with Eclipse 
&gt; afterwards? If it does generate source, then why compile it with the external 
&gt; builder if Eclipse will build it anyway?</span >

Major reason, of course is that Eclipse has an incremental compiler which is
incredible fast. However if project is using some kind of code generation
(javacc, xdoclet, etc) it may be necessary to run clean when generator metainfo
had been significantly changed, so incremental compilation won't work. I case of
XDoclet this happens every time when for example EJB interfaces are changed.

It is also a good practice to have as few dirs in a project root as possible
(this is very well supported by Maven and it is also in a Ant best practices),
so ideally you'd have all build output under one directory (eg. target -
target/classes, target/test-classes, etc) and common implementation of Ant's
clean target is just deleting entire target directory and it is also the fastest
way to clean everything. So, this dir can't be used for your proposed workaround
to put eclipse classes aside and that forces developers to croud project root
directory, which leads to adding this additional dir to cvs/svn exclude,
removing it from worksing sets, etc...
</pre>
    </div>

    <div id="c41" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c41">Comment 41</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-20 14:19:35 EDT
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt;&gt;How about: (such as external builders deleting folders containing .class </span >
files)

No that is just one of the many things an external builder can do.

An external builder could delete the entire contents of the output folder and 
then compile half of the source files in the project. Every package could be 
added back to the output folder, but 10 .class files could be missing.

We cannot trust our build state to perform an incremental build &amp; must perform 
a Clean, followed by a full build.

As the user, you know when you have run your external builder &amp; when a Refresh 
+ Clean is the appropriate action.

Added your comments to <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED INVALID - [Workbench] Option to refresh projects in new Project/Clean... dialog"
   href="show_bug.cgi?id=60905">bug 60905</a> that you want Clean to have a Refresh flag 
attached. Then it will be a single operation.</pre>
    </div>

    <div id="c42" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c42">Comment 42</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-20 14:49:49 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=99497#c41">comment #41</a>)
<span class="quote">&gt; &gt;&gt;How about: (such as external builders deleting folders containing .class 
&gt; files)
&gt; 
&gt; No that is just one of the many things an external builder can do.</span >

And this is the only thing that makes a huge difference when refresh is kicked
by the user or explicitly configured in &quot;External tools configuration&quot; in Eclipse.

<span class="quote">&gt; An external builder could delete the entire contents of the output folder and 
&gt; then compile half of the source files in the project. Every package could be 
&gt; added back to the output folder, but 10 .class files could be missing.
&gt; 
&gt; We cannot trust our build state to perform an incremental build &amp; must perform 
&gt; a Clean, followed by a full build.</span >

For that case it would be acceptable to let user to explicitly run &quot;clean&quot; 

<span class="quote">&gt; As the user, you know when you have run your external builder &amp; when a Refresh 
&gt; + Clean is the appropriate action.
&gt; 
&gt; Added your comments to <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED INVALID - [Workbench] Option to refresh projects in new Project/Clean... dialog"
   href="show_bug.cgi?id=60905">bug 60905</a> that you want Clean to have a Refresh flag 
&gt; attached. Then it will be a single operation.</span >

As I already mentioned, this won't help with refresh kicked by Eclipse's
&quot;external tools&quot;. 

I have feeling that it could work for me to always run Clean on manual refresh
(F5 on any of the project dirs).
</pre>
    </div>

    <div id="c43" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c43">Comment 43</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ed Burnette</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ed.burnette&#64;sas.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ed.burnette&#64;sas.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-20 19:24:02 EDT
        </span>

      </div>




<pre class="bz_comment_text">I'm not sure why, and I can't reproduce it, but once in a while the manual
refresh and Project &gt; Clean after doing an Ant build outside Eclipse doesn't
work for me. Just a few days ago I had this problem and ended up having to clean
several times both with Eclipse and with Ant and eventually delete and recreate
the generated Java files to make them rebuild properly. When this happens it
seems to help to turn off automatic builds in Eclipse for a while and not turn
them back on until everything is rebuilt and running correctly. It's only
happened about a half dozen times in the past year so I can live with it but
it's kind of annoying when it happens. Note I don't have the
automatic-detect-external refresh option turned on because it tends to be
flakey, so by refresh I mean F5.</pre>
    </div>

    <div id="c44" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c44">Comment 44</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-20 19:31:02 EDT
        </span>

      </div>




<pre class="bz_comment_text">Ed, what is the source file overlap between the Ant build &amp; Eclipse?

Is it all the files or just some? Does the Ant build generate any source files?</pre>
    </div>

    <div id="c45" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c45">Comment 45</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ed Burnette</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ed.burnette&#64;sas.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ed.burnette&#64;sas.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-20 19:44:59 EDT
        </span>

      </div>




<pre class="bz_comment_text">In the case I just described, the Ant script generates two .java files from .xml
files. Most of the time I'm ok using the Eclipse compiler, but if the .xml files
change when I fetch the latest from the Perforce repository, I start to get
compile errors (or runtime errors sometimes) because of code that is expecting
those changes to be there. That's when I have to go back and use the Ant build,
to do all the things Eclipse doesn't know about. Except for a couple of weird
cases like this, all the source overlaps between Eclipse and Ant builds, and all
the class files overlap too.</pre>
    </div>

    <div id="c46" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c46">Comment 46</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Randy Rizun</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=rrizun&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=rrizun&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-20 20:00:16 EDT
        </span>

      </div>




<pre class="bz_comment_text">Kent- Thanks for the reply... Indeed, my assumptions were incorrect. I guess
that's what I get for attempting to solve this problem without looking at the
source code! =)

After further research (i.e., *looking at the source code*), some interesting
findings:

Going back above to my &quot;Consider this simple experiment&quot; comments, the sample
'TryIt' project... One does *not* have to use a command-prompt to 'delete things
behind Eclipse's back'... One can simply use the Resources Navigator view (much
easier to demonstrate!):

[*without* my change below]
a. If one deletes Main.class from the Resources Navigator, one can note that
Main.class will *not* get regenerated.
b. interestingly, though, if one deletes the 'bin' folder from the Resources
Navigator, the 'bin' directory *does* reappear (the Java builder notices that it
has disappeared and re-creates it), but Main.class does not re-appear. This
seems inconsistent to me.

I would think that Folders(packages) and Files(.class files) should be treated
roughly the same in this respect. If they are part of the output and they are
deleted behind Eclipse's back (more specifically, behind JDT's back) then Java
builder should re-create them. 
Currently, java builder recreates folders, but not files.

So, I had a peek at jdt source and made the following change in
&quot;IncrementalImageBuilder.java&quot; (added two (2) lines, prefixed with [randy])...
You'll note that by applying this fix and running the above 'Consider this
simple experiment' (<a href="show_bug.cgi?id=99497#c21">comment#21</a>), if you delete Main.class via Resources
Navigator it'll just magically reappear! (automatically rebuilt by java builder)

Kent- were you able to reproduce the experiment in <a href="show_bug.cgi?id=99497#c21">comment#21</a>? If so, do you
agree with my findings?

[disclaimer: this is my first look at JDT source, so, I'm not necessarily saying
that these two lines are ready to checkin! I'm really not familiar w/JDT and
can't say that I really know the ramifications of these two lines... however,
running simple tests, it *seems* to be a good fix! =)]

--- snip (lotsa context) ---

public boolean build(SimpleLookupTable deltas) {
	// initialize builder
	// walk this project's deltas, find changed source files
	// walk prereq projects' deltas, find changed class files &amp; add affected source
files
	//   use the build state # to skip the deltas for certain prereq projects
	//   ignore changed zip/jar files since they caused a full build
	// compile the source files &amp; acceptResult()
	// compare the produced class files against the existing ones on disk
	// recompile all dependent source files of any type with structural changes or
new/removed secondary type
	// keep a loop counter to abort &amp; perform a full build

	if (JavaBuilder.DEBUG)
		System.out.println(&quot;INCREMENTAL build&quot;); //$NON-NLS-1$

	try {
		resetCollections();

		notifier.subTask(Messages.build_analyzingDeltas); 
		IResourceDelta sourceDelta = (IResourceDelta)
deltas.get(javaBuilder.currentProject);
		if (sourceDelta != null)
			if (!findSourceFiles(sourceDelta)) return false;
[randy]		if (sourceDelta != null)
[randy]			if (!findAffectedSourceFiles(sourceDelta,
nameEnvironment.binaryLocations, javaBuilder.currentProject)) return false;

		notifier.updateProgressDelta(0.10f);

		Object[] keyTable = deltas.keyTable;
		Object[] valueTable = deltas.valueTable;
		for (int i = 0, l = valueTable.length; i &lt; l; i++) {
			IResourceDelta delta = (IResourceDelta) valueTable[i];
			if (delta != null) {
				IProject p = (IProject) keyTable[i];
				ClasspathLocation[] classFoldersAndJars = (ClasspathLocation[])
javaBuilder.binaryLocationsPerProject.get(p);
				if (classFoldersAndJars != null)
					if (!findAffectedSourceFiles(delta, classFoldersAndJars, p)) return false;
			}
		}
</pre>
    </div>

    <div id="c47" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c47">Comment 47</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-21 05:41:56 EDT
        </span>

      </div>




<pre class="bz_comment_text">Randy, the only folder that is recreated is the output folder... and that is a 
side affect of how we look it up.

Its pointless exploring hacks to the incremental builder given the numerous 
different ways projects can be set up + the different combinations of external 
modifications (adding/changing/deleting folders &amp; .class files).

As I have said several times already: When the build state can no longer be 
trusted, we MUST do a Clean followed by a full build.</pre>
    </div>

    <div id="c48" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c48">Comment 48</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-21 10:17:22 EDT
        </span>

      </div>




<pre class="bz_comment_text">Ed, do you have any projects that depend on the project with the generated 
source files? If so, then I think this is what is happening:

Say I have Project A &amp; inside is X.java, which is generated whenever I run an 
Ant script... it also builds all the source so project A is consistent (if it 
only builds some, then A is also inconsistent) but Project B is not since it 
depends on Project A.

After a refresh is run, an incremental build finds X.java as a source change &amp; 
compiles it again inside Eclipse, but no structural change is found because 
Ant has already replaced the X.class. Project B is told that A was rebuilt but 
no structural changes were found, so B does not rebuild dependents.

Make sense?

The refresh launching an incremental build cannot possibly be guaranteed to 
produce a consistent result in all cases.

Instead refresh should launch a full build to be sure that all changes are 
propagated correctly, and if not, then at least tell builders that a refresh 
caused the incremental build, so a full build can happen instead.</pre>
    </div>

    <div id="c49" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c49">Comment 49</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ed Burnette</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ed.burnette&#64;sas.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ed.burnette&#64;sas.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-21 14:08:39 EDT
        </span>

      </div>




<pre class="bz_comment_text">I don't have any projects that depend on the project with the generated source
files.</pre>
    </div>

    <div id="c50" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c50">Comment 50</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Randy Rizun</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=rrizun&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=rrizun&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-21 15:49:27 EDT
        </span>

      </div>




<pre class="bz_comment_text">Kent- 

<span class="quote">&gt;&gt;&gt; [Kent] As I have said several times already: When the build state can no</span >
longer be 
trusted, we MUST do a Clean followed by a full build.

agreed 100%

My change above improves on this by doing 2 things:

(a) *increases* the number of cases whereby the build state *can* be trusted
thereby making the Java builder even better, i.e,. there are more cases where
the Java Builder can *confidently* perform a fast/correct incremental build
rather than default to the user having to know to do a manual clean/rebuild all.

(b) eliminates the case whereby Eclipse can 'shoot itself in the foot' by
allowing a user to delete a .class file (Main.class) via Resources Navigator and
trip up JDT. If JDT builder is notified of a .class file deletion then JDT
builder should rebuild it. Currently this is not the case. The above change
makes it so.

I guess that is the crucial statement: &quot;If JDT builder is notified that a .class
file has changed (in this case, deleted) then JDT builder should rebuild it from
its corresponding .java source.&quot;. 

More generally, if JDT is notified of any changes to .class files (and
Platform/Resources *is* indeed correctly reporting this), then JDT should
perform an incremental build of those .java files that correspond to (affected
by) those .class files.

This whole problem can be easily demonstrated by creating a simple Java project
with a single .java source file (just like <a href="show_bug.cgi?id=99497#c21">comment #21</a>) and then zooming off to
Resources Navigator and deleting the .class file. Observe that the .class file
is *not* regenerated, thus pumping JDT into an inconsistent state. JDT *was*
notified of the change in resource(s) (the .class file) but did not
incrementally build it when it was perfectly capable of doing so.

Kent, way back in <a href="show_bug.cgi?id=99497#c5">comment #5</a> you requested:
   &gt;&gt;&gt; Can you please provide us a reproduceable testcase?
Here it is!

Ed- This is probably the root of your build problems too- ANT regenerates .class
files and then when you zoom back to Eclipse and do a Project Refresh, JDT fails
to re-re-generate some .class files using its compiler (as you would want it to)
thus resulting in a half-baked JDT state with the described behaviour.
</pre>
    </div>

    <div id="c51" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c51">Comment 51</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-21 16:31:49 EDT
        </span>

      </div>




<pre class="bz_comment_text">Did you miss the part about slowing down incremental builds looking for 
extremely rare cases, that result in a full build anyway?

If you consider deleting individual .class files for fun as something we 
should waste time looking for, then there is not much point discussing how to 
improve our integration.

Guess how many incremental builds are run by Eclipse users every day, that 
NEVER need to look for a random deleted .class file.

Then assume your Ant script has rebuilt your project &amp; changed every or most 
of your .class files. What is the point in doing an incremental build that 
would need to traverse the project looking for each source file to match up to 
each changed .class file... only to recompile them again?

Its slower than a full build!</pre>
    </div>

    <div id="c52" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c52">Comment 52</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Randy Rizun</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=rrizun&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=rrizun&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-21 19:37:34 EDT
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt;&gt;&gt; [Kent] Did you miss the part about slowing down incremental builds looking for </span >
extremely rare cases, that result in a full build anyway?

I've ran some tests *with* and *without* my change on a Java project
(w/5000 .java files, 2 millions lines of source, takes 1m45s to *compile* this
proj from scratch in Eclipse, not including scrubbing output folder/copying
resources to output folder stages, Linux and Windows, 2.8GHz/1.25GB).

Findings: There is no slowdown in *looking* for these extremely rare cases.
So there is no impact other to users when these extremely rare cases are not
applicable. I've ran the tests and have the numbers to prove it.

<span class="quote">&gt;&gt;&gt; [Kent] If you consider deleting individual .class files for fun as something we </span >
should waste time looking for, then there is not much point discussing how to 
improve our integration.

Ed, Eugene and I are not deleting .class files 'for fun'. We have real world
projects that trip up Eclipse JDT because of this problem. And there is not good
reason for it. And I don't consider it a waste of time.

<span class="quote">&gt;&gt;&gt; [Kent] Guess how many incremental builds are run by Eclipse users every day,</span >
that 
NEVER need to look for a random deleted .class file.

<span class="quote">&gt;&gt;&gt; [Kent] Then assume your Ant script has rebuilt your project &amp; changed every</span >
or most 
of your .class files. What is the point in doing an incremental build that 
would need to traverse the project looking for each source file to match up to 
each changed .class file... only to recompile them again?

<span class="quote">&gt;&gt;&gt; [Kent] Its slower than a full build!</span >

What is the point? The point is: CORRECTNESS! Eclipse would automatically
default to the *correct* case without user intervention. Currently, Eclipse
immediately arrrives at the *incorrect* case, and the user is required to *know*
to 'kick' Eclipse by doing Refreshes/Rebuilds until Eclipse stops complaining.
What kind of user experience is that?

Agreed that this is a corner case where 99% of users will not be here 99% of the
time. But when it does happen, it would be nice for Eclipse to still produce the
*correct* answer by default, not the *wrong* answer like it currently does!

So what if Eclipse just happens to do an incremental build of 5000 .java files
in this corner case? At least it is the *correct* and automatic default case!
Why not have Eclipse work *correctly* 100% of the time instead of only 99% of
the time, failing the rest of the time??

I don't understand, Kent:
(a) We have three Eclipse power-users informing of a JDT bug.
(b) It has been characterized down to a trivial test case.
(c) I have provided the fix.

What gives? Why so much resistance?
</pre>
    </div>

    <div id="c53" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c53">Comment 53</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-21 20:18:25 EDT
        </span>

      </div>




<pre class="bz_comment_text">So the open question is IF the Build Manager added a new type of build (call 
it Refresh) in addition to Incremental &amp; Full build, how often could JDT do a 
new Refresh build instead of a Full build?

How many different things would we have to look for:

1. Any number of new .class files can appear in an output folder when an 
external builder compiles source files that are 'unknown' to Eclipse. If the 
option to not clean the output folder is set, then we want to see these 
new/changed .class files as if they were in a class folder (ie. recompile any 
source file that is dependent on that type). How long does it take to realize 
that these .class files do not come from any known source file?

2. Any number of existing .class files can be recompiled. Can we trust the 
external builder created these .class files from the same source files &amp; all 
at once so no additional dependencies need to be propagated between them? Or 
do we need to recompile them ourselves? We definitely need to consider each 
change as a structural change &amp; recompile all dependent types, since we did 
not get to compare each new .class file with the previous one.

3. Any number of existing files (.class files &amp; random resource files) and 
packages could have been deleted. In this case we need to find all source 
files that no longer have a .class file and recreate them, as well as 
propagate these 'new' types as brand new to all dependent types. All the 
deleted resource files need to copied back to the output folder.

And the obvious question to consider is 'when are we saving any time over a 
full build?'

We definitely are not if the entire output folder has been deleted. If 
every .class file (or a large percentage) has been changed by the external 
builder, then it depends on whether we trust the output (which we likely will 
NOT).</pre>
    </div>

    <div id="c54" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c54">Comment 54</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-21 20:31:30 EDT
        </span>

      </div>




<pre class="bz_comment_text">Randy, what does <a href="show_bug.cgi?id=99497#c48">comment #48</a> say?

The problem is with refresh invoking an incremental build as if the user had 
made the changes inside Eclipse.

It doesn't work, nor does hacking the incremental builder in simple ways 
to 'make' it work for toy testcases.</pre>
    </div>

    <div id="c55" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c55">Comment 55</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-21 20:39:36 EDT
        </span>

      </div>




<pre class="bz_comment_text">And can you please explain if a 1.5 second Full build is acceptable to you... 
why are you then complaining that refresh should NOT invoke a Full build 
instead of an Incremental build?</pre>
    </div>

    <div id="c56" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c56">Comment 56</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-21 20:52:35 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=99497#c55">comment #55</a>)
<span class="quote">&gt; And can you please explain if a 1.5 second Full build is acceptable to you... 
&gt; why are you then complaining that refresh should NOT invoke a Full build 
&gt; instead of an Incremental build?</span >

Kent, I can't say for everyone, but for me it is ok to have a full build when I
explicitly kick refresh in Eclipse, especially on a project root folder. That is
what I have to do anyway.

If you feel that it is wrong to have that for everybody, why don't make this
configurable and let users decide what they prefer...</pre>
    </div>

    <div id="c57" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c57">Comment 57</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-21 21:43:10 EDT
        </span>

      </div>




<pre class="bz_comment_text">Just seeing if anybody was reading what I'm writing...

Obviously not many Full builds take 1.5 seconds, many take 5-10 minutes.

But the question remains: if your primary concern is that the build state is 
correct, then what is the objection to a full build after refresh?

Eugene, can we trust users to know what their external builders are doing?

It does not appear that we can.

So if build state consistency is the only objective (and I think it should 
be), then how long it takes to make it happen must be secondary.</pre>
    </div>

    <div id="c58" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c58">Comment 58</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Randy Rizun</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=rrizun&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=rrizun&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-21 21:47:39 EDT
        </span>

      </div>




<pre class="bz_comment_text">Kent-

a. I don't think a new build type called 'Refresh' is warranted (never did) That
idea originated, I believe, from Eugene in which I never agreed with myself (We
ran into the same problem, though disagree on the solution). I maintain that we
can solve these problems without confusing/polluting the UI with another obscure
build option that most people probably won't intiailly understand anyway.

The incremental builder does *not* need to know if changes were discovered via a
'Refresh'.

b. &quot;Any number of new .calss files can appear in an output folder...&quot; Absolutely!
c. &quot;Any number of existing .class files can be recompiled...&quot; Absolutely!
d. &quot;Any number of existing files (.class files &amp; random resource files) could
have been deleted...&quot; Absolutely!

<span class="quote">&gt;&gt;&gt; [Kent] And the obvious question to consider is 'when are we saving any time</span >
over a 
full build?'

Kent- this whole problem has absolutely nothing to do with speed, its about
*correctness*. Nobody is complaining about speed. Everybody is complaining about
*correctness*.

<span class="quote">&gt;&gt;&gt; [Kent] If every .class file (or a large percentage) has been changed by the</span >
external 
builder, then it depends on whether we trust the output (which we likely will 
NOT).

agreed 100%... Don't trust it. Incrementally rebuild it. And that is what my
change does. And it does it correctly.

<span class="quote">&gt;&gt;&gt; [Kent, from <a href="show_bug.cgi?id=99497#c48">comment #48</a>]  The refresh launching an incremental build cannot</span >
possibly be guaranteed to 
produce a consistent result in all cases.

Theoretically, Yes it can. Practically, it should strive to do the best job
possible, within reason.

[well, of course, barring any explicit evil trickery that evil-doers might do
just to explitly trip it up, but, all build systems have this possibility... its
not an interesting case though. I mean, hey, if somebody *really* wants to come
up with some sort of pathalogical trick/hack to intentially trip up the build
state, then, yay, congratulations and all more the power to 'em! =)]

So, yes it can. And it should, for a *well intentioned* external build system
(eg., an external ANT script) that truly wants to rebuild the world in a
well-intentioned manner. And even if there are other cases whereby it is
impossible, so what? The whole point is that my fix *increases* the number of
cases where we *can* result in a *correct* incremental build! It increases
correctness!

<span class="quote">&gt;&gt;&gt; [Kent] The problem is with refresh invoking an incremental build as if the</span >
user had 
made the changes inside Eclipse.

Correct. But there should be no difference between making changes within Eclipse
or outside of Eclipse.

<span class="quote">&gt;&gt;&gt; [Kent] It doesn't work, </span >

Correct: It does not currently work right now.

<span class="quote">&gt;&gt;&gt; [Kent] nor does hacking the incremental builder in simple ways </span >
to 'make' it work for toy testcases.

Apply my two lines of source code to IncrementalImageBuilder.java and it *will
work*! It works for toy testcases and it works for my 2million LOC testcase. (a
similiar fix would need to be applied to also copy over any deleted (or changed)
random resources files as well upon a 'Refresh').

<span class="quote">&gt;&gt;&gt; [Kent] And can you please explain if a 1.5 second Full build is acceptable</span >
to you... 
why are you then complaining that refresh should NOT invoke a Full build 
instead of an Incremental build?

I (and others) am complaining that refresh should result in a *correct*
incremental build. Performance was never an issue. Correctness is.
</pre>
    </div>

    <div id="c59" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c59">Comment 59</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Randy Rizun</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=rrizun&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=rrizun&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-21 21:53:08 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=99497#c57">comment #57</a>)
<span class="quote">&gt; Just seeing if anybody was reading what I'm writing...
&gt; 
&gt; Obviously not many Full builds take 1.5 seconds, many take 5-10 minutes.
&gt; 
&gt; But the question remains: if your primary concern is that the build state is 
&gt; correct, then what is the objection to a full build after refresh?</span >

The objection is that the user needs to know to do this. They need to know to
kick eclipse and do it. Why make the user do something when we don't have to
make them do it? The Java builder is perfectly capable of resulting in a
*correct* incremental build... Lets do it then!

<span class="quote">&gt; 
&gt; Eugene, can we trust users to know what their external builders are doing?
&gt; It does not appear that we can.</span >

Agreed. Ecipse should only look out for itself. If the build engineer's setup is
not correct, then hey, its a bug in the build system that needs to be fixed. But
if an external build system is setup to build the same was the Eclipse would
build (i.e., high fidelity) then one build system should not trip up the other
build system. Both build systems should take care of themselves and not trip up.

<span class="quote">&gt; So if build state consistency is the only objective (and I think it should 
&gt; be), then how long it takes to make it happen must be secondary.</span >

Yes!
</pre>
    </div>

    <div id="c60" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c60">Comment 60</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-21 22:43:16 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=99497#c57">comment #57</a>)
<span class="quote">&gt; Just seeing if anybody was reading what I'm writing...
&gt; 
&gt; Obviously not many Full builds take 1.5 seconds, many take 5-10 minutes.</span >

That is why my original suggestion was to run full build only when one or all
output directories had been removed. If I reading you correctly your build is
recreating those directories, so you know when they had been removed. Don't you?

<span class="quote">&gt; But the question remains: if your primary concern is that the build state is 
&gt; correct, then what is the objection to a full build after refresh?
&gt; 
&gt; Eugene, can we trust users to know what their external builders are doing?
&gt; It does not appear that we can.</span >

I'm not complaining about the cases when external build is modifying classes
compiled by Eclipse. I'm looking at the more reasonable case when Eclipse got a
cleaned project after running external tool. As I said before, most common case
is the &quot;clean&quot; target in ant or maven.

<span class="quote">&gt; So if build state consistency is the only objective (and I think it should 
&gt; be), then how long it takes to make it happen must be secondary.</span >

Not sure where you are going with this. 

Anyway, there is an indentified case when you found that target dir had been
deleted, so it is a signal that something happens and chances are that you need
a full build. Where I am wrong?

</pre>
    </div>

    <div id="c61" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c61">Comment 61</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-22 01:44:43 EDT
        </span>

      </div>




<pre class="bz_comment_text">Randy, the proposal is that Refresh should be changed to invoke a Refresh (or 
a normal Full) build AND that this will be faster than any incremental story.

No where did I suggest a new UI command.

A Refresh build would be invoked by the Build Manager across all builders in 
the workspace. As a user you could not tell the difference. You would still 
choose the same Refresh command in the UI.

Why argue that speed is not important, that only correctness is, but then say 
we have to make incremental builds handle abnormal changes?

It makes no sense at all. Incremental builds are meant to be very fast. Full 
builds are not since they start from scratch, but help us recover from any 
form of change.</pre>
    </div>

    <div id="c62" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c62">Comment 62</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-22 01:55:42 EDT
        </span>

      </div>




<pre class="bz_comment_text">Eugene, I think the common case is Ed's scenario and not yours (inherited Ant 
script generates a couple new source files AND compiles every source file in 
project, replacing every .class file &amp; not deleting them)... but it doesn't 
matter.

<span class="quote">&gt;&gt; If I'm reading you correctly your build is recreating those directories</span >

No the incremental builder does NOT recreate missing package folders... but it 
will ensure that a package folder exists before writing a .class file. That is 
why 'some' package folders may reappear.

The output folder itself is a different story. We will always guarantee that 
it exists at the start of a build.

<span class="quote">&gt;&gt; Not sure where you are going with this.</span >

My point is that refresh should launch a Full build instead of an Incremental 
build, and if it did you would never have seen the problems you do now.

In your case, because every .class file was deleted, a Full build is the 
fastest way to rebuild your project. Spending any time figuring out that every 
source file needs to be compiled is a waste of time.</pre>
    </div>

    <div id="c63" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c63">Comment 63</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-22 02:20:46 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=99497#c62">comment #62</a>)
<span class="quote">&gt; &gt;&gt; If I'm reading you correctly your build is recreating those directories
&gt; 
&gt; No the incremental builder does NOT recreate missing package folders... but it 
&gt; will ensure that a package folder exists before writing a .class file. That is 
&gt; why 'some' package folders may reappear.</span >
&gt;
<span class="quote">&gt; The output folder itself is a different story. We will always guarantee that 
&gt; it exists at the start of a build.</span >

Hmm. That is where full build could be forced... But it probably doesn't matter
considering later conclusion.

<span class="quote">&gt; &gt;&gt; Not sure where you are going with this.
&gt; My point is that refresh should launch a Full build instead of an Incremental 
&gt; build, and if it did you would never have seen the problems you do now.</span >

Probably you are right.

<span class="quote">&gt; In your case, because every .class file was deleted, a Full build is the 
&gt; fastest way to rebuild your project. </span >

In my case yes. I think it will be acceptable.

<span class="quote">&gt; Spending any time figuring out that every 
&gt; source file needs to be compiled is a waste of time.</span >

You can tell this right away when see no output folder.

So, do we have complete agreement now? If so can you please reopen this issue?</pre>
    </div>

    <div id="c64" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c64">Comment 64</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-22 08:43:14 EDT
        </span>

      </div>




<pre class="bz_comment_text">&quot;You can tell this right away when see no output folder.&quot;

But in your case, the Maven builder created .class files in the output folder 
after it deleted everything, did it not?


BTW: you can already have the behaviour of Refresh + Clean/Full build by 
turning off automatic builds, and launching builds when you want 
(incrementally with Ctrl-B or full builds with Clean...).</pre>
    </div>

    <div id="c65" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c65">Comment 65</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-22 08:46:42 EDT
        </span>

      </div>




<pre class="bz_comment_text">Ed, are you still listening?

I believe you said the overlap between the Ant script &amp; Eclipse is all of the 
source files?

If so, I would like to track down why a Clean/Full build does not produce a 
consistent result everytime.</pre>
    </div>

    <div id="c66" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c66">Comment 66</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-22 09:49:32 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=99497#c64">comment #64</a>)
<span class="quote">&gt; &quot;You can tell this right away when see no output folder.&quot;
&gt; 
&gt; But in your case, the Maven builder created .class files in the output folder 
&gt; after it deleted everything, did it not?</span >

Not in the project where I had problems. It all started at the one when maven's
clean goal was deleting Eclipse's output directory.

<span class="quote">&gt; BTW: you can already have the behaviour of Refresh + Clean/Full build by 
&gt; turning off automatic builds, and launching builds when you want 
&gt; (incrementally with Ctrl-B or full builds with Clean...).</span >

Ctrl-B is too much. I have about 50 projects in workspace and I don't really
want to rebuild them all when only one of them was refreshed and I sort of
expected not to loose authomatic builds when this issue will be resolved...</pre>
    </div>

    <div id="c67" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c67">Comment 67</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-22 10:24:08 EDT
        </span>

      </div>




<pre class="bz_comment_text">&quot;Ctrl-B is too much. I have about 50 projects in workspace and I don't really
want to rebuild them all when only one of them was refreshed and I sort of
expected not to loose authomatic builds when this issue will be resolved...&quot;

STOP! ;)

Crtl-B is the exact same as an automatic incremental build. It is NOT a Full 
build. You must select Clean... to fully rebuild every project.

When you refresh 1 project with auto build on, all dependent projects are 
built to see the changes (but since its not a normal incremental build, this 
currently does not work - but it will if you do a Full build - for now).

And when we have a solution, you can turn auto builds back on... but for now, 
you should turn them off &amp; do Crtl-B for an incremental build when you make 
changes inside Eclipse, and Clean for a full build after you have run your 
external builder.</pre>
    </div>

    <div id="c68" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c68">Comment 68</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Randy Rizun</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=rrizun&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=rrizun&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-22 12:15:32 EDT
        </span>

      </div>




<pre class="bz_comment_text">Glad to see this reopened.

So, with this new 'refresh build' upon 'refresh' proposal: Are we saying that,
if I have 5000 .java files, if I go behind Eclipse's back and use Command
Prompt+Notepad.exe to modify one (1) .java file, and then zoom back to Eclipse
and do a Project-&gt;Refresh, that Eclipse JDT is gonna rebuild the world?

If not, then what would happen in this case?!?</pre>
    </div>

    <div id="c69" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c69">Comment 69</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-22 12:29:48 EDT
        </span>

      </div>




<pre class="bz_comment_text">We'll likely deal with cases that have no changes in the output folder as a 
normal incremental build.

But you already said that consistency is what matters, not speed so do not 
expect many cases to be optimized.

I won't be surprised if we end up doing full builds most of the time... 
something you can already do yourself after a refresh by selecting Clean.</pre>
    </div>

    <div id="c70" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c70">Comment 70</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Randy Rizun</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=rrizun&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=rrizun&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-22 13:45:24 EDT
        </span>

      </div>




<pre class="bz_comment_text">Ah, I see... the proposed solution is to consider the output folder(s) only in
the decision to to a full rebuild...

My question is: Why should we differentiate between changes in source folder(s)
vs changes in output folder(s) ?!? It would be arbitrary to do so.

So, said another way: with this new 'refresh build' upon 'refresh' proposal:
Are we saying that, if I have 5000 .class files, if I go behind Eclipse's back
and delete one (1) .class file, and then zoom back to Eclipse
and do a Project-&gt;Refresh, that Eclipse JDT is gonna rebuild the world?

Yes, it would be correct, but would be unneccessarily slow, i.e., we would have
done a full rebuild when we didn't have to...

Why should JDT arbitrarily default to rebuild the world? It is given the correct
delta (one (1) deleted file) from Platform/Resources, and is perfectly capable
of doing a fast/correct incremental build!

It seems like the proposal is to 'special case' this whole thing... And to make
it always slow, even when it does'nt have to be slow. It is not a special case.
It is the general case of performing an incremental build based on any changes
from anywhere, i.e., from either source folder(s) and/or output folder(s).

So, I guess what I'm saying is, why not consider these lines (or some variant)?!?

<span class="quote">&gt; if (sourceDelta != null)
&gt;    if (!findAffectedSourceFiles(sourceDelta, nameEnvironment.binaryLocations,</span >
javaBuilder.currentProject)) return false;

(and do something similar for non-java resource files too)

Fast when it can be fast. Always correct.
</pre>
    </div>

    <div id="c71" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c71">Comment 71</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-22 14:24:50 EDT
        </span>

      </div>




<pre class="bz_comment_text">Randy, your 2 lines do not accomplish anything close to what you think they do.

The Incremental builder does not find a source file to recompile when 
its .class file is deleted or changed. It finds source files in the delta &amp; 
propagates changes to other .class files IF they are tagged as structurally 
changed.

You really need to make up your mind between correctness vs. speed for builds 
after a refresh. You've said correctness is the only thing that matters.

So... wait until we 'know' that this build follows a refresh, then we'll see 
what cases actually happen &amp; could be optimized.</pre>
    </div>

    <div id="c72" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c72">Comment 72</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Randy Rizun</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=rrizun&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=rrizun&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-22 15:48:52 EDT
        </span>

      </div>




<pre class="bz_comment_text">Fair enough, Kent- A correct solution first, and optimize later...</pre>
    </div>

    <div id="c73" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c73">Comment 73</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Philipe Mulet</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=philippe_mulet&#64;fr.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=philippe_mulet&#64;fr.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-22 17:05:24 EDT
        </span>

      </div>




<pre class="bz_comment_text">1. If we go into a solution watching changes in output folder, we need to be
careful of cases where other builders (in Eclipse) are also generating
classfiles into it.  Currently, this causes no harm as long as they don't
overlap; and this is the case where we introduced the flag for not cleaning the
output folder to be resilient with other players.

2. If we did consider binary changes, it would require to correlate these to
managed source files (i.e. did we build it at some point?) to realize if someone
messed with our binaries.

3. Last scenario which worries me a bit: what if somone injected a binary file
which is now hiding another one on the classpath. It is not managed by us, but
can we ignore it ? (no). So if we care about *any* change, then how do we deal
nicely with (1) ?</pre>
    </div>

    <div id="c74" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c74">Comment 74</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Philipe Mulet</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=philippe_mulet&#64;fr.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=philippe_mulet&#64;fr.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-22 17:09:29 EDT
        </span>

      </div>




<pre class="bz_comment_text">What about we do look at the binary delta for the output folder, as if it was a
class lib folder on the classpath. All changes are considered as structural
(since no better info to refine it). If amount of binary structural changes goes
beyond some threshold (1/3 source files), then incremental reverts to full build.</pre>
    </div>

    <div id="c75" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c75">Comment 75</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Philipe Mulet</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=philippe_mulet&#64;fr.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=philippe_mulet&#64;fr.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-22 17:10:46 EDT
        </span>

      </div>




<pre class="bz_comment_text">In normal situations (normal user not messing with external tools), the output
folder binary delta should be empty all the time, so it shouldn't cost to
traverse it.</pre>
    </div>

    <div id="c76" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c76">Comment 76</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-23 08:34:15 EDT
        </span>

      </div>




<pre class="bz_comment_text">Yes hopefully the 'normal' scenario is we 'own' the output folder &amp; its delta 
is empty all the time.

I'm not convinced a threshold is useful in real scenarios. I expect we will 
mostly see one of 3 cases after refresh:

- no binary changes at all, but a few source changes that we can incrementally 
build
- a few source changes + the entire project was recompiled so every .class 
file appears changed
- or delete all of our generated .class files without recompiling any source 
files (may add some .class files for 'unmanaged' source files)

In either of the last 2 cases, we are wasting time looking past the first 
changed/deletion of a managed .class file.</pre>
    </div>

    <div id="c77" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c77">Comment 77</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-24 12:11:17 EDT
        </span>

      </div>




<pre class="bz_comment_text">*** <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Removing generated classes doesn't trigger automatic rebuild"
   href="show_bug.cgi?id=107831">Bug 107831</a> has been marked as a duplicate of this bug. ***</pre>
    </div>

    <div id="c78" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c78">Comment 78</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-24 12:25:21 EDT
        </span>

      </div>




<pre class="bz_comment_text">Kent, is there are plans to address this issue in 3.1.x or 3.2 streams?</pre>
    </div>

    <div id="c79" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c79">Comment 79</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-24 12:32:21 EDT
        </span>

      </div>




<pre class="bz_comment_text">Likely 3.2

Its harder to convince the people in charge that it 'will not' have any side 
affects.

Some developers may have written builders that put .class files into the 
output folder (or optimized existing .class files), and will not be happy if 
we're constantly rebuilding their project because of it.</pre>
    </div>

    <div id="c80" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c80">Comment 80</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Max Gilead</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=max.gilead&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=max.gilead&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-24 15:47:27 EDT
        </span>

      </div>




<pre class="bz_comment_text">If I may express my oppinion no self-respecting developer would rely on such
behavior of another application. If someone is indeed rebuilding or optimizing
contents of output directory it should be reasonable to expect such people are
first copying that directory to some safe place where no outside forces can mess
with it and their scripts can safely work there.</pre>
    </div>

    <div id="c81" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c81">Comment 81</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-24 16:01:49 EDT
        </span>

      </div>




<pre class="bz_comment_text">Sorry, I wasn't clear.

Its perfectly reasonable that an optimizing builder detects .class files and 
tweaks them. In this case, if the Java Builder notices the changed .class 
files &amp; realizes it did not write them -&gt; then a full build is necessary to 
make the project consistent again.

But its a never ending cycle of optimizing &amp; rebuilding which undoes the 
optimizations.</pre>
    </div>

    <div id="c82" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c82">Comment 82</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-02-06 16:17:09 EST
        </span>

      </div>




<pre class="bz_comment_text">Released changes to HEAD to detect 'unknown' changes to managed .class files.

A full build will be started when such changes are detected.

Added BuildpathTests testCorruptBuilder().

If everyone can please try this out in the near future to see if it takes care of your specific problem - let us know if there is a case we missed.</pre>
    </div>

    <div id="c83" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c83">Comment 83</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">David Audel</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=david_audel&#64;fr.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=david_audel&#64;fr.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-02-14 10:56:22 EST
        </span>

      </div>




<pre class="bz_comment_text">&quot;Verified for 3.2 M5 using build I20060214-0010</pre>
    </div>

    <div id="c84" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c84">Comment 84</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-02-23 09:43:36 EST
        </span>

      </div>




<pre class="bz_comment_text">So it took less than a week for someone to complain about this change.

See <a class="bz_bug_link 
          bz_status_CLOSED  bz_closed"
   title="CLOSED FIXED - [regression] Refresh-&gt;Run action deletes all files in 'bin' directory and recompiles all classes"
   href="show_bug.cgi?id=129082">bug 129082</a>

Anyone have any ideas why we shouldn't pull this change?</pre>
    </div>

    <div id="c85" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c85">Comment 85</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-02-23 11:08:32 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=99497#c84">comment #84</a>)
<span class="quote">&gt; So it took less than a week for someone to complain about this change.
&gt; 
&gt; See <a class="bz_bug_link 
          bz_status_CLOSED  bz_closed"
   title="CLOSED FIXED - [regression] Refresh-&gt;Run action deletes all files in 'bin' directory and recompiles all classes"
   href="show_bug.cgi?id=129082">bug 129082</a>
&gt; 
&gt; Anyone have any ideas why we shouldn't pull this change?</span >

There are several things to look at:

-- Why does it happens when automatic build is disabled?
-- JDT should provide class post processor extension point to allow tools like TPTP do their own instrumentation. Another option would be to provide an API to notify JDT about such changes. So, such changes would not be considered as foreign/external.
-- Generally, TPTP and other tools shouldn't be saving extra resources and backup classes within target folder, but there are not enough flexibility in Eclipse to dynamically change target folders.

</pre>
    </div>

    <div id="c86" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c86">Comment 86</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-02-23 11:43:12 EST
        </span>

      </div>




<pre class="bz_comment_text">Well actually the problem is existing tools that optimize .class files without the builder throwing away their changes by recompiling the source file (as was already mentioned in <a href="show_bug.cgi?id=99497#c79">comment #79</a> - 81).

This change breaks their code.

Adding a new hook for them is not backwards compatible.</pre>
    </div>

    <div id="c87" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c87">Comment 87</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-02-23 11:48:50 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=99497#c86">comment #86</a>)
<span class="quote">&gt; Well actually the problem is existing tools that optimize .class files without
&gt; the builder throwing away their changes by recompiling the source file (as was
&gt; already mentioned in <a href="show_bug.cgi?id=99497#c79">comment #79</a> - 81).
&gt; 
&gt; This change breaks their code.
&gt; 
&gt; Adding a new hook for them is not backwards compatible.</span >

Ok. If such tools are using Eclipse resource API to modify those files (which they should do, when working from within Eclipse) then it should be possible to detect such changes and notify JDT. 

It still would make sense to provide a hook, so they could pick it up in new versions, especially those alligned for Calisto.

As a last resort you could allow to disable this feature in preferences, so it could be a workaround for those who have to use old tools that can't pickup new hook.</pre>
    </div>

    <div id="c88" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c88">Comment 88</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-02-23 12:06:13 EST
        </span>

      </div>




<pre class="bz_comment_text">Well I think its going to be a new option which enables this change - not the other way around.

Very few users have other tools modifying their output folder at all.

They do not need the builder spending time looking for such changes in the first place and the optimizers out there, do not want the builder undoing their changes.</pre>
    </div>

    <div id="c89" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c89">Comment 89</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-02-23 12:15:44 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=99497#c88">comment #88</a>)
<span class="quote">&gt; Well I think its going to be a new option which enables this change - not the
&gt; other way around.</span >

That's acceptable
 
<span class="quote">&gt; Very few users have other tools modifying their output folder at all.
&gt; 
&gt; They do not need the builder spending time looking for such changes in the
&gt; first place and the optimizers out there, do not want the builder undoing their
&gt; changes.</span >

I am afraid you underestimating the number of such tools. Actually there are lot of tools that could benefit from such changes. The list include but not limited to the following: 

-- performance monitoring and profilers (including TPTP and other profilers)
-- code coverage tools (Cobertura, Agitar, etc)
-- AOP tools such as JBoss AOP, AspectWerkz, and few others
-- DB and XML mapping tools including Hibernate, JDO, etc
-- basically any tools that are doing custom bytecode transformations for some special needs (e.g. testing, problem detection, concurrency, and so on and so forth)

Currently most of such tools can't provide incremental postprocessing for the bytecode compiled by JDT and have to do it in a separate pass which slows down the launching...</pre>
    </div>

    <div id="c90" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c90">Comment 90</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-02-23 12:33:16 EST
        </span>

      </div>




<pre class="bz_comment_text">No they don't.

They just have to write a builder that runs after the Java Builder and optimize the .class files that have been incrementally compiled.

Without the change from this PR, the Java builder would never replace their optimized .class files.</pre>
    </div>

    <div id="c91" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c91">Comment 91</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eugene Kuleshov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=ekuleshov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=ekuleshov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-02-23 12:40:43 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=99497#c90">comment #90</a>)
<span class="quote">&gt; No they don't.
&gt; 
&gt; They just have to write a builder that runs after the Java Builder and optimize
&gt; the .class files that have been incrementally compiled.
&gt; 
&gt; Without the change from this PR, the Java builder would never replace their
&gt; optimized .class files.</span >

Right. I am always forgetting that. So, after all it is TPTP who is doing things wrong way?

Though it would save on performance if class file could be transformed in memory before written to the file system...</pre>
    </div>

    <div id="c92" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c92">Comment 92</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-03-28 14:14:04 EST
        </span>

      </div>




<pre class="bz_comment_text">We've added an option to control when output folders will be searched during incremental builds.

Until JDT/UI adds support for it (see <a class="bz_bug_link 
          bz_status_VERIFIED  bz_closed"
   title="VERIFIED FIXED - New option to 'Recreate Modified class files in Output Folder'"
   href="show_bug.cgi?id=133668">bug 133668</a>), you can enable the option by setting:

org.eclipse.jdt.core.builder.makeOutputFolderConsistent=enabled

in the jdt.core.prefs of your .settings folder.

Without the option enabled, the builder's behaviour will be the same as it was before we released the changes for this PR.</pre>
    </div>

    <div id="c93" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=99497#c93">Comment 93</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kent Johnson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=kent_johnson&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=kent_johnson&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-03-28 14:56:02 EST
        </span>

      </div>




<pre class="bz_comment_text">Renamed the option to:

org.eclipse.jdt.core.builder.recreateModifiedClassFileInOutputFolder=enabled</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=99497">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=99497">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=99497">Clone This Bug</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>

<br>
</div>

    <div id="footer">
      <div class="intro"></div>
<ul id="useful-links">
  <li id="links-actions"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_bottom" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_bottom");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_bottom" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_bottom"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_bottom">
  <span class="separator">| </span>
  <a id="login_link_bottom" href="show_bug.cgi?id=99497&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_bottom')">Log In</a>

  <form action="show_bug.cgi?id=99497" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_bottom">
    <input id="Bugzilla_login_bottom" required
           name="Bugzilla_login" class="bz_login"
        placeholder="Login">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_bottom" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_bottom">
    <a href="#" onclick="return hide_mini_login_form('_bottom')">[x]</a>
  </form>
</li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
</ul>
  </li>

  




  
</ul>

      <div class="outro"></div>
    </div>

  </body>
</html>