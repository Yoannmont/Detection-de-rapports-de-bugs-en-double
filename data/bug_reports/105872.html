<!DOCTYPE html>
<html lang="en">
  <head>
    <title>105872 &ndash; Rename Compilation Unit does not go away</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link href="https://bugs.eclipse.org/bugs/data/assets/03c4bb46b12126a79867f9a9f5323634.css?1593441374" rel="stylesheet" type="text/css">



    
<script type="text/javascript" src="https://bugs.eclipse.org/bugs/data/assets/a7c2f3a028f17a9aa60f56dc9d6e732d.js?1593441374"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/bugs',
                maxusermatches: 10
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    "You must enter a Description for this attachment.",
                component_required:
                    "You must select a Component for this bug.",
                description_required:
                    "You must enter a Description for this bug.",
                short_desc_required:
                    "You must enter a Summary for this bug.",
                version_required:
                    "You must select a Version for this bug."
            }
              , api_token: ''
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null,
                             "105872 – Rename Compilation Unit does not go away",
                             "show_bug.cgi?id=105872" );
        document.title = "105872 – Rename Compilation Unit does not go away";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "105872 – Rename Compilation Unit does not go away", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();

    });
    // -->
    </script>
<script type="text/javascript" src="https://bugs.eclipse.org/bugs/data/assets/daf5e0fb6826e6a35280e622913f0c4a.js?1593441374"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico">
  </head>

  <body 
        class="bugs-eclipse-org-bugs
                 bz_bug
                 bz_status_RESOLVED
                 bz_product_Platform
                 bz_component_Runtime
                 bz_bug_105872 yui-skin-sam">

  <div id="header"><!-- 1.0@bugzilla.org -->





<!--  START OF SOLSTICE HEADER -->
 <link rel="stylesheet" type="text/css" href="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/stylesheets/vendor/cookieconsent/cookieconsent.min.css" />
 <script src="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/vendor/cookieconsent/default.min.js"></script>
 <style type="text/css">
    @import url('https://www.eclipse.org/eclipse.org-common/themes/solstice/public/stylesheets/barebone.min.css')
    </style>
    <script
      src="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/barebone.min.js">
    </script><header role="banner" class="barebone-layout thin-header padding-top-5 padding-bottom-5"  id="header-wrapper">
  <div class="container-fluid reset">
    <div class="row-fluid" id="header-row">
            <div class="col-sm-8 col-md-6 col-lg-4" id="header-left">
        <div class="wrapper-logo-default"><a href="https://www.eclipse.org/"><img class="logo-eclipse-default img-responsive hidden-xs" alt="logo" src="https://bugs.eclipse.org/eclipse.org-common/themes/solstice/public/images/logo/eclipse-426x100.png"/></a></div>
      </div>            <div class="col-sm-16 col-md-18 col-lg-20" id="main-menu-wrapper">
  <div class="navbar yamm" id="main-menu">
    <div id="navbar-collapse-1" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li class="visible-thin"><a href="https://www.eclipse.org/downloads/" target="_self">Download</a></li><li><a href="https://www.eclipse.org/users/" target="_self">Getting Started</a></li><li><a href="https://www.eclipse.org/membership/" target="_self">Members</a></li><li><a href="https://www.eclipse.org/projects/" target="_self">Projects</a></li>                  <li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Community <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="http://marketplace.eclipse.org">Marketplace</a></li><li><a href="http://events.eclipse.org">Events</a></li><li><a href="http://www.planeteclipse.org/">Planet Eclipse</a></li><li><a href="https://www.eclipse.org/community/eclipse_newsletter/">Newsletter</a></li><li><a href="https://www.youtube.com/user/EclipseFdn">Videos</a></li></ul></li><li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Participate <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="https://bugs.eclipse.org/bugs/">Report a Bug</a></li><li><a href="https://www.eclipse.org/forums/">Forums</a></li><li><a href="https://www.eclipse.org/mail/">Mailing Lists</a></li><li><a href="https://wiki.eclipse.org/">Wiki</a></li><li><a href="https://wiki.eclipse.org/IRC">IRC</a></li><li><a href="https://www.eclipse.org/contribute/">How to Contribute</a></li></ul></li><li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Working Groups <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="http://wiki.eclipse.org/Auto_IWG">Automotive</a></li><li><a href="http://iot.eclipse.org">Internet of Things</a></li><li><a href="http://locationtech.org">LocationTech</a></li><li><a href="http://lts.eclipse.org">Long-Term Support</a></li><li><a href="http://polarsys.org">PolarSys</a></li><li><a href="http://science.eclipse.org">Science</a></li><li><a href="http://www.openmdm.org">OpenMDM</a></li></ul></li>          <!-- More -->
          <li class="dropdown eclipse-more hidden-xs">
            <a data-toggle="dropdown" class="dropdown-toggle">More<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li>
                <!-- Content container to add padding -->
                <div class="yamm-content">
                  <div class="row">
                    <ul class="col-sm-8 list-unstyled"><li><p><strong>Community</strong></p></li><li><a href="http://marketplace.eclipse.org">Marketplace</a></li><li><a href="http://events.eclipse.org">Events</a></li><li><a href="http://www.planeteclipse.org/">Planet Eclipse</a></li><li><a href="https://www.eclipse.org/community/eclipse_newsletter/">Newsletter</a></li><li><a href="https://www.youtube.com/user/EclipseFdn">Videos</a></li></ul><ul class="col-sm-8 list-unstyled"><li><p><strong>Participate</strong></p></li><li><a href="https://bugs.eclipse.org/bugs/">Report a Bug</a></li><li><a href="https://www.eclipse.org/forums/">Forums</a></li><li><a href="https://www.eclipse.org/mail/">Mailing Lists</a></li><li><a href="https://wiki.eclipse.org/">Wiki</a></li><li><a href="https://wiki.eclipse.org/IRC">IRC</a></li><li><a href="https://www.eclipse.org/contribute/">How to Contribute</a></li></ul><ul class="col-sm-8 list-unstyled"><li><p><strong>Working Groups</strong></p></li><li><a href="http://wiki.eclipse.org/Auto_IWG">Automotive</a></li><li><a href="http://iot.eclipse.org">Internet of Things</a></li><li><a href="http://locationtech.org">LocationTech</a></li><li><a href="http://lts.eclipse.org">Long-Term Support</a></li><li><a href="http://polarsys.org">PolarSys</a></li><li><a href="http://science.eclipse.org">Science</a></li><li><a href="http://www.openmdm.org">OpenMDM</a></li></ul>                  </div>
                </div>
              </li>
            </ul>
          </li>
              </ul>
    </div>
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      </button>
      <div class="wrapper-logo-mobile"><a class="navbar-brand visible-xs" href="https://www.eclipse.org/"><img class="logo-eclipse-default-mobile img-responsive" alt="logo" src="https://bugs.eclipse.org/eclipse.org-common/themes/solstice/public/images/logo/eclipse-800x188.png"/></a></div>    </div>
  </div>
</div>
    </div>
  </div>
</header>
<!--  END OF SOLSTICE HEADER -->

    <div id="titles">
      <span id="title">Bugzilla &ndash; Bug&nbsp;105872</span>

        <span id="subtitle" class="subheader">Rename Compilation Unit does not go away</span>

        <span id="information" class="header_addl_info">Last modified: 2005-08-15 13:01:03 EDT</span>
    </div>


    <div id="common_links"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_top" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_top");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_top" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_top"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_top">
  <span class="separator">| </span>
  <a id="login_link_top" href="show_bug.cgi?id=105872&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_top')">Log In</a>

  <form action="show_bug.cgi?id=105872" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_top">
    <input id="Bugzilla_login_top" required
           name="Bugzilla_login" class="bz_login"
        placeholder="Login">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_top" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_top">
    <a href="#" onclick="return hide_mini_login_form('_top')">[x]</a>
  </form>
</li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
</ul>
    </div>
  </div>

  <div id="bugzilla-body">


<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2005-08-15 13:01:03">
  <input type="hidden" name="id" value="105872">
  <input type="hidden" name="token" value="1629873385-qkIFTthms89pUybQuh6aJ5iws1mn8OeBQag1TSiPcxc">
<div class="bz_short_desc_container edit_form">
     <a href="show_bug.cgi?id=105872"><b>Bug&nbsp;105872</b></a> <span id="summary_container" class="bz_default_hidden">
      - <span id="short_desc_nonedit_display">Rename Compilation Unit does not go away</span>
     </span>

    <div id="summary_input"><span class="field_label "
    id="field_label_short_desc">


  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>

</span>Rename Compilation Unit does not go away
    </div>
  </div>
  <script type="text/javascript">
    hideEditableField('summary_container',
                      'summary_input',
                      'summary_edit_action',
                      'short_desc',
                      'Rename Compilation Unit does not go away' );
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          DUPLICATE
            of <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [refactoring] [rename] Rename Type hangs"
   href="show_bug.cgi?id=98621">bug 98621</a>
      </span>
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_alias">


  <a 
      title="A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#alias"
  >Alias:</a>

</th>
    <td>
        None
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components. Select a Classification to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Platform

</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Eclipse Project

</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=Platform"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Runtime

  (<a href="buglist.cgi?component=Runtime&amp;product=Platform&amp;bug_status=__open__"
      target="_blank">show other bugs</a>)
</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">


  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=fields.html#version"
  >Version:</a>

</th>

      <td>3.1 &#160; <a href="https://dev.eclipse.org/committers/bugs/bugz_manager.php"><img src="//dev.eclipse.org/small_icons/apps/accessories-text-editor.png" alt="Edit" title="Edit these values" /></a></td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">


  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>

</th>
      <td class="field_value">PC
        Windows XP
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label  accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>P3
       major<span id="votes_container">
      with
      <a href="page.cgi?id=voting/bug.html&amp;bug_id=105872">1 
            vote</a>
    (<a href="page.cgi?id=voting/user.html&amp;bug_id=105872#vote_105872">vote</a>)
  </span>
      </td>
    </tr>

      <tr><th class="field_label "
    id="field_label_target_milestone">


  <a 
      title="The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it."
      class="field_help_link"
      href="page.cgi?id=fields.html#target_milestone"
  >Target Milestone:</a>

</th>
        <td>--- &#160; <a href="https://dev.eclipse.org/committers/bugs/bugz_manager.php"><img src="//dev.eclipse.org/small_icons/apps/accessories-text-editor.png" alt="Edit" title="Edit these values" /></a></td>
      </tr>
          
          <tr><th class="field_label "
    id="field_label_assigned_to">


  <a 
      title="The person in charge of resolving the bug."
      class="field_help_link"
      href="page.cgi?id=fields.html#assigned_to"
  >Assignee:</a>

</th>
      <td><span class="vcard"><span class="fn">platform-runtime-inbox</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=platform-runtime-inbox&#64;eclipse.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=platform-runtime-inbox&#64;eclipse.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
      </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_qa_contact">


  <a 
      title="The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#qa_contact"
  >QA Contact:</a>

</th>
      <td><span class="vcard">
</span>
      </td>
    </tr>
    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'platform-runtime-inbox\x40eclipse.org',
        '');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">


  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>

</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>

    <tr><th class="field_label "
    id="field_label_status_whiteboard">


  <a 
      title="Each bug has a free-form single line text entry box for adding tags and status information."
      class="field_help_link"
      href="page.cgi?id=fields.html#status_whiteboard"
  >Whiteboard:</a>

</th><td>  
  </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_keywords">


  <a 
      title="You can add keywords from a defined list to bugs, in order to easily identify and group them."
      class="field_help_link"
      href="describekeywords.cgi"
  >Keywords:</a>

</th>
  <td class="field_value "
      id="field_container_keywords" >

</td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>

  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>

  </td>
  </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table>
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2005-08-02 18:05 EDT by <span class="vcard"><span class="fn">TP</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=trevparks&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=trevparks&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2005-08-15 13:01 EDT
      (<a href="show_activity.cgi?id=105872">History</a>)
    </td>
  
  </tr>
<tr>
      <th class="field_label">
        <label  accesskey="a">
          CC List:
        </label>
      </th>
      <td>3 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5" >
                <option value="dirk_baeumer">dirk_baeumer</option>
                <option value="john.arthorne">john.arthorne</option>
                <option value="valentam">valentam</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" >

</td>
    </tr> 

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>



        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts">
  <tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table">
  <tr id="a0">
    <th colspan="3" class="left">
      Attachments
    </th>
  </tr>



  <tr class="bz_attach_footer">
    <td colspan="3">
        <a href="attachment.cgi?bugid=105872&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>
<div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=105872&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>
  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="https://bugs.eclipse.org/bugs/js/comments.js?1463425338" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the 'comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>


<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table">
<tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">TP</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=trevparks&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=trevparks&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-02 18:05:44 EDT
        </span>

      </div>




<pre class="bz_comment_text">I am a team provider and the plugin that worked using Eclipse 3.0 doesn't work
under 3.1.  Has something changed?

Refactor -&gt; Rename a Java file results in the correct rename, and tree changes,
but the &quot;Rename Compilation Unit&quot; dialog does not go away following the action.
 The message, &quot;Performing changes...&quot; is displayed, with the &quot;Ok&quot; button
disabled.  Selecting &quot;Cancel&quot; has no effect.</pre>
    </div>

    <div id="c1" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Michael Valenta</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=valentam&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=valentam&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-03 17:00:41 EDT
        </span>

      </div>




<pre class="bz_comment_text">Moving to JDT since the mentioned dialog is theirs.</pre>
    </div>

    <div id="c2" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dirk Baeumer</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=dirk_baeumer&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=dirk_baeumer&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-03 17:15:01 EDT
        </span>

      </div>




<pre class="bz_comment_text">Can you consistently reproduce the hang. If so, please provide a VM dump.
Without knowing where Eclipse hangs there is little we can do.</pre>
    </div>

    <div id="c3" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">TP</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=trevparks&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=trevparks&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-03 17:26:03 EDT
        </span>

      </div>




<pre class="bz_comment_text">How do I get a VM dump - there is no log, though if I run in debug mode I see it
is in:
ModalContext$ModalContextThread.block() line: 153


Here is the method.  It is in the loop &quot;while (continueEventDispatching)&quot;:
        /**
         * Processes events or waits until this modal context thread terminates.
         */
        public void block() {
            if (display == Display.getCurrent()) {
                while (continueEventDispatching) {
                    if (!display.readAndDispatch())
                        display.sleep();
                }
            } else {
                try {
                    join();
                } catch (InterruptedException e) {
                    throwable = e;
                }
            }
        }
</pre>
    </div>

    <div id="c4" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">TP</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=trevparks&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=trevparks&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-03 17:46:35 EDT
        </span>

      </div>




<pre class="bz_comment_text">Yes, this is 100% of the time reproducible.

Here are the other threads running at the time of the infinite loop in the main
thread:
Thread [main] (Suspended)
	ModalContext$ModalContextThread.block() line: 153
	ModalContext.run(IRunnableWithProgress, boolean, IProgressMonitor, Display)
line: 303
	RefactoringWizardDialog2.run(boolean, boolean, IRunnableWithProgress) line: 293
	RenameCuWizard(RefactoringWizard).internalPerformFinish(InternalAPI,
PerformChangeOperation) line: 547
	RenameRefactoringWizard$1(UserInputWizardPage).performFinish() line: 153
	RenameCuWizard(RefactoringWizard).performFinish() line: 613
	RefactoringWizardDialog2.okPressed() line: 417
	RefactoringWizardDialog2(Dialog).buttonPressed(int) line: 409
	Dialog$2.widgetSelected(SelectionEvent) line: 556
	TypedListener.handleEvent(Event) line: 90
	EventTable.sendEvent(Event) line: 66
	Button(Widget).sendEvent(Event) line: 843
	Display.runDeferredEvents() line: 3080
	Display.readAndDispatch() line: 2713
	RefactoringWizardDialog2(Window).runEventLoop(Shell) line: 809
	RefactoringWizardDialog2(Window).open() line: 787
	RefactoringWizardOpenOperation$1.run() line: 125
	BusyIndicator.showWhile(Display, Runnable) line: 69
	RefactoringWizardOpenOperation.run(Shell, String) line: 138
	RefactoringStarter.activate(Refactoring, RefactoringWizard, Shell, String,
boolean) line: 40
	RenameUserInterfaceStarter(UserInterfaceStarter).activate(Refactoring, Shell,
boolean) line: 56
	RenameUserInterfaceStarter.activate(Refactoring, Shell, boolean) line: 113
	RenameSupport.openDialog(Shell) line: 114
	RefactoringExecutionStarter.startRenameRefactoring(IJavaElement, Shell) line: 327
	RenameJavaElementAction.run(IJavaElement) line: 171
	RenameJavaElementAction.run(IStructuredSelection) line: 102
	RenameAction.run(IStructuredSelection) line: 108
	RenameAction(SelectionDispatchAction).dispatchRun(ISelection) line: 222
	RenameAction(SelectionDispatchAction).run() line: 198
	RenameAction(Action).runWithEvent(Event) line: 996
	ActionContributionItem.handleWidgetSelection(Event, boolean) line: 538
	ActionContributionItem.access$2(ActionContributionItem, Event, boolean) line: 488
	ActionContributionItem$5.handleEvent(Event) line: 400
	EventTable.sendEvent(Event) line: 66
	MenuItem(Widget).sendEvent(Event) line: 843
	Display.runDeferredEvents() line: 3080
	Display.readAndDispatch() line: 2713
	Workbench.runEventLoop(Window$IExceptionHandler, Display) line: 1699
	Workbench.runUI() line: 1663
	Workbench.createAndRunWorkbench(Display, WorkbenchAdvisor) line: 367
	PlatformUI.createAndRunWorkbench(Display, WorkbenchAdvisor) line: 143
	IDEApplication.run(Object) line: 103
	PlatformActivator$1.run(Object) line: 226
	EclipseStarter.run(Object) line: 376
	EclipseStarter.run(String[], Runnable) line: 163
	NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available
[native method]
	NativeMethodAccessorImpl.invoke(Object, Object[]) line: 39
	DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25
	Method.invoke(Object, Object...) line: 585
	Main.invokeFramework(String[], URL[]) line: 334
	Main.basicRun(String[]) line: 278
	Main.run(String[]) line: 973
	Main.main(String[]) line: 948
Thread [State Data Manager] (Running)
Thread [Framework Event Dispatcher] (Running)
Thread [Start Level Event Dispatcher] (Running)
Thread [Java indexing] (Running)
Thread [Worker-6] (Running)
Thread [Worker-9] (Running)
Thread [ModalContext] (Running)
</pre>
    </div>

    <div id="c5" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dirk Baeumer</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=dirk_baeumer&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=dirk_baeumer&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-04 05:15:33 EDT
        </span>

      </div>




<pre class="bz_comment_text">Can you please suspend the whole VM and provide the strack frames for all
thread. The main thread waits for the modal context thread to complete (which is
OK) so it is critical to see what the other threads are doing. 

Might be a dup of 98621.</pre>
    </div>

    <div id="c6" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dirk Baeumer</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=dirk_baeumer&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=dirk_baeumer&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-04 05:24:45 EDT
        </span>

      </div>




<pre class="bz_comment_text">And please enable &quot;Show Monitors&quot; form the Debug view's view menu so that the
dump contains information about which thread is holding which locks.</pre>
    </div>

    <div id="c7" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dirk Baeumer</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=dirk_baeumer&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=dirk_baeumer&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-04 05:26:01 EDT
        </span>

      </div>




<pre class="bz_comment_text">A VM dump can also be produced by pressing Ctrl+Break in the Windows command
window from which Eclipse was started.</pre>
    </div>

    <div id="c8" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">TP</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=trevparks&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=trevparks&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-04 09:19:20 EDT
        </span>

      </div>




<pre class="bz_comment_text">Thansk for the quick response, here is the stack dump that you asked for:


C:\dev\eclipse-3.1-supportconnect\eclipse&gt;java -cp startup.jar
org.eclipse.core.launcher.Main
Full thread dump Java HotSpot(TM) Client VM (1.5.0_04-b05 mixed mode, sharing):

&quot;Worker-7&quot; prio=5 tid=0x02cc8788 nid=0xd8 in Object.wait() [0x049ef000..0x049efbe8]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x2309feb8&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:173)
        - locked &lt;0x2309feb8&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:205)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:69)

&quot;Worker-6&quot; prio=5 tid=0x03055c50 nid=0xec8 in Object.wait() [0x049af000..0x049afc68]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x2309feb8&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:173)
        - locked &lt;0x2309feb8&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:205)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:69)

&quot;Worker-5&quot; prio=5 tid=0x02f18c78 nid=0x3bc in Object.wait() [0x0495f000..0x0495fce8]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x2309feb8&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:173)
        - locked &lt;0x2309feb8&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:205)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:69)

&quot;Worker-4&quot; prio=5 tid=0x0318ae80 nid=0x4b8 in Object.wait() [0x03e6f000..0x03e6f9e8]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x2309feb8&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:173)
        - locked &lt;0x2309feb8&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:205)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:69)

&quot;Java indexing&quot; daemon prio=4 tid=0x02edae78 nid=0xc94 in Object.wait()
[0x03e2f000..0x03e2fa68]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x2324b858&gt; (a
org.eclipse.jdt.internal.core.search.indexing.IndexManager)
        at java.lang.Object.wait(Unknown Source)
        at
org.eclipse.jdt.internal.core.search.processing.JobManager.run(JobManager.java:349)
        - locked &lt;0x2324b858&gt; (a
org.eclipse.jdt.internal.core.search.indexing.IndexManager)
        at java.lang.Thread.run(Unknown Source)

&quot;Worker-3&quot; prio=5 tid=0x02e499a0 nid=0xeac in Object.wait() [0x03def000..0x03defae8]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x2309feb8&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:173)
        - locked &lt;0x2309feb8&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:205)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:69)

&quot;Worker-2&quot; prio=5 tid=0x02e627f0 nid=0x83c in Object.wait() [0x03daf000..0x03dafb68]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x2309feb8&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:173)
        - locked &lt;0x2309feb8&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:205)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:69)

&quot;Worker-1&quot; prio=5 tid=0x00abac78 nid=0x5c0 in Object.wait() [0x03d6f000..0x03d6fbe8]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x2309feb8&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:173)
        - locked &lt;0x2309feb8&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:205)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:69)

&quot;Worker-0&quot; prio=5 tid=0x0307d3a8 nid=0xf30 in Object.wait() [0x0369f000..0x0369fc68]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x2309feb8&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:173)
        - locked &lt;0x2309feb8&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:205)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:69)

&quot;Start Level Event Dispatcher&quot; daemon prio=5 tid=0x00acdca0 nid=0x1d0 in
Object.wait() [0x0334f000..0x0334fce8]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x22fd8728&gt; (a
org.eclipse.osgi.framework.eventmgr.EventManager$EventThread)
        at java.lang.Object.wait(Unknown Source)
        at
org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.getNextEvent(EventManager.java:349)
        - locked &lt;0x22fd8728&gt; (a
org.eclipse.osgi.framework.eventmgr.EventManager$EventThread)
        at
org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:287)

&quot;Framework Event Dispatcher&quot; daemon prio=5 tid=0x02f49188 nid=0xcec in
Object.wait() [0x0330f000..0x0330fd68]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x22fbb940&gt; (a
org.eclipse.osgi.framework.eventmgr.EventManager$EventThread)
        at java.lang.Object.wait(Unknown Source)
        at
org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.getNextEvent(EventManager.java:349)
        - locked &lt;0x22fbb940&gt; (a
org.eclipse.osgi.framework.eventmgr.EventManager$EventThread)
        at
org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:287)

&quot;State Data Manager&quot; daemon prio=5 tid=0x02f49008 nid=0xf88 waiting on condition
[0x032cf000..0x032cf9e8]
        at java.lang.Thread.sleep(Native Method)
        at
org.eclipse.osgi.framework.adaptor.core.StateManager.run(StateManager.java:289)
        at java.lang.Thread.run(Unknown Source)

&quot;Low Memory Detector&quot; daemon prio=5 tid=0x00a6f300 nid=0x130 runnable
[0x00000000..0x00000000]

&quot;CompilerThread0&quot; daemon prio=10 tid=0x00a6ded8 nid=0x808 waiting on condition
[0x00000000..0x02c0f8cc]

&quot;Signal Dispatcher&quot; daemon prio=10 tid=0x00a6d170 nid=0xbf4 waiting on condition
[0x00000000..0x00000000]

&quot;Finalizer&quot; daemon prio=9 tid=0x00a68418 nid=0x3a8 in Object.wait()
[0x02b8f000..0x02b8fc68]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x22f73e50&gt; (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(Unknown Source)
        - locked &lt;0x22f73e50&gt; (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(Unknown Source)
        at java.lang.ref.Finalizer$FinalizerThread.run(Unknown Source)

&quot;Reference Handler&quot; daemon prio=10 tid=0x00a66f38 nid=0xa5c in Object.wait()
[0x02b4f000..0x02b4fce8]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x22f73ed0&gt; (a java.lang.ref.Reference$Lock)
        at java.lang.Object.wait(Unknown Source)
        at java.lang.ref.Reference$ReferenceHandler.run(Unknown Source)
        - locked &lt;0x22f73ed0&gt; (a java.lang.ref.Reference$Lock)

&quot;main&quot; prio=7 tid=0x00036be8 nid=0x1cc in Object.wait() [0x0007e000..0x0007fc3c]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x238c2b98&gt; (a org.eclipse.core.internal.jobs.ThreadJob)
        at org.eclipse.core.internal.jobs.ThreadJob.joinRun(ThreadJob.java:170)
        - locked &lt;0x238c2b98&gt; (a org.eclipse.core.internal.jobs.ThreadJob)
        at org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:88)
        at org.eclipse.core.internal.jobs.JobManager.beginRule(JobManager.java:190)
        at
org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:96)
        at
org.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1674)
        at
org.eclipse.core.internal.resources.Synchronizer.setSyncInfo(Synchronizer.java:224)
        at com.ca.harvest.core.utils.CAHResourceUtil.setSyncInfo(Unknown Source)
        at com.ca.harvest.core.utils.CAHResourceUtil$1.run(Unknown Source)
        at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
        at
org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)
        - locked &lt;0x238c2dc0&gt; (a org.eclipse.swt.widgets.RunnableLock)
        at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3057)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2716)
        at
org.eclipse.jface.operation.ModalContext$ModalContextThread.block(ModalContext.java:153)
        at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:303)
        at
org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2.run(RefactoringWizardDialog2.java:293)
        at
org.eclipse.ltk.ui.refactoring.RefactoringWizard.internalPerformFinish(RefactoringWizard.java:547)
        at
org.eclipse.ltk.ui.refactoring.UserInputWizardPage.performFinish(UserInputWizardPage.java:153)
        at
org.eclipse.ltk.ui.refactoring.RefactoringWizard.performFinish(RefactoringWizard.java:613)
        at
org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2.okPressed(RefactoringWizardDialog2.java:417)
        at org.eclipse.jface.dialogs.Dialog.buttonPressed(Dialog.java:409)
        at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:556)
        at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:90)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
        at org.eclipse.jface.window.Window.runEventLoop(Window.java:809)
        at org.eclipse.jface.window.Window.open(Window.java:787)
        at
org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation$1.run(RefactoringWizardOpenOperation.java:125)
        at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)
        at
org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run(RefactoringWizardOpenOperation.java:138)
        at
org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate(RefactoringStarter.java:40)
        at
org.eclipse.jdt.internal.ui.refactoring.UserInterfaceStarter.activate(UserInterfaceStarter.java:56)
        at
org.eclipse.jdt.internal.ui.refactoring.reorg.RenameUserInterfaceStarter.activate(RenameUserInterfaceStarter.java:113)
        at
org.eclipse.jdt.ui.refactoring.RenameSupport.openDialog(RenameSupport.java:114)
        at
org.eclipse.jdt.internal.corext.refactoring.RefactoringExecutionStarter.startRenameRefactoring(RefactoringExecutionStarter.java:327)
        at
org.eclipse.jdt.internal.ui.refactoring.actions.RenameJavaElementAction.run(RenameJavaElementAction.java:171)
        at
org.eclipse.jdt.internal.ui.refactoring.actions.RenameJavaElementAction.run(RenameJavaElementAction.java:102)
        at org.eclipse.jdt.ui.actions.RenameAction.run(RenameAction.java:108)
        at
org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:222)
        at
org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:198)
        at org.eclipse.jface.action.Action.runWithEvent(Action.java:996)
        at
org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:538)
        at
org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:488)
        at
org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:400)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)
        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)
        at
org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:367)
        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
        at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)
        at
org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)
        at
org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)
        at
org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:163)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)
        at org.eclipse.core.launcher.Main.basicRun(Main.java:278)
        at org.eclipse.core.launcher.Main.run(Main.java:973)
        at org.eclipse.core.launcher.Main.main(Main.java:948)

&quot;VM Thread&quot; prio=10 tid=0x00a64698 nid=0xfa0 runnable

&quot;VM Periodic Task Thread&quot; prio=10 tid=0x00a70510 nid=0xb8 waiting on condition</pre>
    </div>

    <div id="c9" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dirk Baeumer</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=dirk_baeumer&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=dirk_baeumer&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-04 10:02:08 EDT
        </span>

      </div>




<pre class="bz_comment_text">This is a dup of 98621. What happens is that refactoring transfers a rule back
to the main thread which waits for the rule, however the job manager doesn't
reactivate the thread.

Why are you executing setting the sync info via a async runnable in the UI
thread. Can't you set the sync info directly when you detect that this is
necessary ?

*** This bug has been marked as a duplicate of <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [refactoring] [rename] Rename Type hangs"
   href="show_bug.cgi?id=98621">98621</a> ***</pre>
    </div>

    <div id="c10" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">TP</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=trevparks&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=trevparks&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-04 17:48:54 EDT
        </span>

      </div>




<pre class="bz_comment_text">Long story behind the async thread, but this appears to work (though not sure
why).  I identified that it was the line that sets the sync info following the
during the refactor operation.  Using the getSynchronizer() method to get
access, and write the new, sync info seemed problematic.

This works:
    ResourceInfo newinfo =
((Workspace)resource.getProject().getWorkspace()).getResourceInfo(resource.getFullPath(),
false, true);
    newinfo.setSyncInfo(ICAHConstants.HAR_SYNC_KEY, info.getBytes());


This fails:
    getSynchronizer().setSyncInfo(ICAHConstants.HAR_SYNC_KEY, resource,
info.getBytes());</pre>
    </div>

    <div id="c11" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dirk Baeumer</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=dirk_baeumer&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=dirk_baeumer&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-05 05:12:15 EDT
        </span>

      </div>




<pre class="bz_comment_text">CCing Michael, the master of the team plug-in. Michael, any insights to <a href="show_bug.cgi?id=105872#c10">comment #10</a>.</pre>
    </div>

    <div id="c12" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">TP</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=trevparks&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=trevparks&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-05 08:22:05 EDT
        </span>

      </div>




<pre class="bz_comment_text">Sorry, it would help if I gave you the contents of my local getSynchronizer():

CAHCorePlugin.getWorkspace().getSynchronizer();</pre>
    </div>

    <div id="c13" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">TP</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=trevparks&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=trevparks&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-05 08:45:15 EDT
        </span>

      </div>




<pre class="bz_comment_text">I'm not sure this is the desired solution as I get &quot;Discouraged access&quot; warnings
since I am trying to use an &quot;internal&quot; class.

Do you have another solution?  Thanks.</pre>
    </div>

    <div id="c14" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Michael Valenta</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=valentam&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=valentam&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-05 09:42:53 EDT
        </span>

      </div>




<pre class="bz_comment_text">You should definitely not use the internal code. How does this fail:

getSynchronizer().setSyncInfo(ICAHConstants.HAR_SYNC_KEY, resource,
info.getBytes());

Do you get an exception? 

</pre>
    </div>

    <div id="c15" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">TP</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=trevparks&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=trevparks&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-05 09:56:33 EDT
        </span>

      </div>




<pre class="bz_comment_text">It fails according to the description of the bug.  During a Java Refactor -&gt;
Rename, the dialog does not go away (no log or anything).  The stack dump is in
<a href="show_bug.cgi?id=105872#c8">comment #8</a>

The use of the internal code does make the Refactor dialog go away, and work as
the code did work in 3.0 before my change.</pre>
    </div>

    <div id="c16" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dirk Baeumer</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=dirk_baeumer&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=dirk_baeumer&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-05 11:37:30 EDT
        </span>

      </div>




<pre class="bz_comment_text">The stack trace indicates that code from the team provider is triggering the
async runnable:

        at com.ca.harvest.core.utils.CAHResourceUtil.setSyncInfo(Unknown Source)
        at com.ca.harvest.core.utils.CAHResourceUtil$1.run(Unknown Source)
        at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
        at
org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)
        - locked &lt;0x238c2dc0&gt; (a org.eclipse.swt.widgets.RunnableLock)
        at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3057)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2716)

My initial question was why this code gets executed via a async exec ?

</pre>
    </div>

    <div id="c17" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Michael Valenta</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=valentam&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=valentam&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-05 11:45:55 EDT
        </span>

      </div>




<pre class="bz_comment_text">The use of the internal code is bypassing the locking mechanism so the 
deadlock does not occur. I would suggest that you try and move the setting of 
the synchronizer out of the asyncExec. Even though it is a bug that is causing 
your code to fail, it is a good idea to separate locking as much as possible 
anyway.</pre>
    </div>

    <div id="c18" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">TP</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=trevparks&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=trevparks&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-05 12:00:18 EDT
        </span>

      </div>




<pre class="bz_comment_text">Yes - I removed the code.  I will now attach the non-async execution which fails
in the exact same way (Refactor dialog doesn't go away).  The only thing that
seems to work is the use of the internal code.



C:\dev\eclipse-3.1-supportconnect\eclipse&gt;java -cp startup.jar
org.eclipse.core.launcher.Main
Full thread dump Java HotSpot(TM) Client VM (1.5.0_04-b05 mixed mode, sharing):

&quot;Thread-1&quot; prio=5 tid=0x03286d78 nid=0x538 in Object.wait() [0x049ef000..0x049ef9a0]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x22ac3418&gt; (a org.eclipse.core.internal.jobs.ThreadJob)
        at org.eclipse.core.internal.jobs.ThreadJob.joinRun(ThreadJob.java:170)
        - locked &lt;0x22ac3418&gt; (a org.eclipse.core.internal.jobs.ThreadJob)
        at org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:88)
        at org.eclipse.core.internal.jobs.JobManager.beginRule(JobManager.java:190)
        at
org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:96)
        at
org.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1674)
        at
org.eclipse.core.internal.resources.Synchronizer.setSyncInfo(Synchronizer.java:224)
        at
com.ca.harvest.core.utils.CAHResourceUtil.setSyncInfo(CAHResourceUtil.java:354)
        at
com.ca.harvest.core.utils.CAHResourceUtil.setWorkspaceSyncInfo(CAHResourceUtil.java:2191)
        at
com.ca.harvest.core.utils.CAHSignatureListener.writeSignature(CAHSignatureListener.java:183)

&quot;ModalContext&quot; prio=7 tid=0x03140660 nid=0x9f4 in Object.wait()
[0x049af000..0x049afa68]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x236aa828&gt; (a org.eclipse.swt.widgets.RunnableLock)
        at java.lang.Object.wait(Unknown Source)
        at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:169)
        - locked &lt;0x236aa828&gt; (a org.eclipse.swt.widgets.RunnableLock)
        at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:28)
        at org.eclipse.swt.widgets.Display.syncExec(Display.java:3413)
        at
org.eclipse.ltk.internal.ui.refactoring.UIPerformChangeOperation.executeChange(UIPerformChangeOperation.java:85)
        at
org.eclipse.ltk.core.refactoring.PerformChangeOperation.run(PerformChangeOperation.java:192)
        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1719)
        at
org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:86)
        at
org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)

&quot;Worker-4&quot; prio=5 tid=0x03088d68 nid=0x814 in Object.wait() [0x0491f000..0x0491fb68]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x2309ff10&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:173)
        - locked &lt;0x2309ff10&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:205)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:69)

&quot;Worker-3&quot; prio=5 tid=0x030807b8 nid=0xa04 in Object.wait() [0x03e2f000..0x03e2fc68]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x2309ff10&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:173)
        - locked &lt;0x2309ff10&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:205)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:69)

&quot;Worker-2&quot; prio=5 tid=0x02ddbe18 nid=0xd38 in Object.wait() [0x03def000..0x03defce8]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x2309ff10&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:173)
        - locked &lt;0x2309ff10&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:205)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:69)

&quot;Java indexing&quot; daemon prio=4 tid=0x02e13610 nid=0x288 in Object.wait()
[0x0382f000..0x0382fd68]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x2314d7c0&gt; (a
org.eclipse.jdt.internal.core.search.indexing.IndexManager)
        at java.lang.Object.wait(Unknown Source)
        at
org.eclipse.jdt.internal.core.search.processing.JobManager.run(JobManager.java:349)
        - locked &lt;0x2314d7c0&gt; (a
org.eclipse.jdt.internal.core.search.indexing.IndexManager)
        at java.lang.Thread.run(Unknown Source)

&quot;Worker-1&quot; prio=5 tid=0x0301e068 nid=0x5c4 in Object.wait() [0x036df000..0x036df9e8]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x2309ff10&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:173)
        - locked &lt;0x2309ff10&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:205)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:69)

&quot;Worker-0&quot; prio=5 tid=0x0300ad68 nid=0x7d8 in Object.wait() [0x0369f000..0x0369fa68]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x2309ff10&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:173)
        - locked &lt;0x2309ff10&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:205)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:69)

&quot;Start Level Event Dispatcher&quot; daemon prio=5 tid=0x00acdca0 nid=0xe34 in
Object.wait() [0x0334f000..0x0334fae8]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x22fd86e0&gt; (a
org.eclipse.osgi.framework.eventmgr.EventManager$EventThread)
        at java.lang.Object.wait(Unknown Source)
        at
org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.getNextEvent(EventManager.java:349)
        - locked &lt;0x22fd86e0&gt; (a
org.eclipse.osgi.framework.eventmgr.EventManager$EventThread)
        at
org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:287)

&quot;Framework Event Dispatcher&quot; daemon prio=5 tid=0x02f49188 nid=0xac8 in
Object.wait() [0x0330f000..0x0330fb68]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x22fbb940&gt; (a
org.eclipse.osgi.framework.eventmgr.EventManager$EventThread)
        at java.lang.Object.wait(Unknown Source)
        at
org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.getNextEvent(EventManager.java:349)
        - locked &lt;0x22fbb940&gt; (a
org.eclipse.osgi.framework.eventmgr.EventManager$EventThread)
        at
org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:287)

&quot;State Data Manager&quot; daemon prio=5 tid=0x02f49008 nid=0x480 waiting on condition
[0x032cf000..0x032cfbe8]
        at java.lang.Thread.sleep(Native Method)
        at
org.eclipse.osgi.framework.adaptor.core.StateManager.run(StateManager.java:289)
        at java.lang.Thread.run(Unknown Source)

&quot;Low Memory Detector&quot; daemon prio=5 tid=0x00a6f300 nid=0xfd8 runnable
[0x00000000..0x00000000]

&quot;CompilerThread0&quot; daemon prio=10 tid=0x00a6ded8 nid=0xf3c waiting on condition
[0x00000000..0x02c0f6cc]

&quot;Signal Dispatcher&quot; daemon prio=10 tid=0x00a6d170 nid=0x874 waiting on condition
[0x00000000..0x00000000]

&quot;Finalizer&quot; daemon prio=9 tid=0x00a68418 nid=0x378 in Object.wait()
[0x02b8f000..0x02b8fa68]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x22f73e50&gt; (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(Unknown Source)
        - locked &lt;0x22f73e50&gt; (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(Unknown Source)
        at java.lang.ref.Finalizer$FinalizerThread.run(Unknown Source)

&quot;Reference Handler&quot; daemon prio=10 tid=0x00a66f38 nid=0xc54 in Object.wait()
[0x02b4f000..0x02b4fae8]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x22f73ed0&gt; (a java.lang.ref.Reference$Lock)
        at java.lang.Object.wait(Unknown Source)
        at java.lang.ref.Reference$ReferenceHandler.run(Unknown Source)
        - locked &lt;0x22f73ed0&gt; (a java.lang.ref.Reference$Lock)

&quot;main&quot; prio=7 tid=0x00036be8 nid=0xe4 runnable [0x0007d000..0x0007fc3c]
        at com.ca.harvest.jhsdk.JCaCheckout.execute(Native Method)
        at com.ca.harvest.jhsdk.JCaCheckout.execute(Unknown Source)
        at
com.ca.harvest.core.CAHarvestProvider.internalCheckout(CAHarvestProvider.java:617)
        at
com.ca.harvest.core.CAHarvestProvider.access$0(CAHarvestProvider.java:464)
        at
com.ca.harvest.core.CAHarvestProvider$2.execute(CAHarvestProvider.java:427)
        at
org.eclipse.ui.actions.WorkspaceModifyOperation$1.run(WorkspaceModifyOperation.java:98)
        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1719)
        at
org.eclipse.ui.actions.WorkspaceModifyOperation.run(WorkspaceModifyOperation.java:110)
        - locked &lt;0x22ab1c78&gt; (a com.ca.harvest.core.CAHarvestProvider$2)
        at
com.ca.harvest.core.CAHarvestProvider.checkout(CAHarvestProvider.java:438)
        at com.ca.harvest.ui.CAHModificationValidator$1.run(Unknown Source)
        at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:152)
        at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:28)
        at org.eclipse.swt.widgets.Display.syncExec(Display.java:3413)
        at com.ca.harvest.ui.CAHModificationValidator.validateSave(Unknown Source)
        at
com.ca.harvest.core.CAHarvestProvider.validateSave(CAHarvestProvider.java:2377)
        at
org.eclipse.team.internal.core.FileModificationValidatorManager.validateSave(FileModificationValidatorManager.java:99)
        at org.eclipse.core.internal.resources.Workspace$6.run(Workspace.java:2277)
        at
org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)
        at org.eclipse.core.runtime.Platform.run(Platform.java:783)
        at
org.eclipse.core.internal.resources.Workspace.validateSave(Workspace.java:2284)
        at org.eclipse.core.internal.resources.File.setContents(File.java:363)
        at org.eclipse.jdt.internal.core.Buffer.save(Buffer.java:352)
        at org.eclipse.jdt.internal.core.Openable.save(Openable.java:487)
        at
org.eclipse.jdt.internal.core.CompilationUnit.save(CompilationUnit.java:1124)
        at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.saveContent(CopyResourceElementsOperation.java:549)
        at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processCompilationUnitResource(CopyResourceElementsOperation.java:281)
        at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processElement(CopyResourceElementsOperation.java:335)
        at
org.eclipse.jdt.internal.core.MultiOperation.processElements(MultiOperation.java:162)
        at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processElements(CopyResourceElementsOperation.java:353)
        at
org.eclipse.jdt.internal.core.MultiOperation.executeOperation(MultiOperation.java:90)
        at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:718)
        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1719)
        at
org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:782)
        at org.eclipse.jdt.internal.core.JavaModel.rename(JavaModel.java:311)
        at
org.eclipse.jdt.internal.core.CompilationUnit.rename(CompilationUnit.java:1098)
        at
org.eclipse.jdt.internal.corext.refactoring.changes.RenameCompilationUnitChange.doRename(RenameCompilationUnitChange.java:68)
        at
org.eclipse.jdt.internal.corext.refactoring.AbstractJavaElementRenameChange.perform(AbstractJavaElementRenameChange.java:69)
        at
org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:279)
        at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.access$0(DynamicValidationStateChange.java:1)
        at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange$1.run(DynamicValidationStateChange.java:92)
        at
org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:39)
        at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:718)
        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1719)
        at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3760)
        at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3717)
        at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.perform(DynamicValidationStateChange.java:95)
        at
org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:279)
        at
org.eclipse.ltk.core.refactoring.PerformChangeOperation$1.run(PerformChangeOperation.java:232)
        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1719)
        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1739)
        at
org.eclipse.ltk.core.refactoring.PerformChangeOperation.executeChange(PerformChangeOperation.java:280)
        at
org.eclipse.ltk.internal.ui.refactoring.UIPerformChangeOperation.access$1(UIPerformChangeOperation.java:1)
        at
org.eclipse.ltk.internal.ui.refactoring.UIPerformChangeOperation$1.run(UIPerformChangeOperation.java:63)
        at
org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)
        at org.eclipse.core.runtime.Platform.run(Platform.java:783)
        at
org.eclipse.ltk.internal.ui.refactoring.UIPerformChangeOperation$2.run(UIPerformChangeOperation.java:81)
        at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
        at
org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)
        - locked &lt;0x236aa828&gt; (a org.eclipse.swt.widgets.RunnableLock)
        at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3057)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2716)
        at
org.eclipse.jface.operation.ModalContext$ModalContextThread.block(ModalContext.java:153)
        at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:303)
        at
org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2.run(RefactoringWizardDialog2.java:293)
        at
org.eclipse.ltk.ui.refactoring.RefactoringWizard.internalPerformFinish(RefactoringWizard.java:547)
        at
org.eclipse.ltk.ui.refactoring.UserInputWizardPage.performFinish(UserInputWizardPage.java:153)
        at
org.eclipse.ltk.ui.refactoring.RefactoringWizard.performFinish(RefactoringWizard.java:613)
        at
org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2.okPressed(RefactoringWizardDialog2.java:417)
        at org.eclipse.jface.dialogs.Dialog.buttonPressed(Dialog.java:409)
        at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:556)
        at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:90)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
        at org.eclipse.jface.window.Window.runEventLoop(Window.java:809)
        at org.eclipse.jface.window.Window.open(Window.java:787)
        at
org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation$1.run(RefactoringWizardOpenOperation.java:125)
        at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)
        at
org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run(RefactoringWizardOpenOperation.java:138)
        at
org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate(RefactoringStarter.java:40)
        at
org.eclipse.jdt.internal.ui.refactoring.UserInterfaceStarter.activate(UserInterfaceStarter.java:56)
        at
org.eclipse.jdt.internal.ui.refactoring.reorg.RenameUserInterfaceStarter.activate(RenameUserInterfaceStarter.java:113)
        at
org.eclipse.jdt.ui.refactoring.RenameSupport.openDialog(RenameSupport.java:114)
        at
org.eclipse.jdt.internal.corext.refactoring.RefactoringExecutionStarter.startRenameRefactoring(RefactoringExecutionStarter.java:327)
        at
org.eclipse.jdt.internal.ui.refactoring.actions.RenameJavaElementAction.run(RenameJavaElementAction.java:171)
        at
org.eclipse.jdt.internal.ui.refactoring.actions.RenameJavaElementAction.run(RenameJavaElementAction.java:102)
        at org.eclipse.jdt.ui.actions.RenameAction.run(RenameAction.java:108)
        at
org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:222)
        at
org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:198)
        at org.eclipse.jface.action.Action.runWithEvent(Action.java:996)
        at
org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:538)
        at
org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:488)
        at
org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:400)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)
        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)
        at
org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:367)
        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
        at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)
        at
org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)
        at
org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)
        at
org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:163)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)
        at org.eclipse.core.launcher.Main.basicRun(Main.java:278)
        at org.eclipse.core.launcher.Main.run(Main.java:973)
        at org.eclipse.core.launcher.Main.main(Main.java:948)

&quot;VM Thread&quot; prio=10 tid=0x00a64698 nid=0x880 runnable

&quot;VM Periodic Task Thread&quot; prio=10 tid=0x00a70510 nid=0x15c waiting on condition

</pre>
    </div>

    <div id="c19" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Michael Valenta</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=valentam&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=valentam&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-05 12:09:18 EDT
        </span>

      </div>




<pre class="bz_comment_text">In the stack below, the main thread appears to be blocked on:

com.ca.harvest.jhsdk.JCaCheckout.execute(Native Method)

If you do not perform the checkout in the validateSave, does the dialog still 
block?</pre>
    </div>

    <div id="c20" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">TP</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=trevparks&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=trevparks&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-05 12:17:09 EDT
        </span>

      </div>




<pre class="bz_comment_text">These are steps that will keep the dialog from blocking:

1)  As you mentioned, remove the call to
com.ca.harvest.jhsdk.JCaCheckout.execute

2)  Remove the call to 
com.ca.harvest.core.utils.CAHSignatureListener.writeSignature

The reason (1) works though is that (1) triggers (2).  (1) itself isn't the
problem, but (2) is.  (2) is fixed by that internal code to setSyncInfo on
ResourceInfo.</pre>
    </div>

    <div id="c21" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">TP</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=trevparks&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=trevparks&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-08 12:57:17 EDT
        </span>

      </div>




<pre class="bz_comment_text">So, is it ok to use the internal code to allow my plugin to work on 3.1, or will
there be a patch for this problem?  Thanks.</pre>
    </div>

    <div id="c22" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c22">Comment 22</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Michael Valenta</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=valentam&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=valentam&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-08 13:12:45 EDT
        </span>

      </div>




<pre class="bz_comment_text">You should ask on <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [refactoring] [rename] Rename Type hangs"
   href="show_bug.cgi?id=98621">bug 98621</a> what the plan is for that problem (i.e. if it will 
be addressed in 3.1.1). As for the use of internal code, I would recommend 
against it. First of all, there is a chance that bypassing the locking 
performed by the API will cause other problems. Also, there is a chance that 
future releases (3.1.1 or 3.2) will break your code, which I'm sure your 
customers would not like. One workaround is to perform the checkout in 
validateEdit instead of validateSave. I know you have reasons for this but I 
think you should seriously consider how to make it work as intended. Also, 
it's still not clear to me why your call to 
com.ca.harvest.jhsdk.JCaCheckout.execute(Native Method) would block. To me 
this seems like a separate issue to <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [refactoring] [rename] Rename Type hangs"
   href="show_bug.cgi?id=98621">bug 98621</a>.</pre>
    </div>

    <div id="c23" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c23">Comment 23</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">TP</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=trevparks&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=trevparks&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-08 13:40:12 EDT
        </span>

      </div>




<pre class="bz_comment_text">Thanks for the quick reply.

Checking out in validateEdit() is not possible since the CM requires the file to
be checked in before the Rename/Move operation is performed (there is no way of
fixing this in the immediate future).  This leaves 2 options - check out in
moveFile(), or check out in validateSave().  The later is chosen to prevent
checking out the file if a simple Rename is performed (as opposed to a Java
Refactor-&gt;Rename).

Question:  Is there a way to tell that we are doing a Java Refactor-&gt;Rename in
moveFile(), instead of a simple Rename?

Not knowing all the internals, the checkout.execute() calls native code to
perform the checkout.  This process sends information back using a callback to
set the version decorators, etc...</pre>
    </div>

    <div id="c24" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c24">Comment 24</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Michael Valenta</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=valentam&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=valentam&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-08 14:11:13 EDT
        </span>

      </div>




<pre class="bz_comment_text">No, there is no context available. However, I described one possible solution 
in <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED WONTFIX - IFileModificationValidator needs modificationComplete notification"
   href="show_bug.cgi?id=105834">bug 105834</a>.</pre>
    </div>

    <div id="c25" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c25">Comment 25</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">TP</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=trevparks&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=trevparks&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-08 22:38:06 EDT
        </span>

      </div>




<pre class="bz_comment_text">OK, I really need help.  Performing the Checkout in the validateEdit(), instead
of the validateSave(), results in the exact same problem - the Refactor dialog
does not go away.  This was my last attempt to avoid calling the internal code.
 What other choices do I have?</pre>
    </div>

    <div id="c26" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c26">Comment 26</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">John Arthorne</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=john.arthorne&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=john.arthorne&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-09 09:53:13 EDT
        </span>

      </div>




<pre class="bz_comment_text">I don't think this is a duplicate of <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [refactoring] [rename] Rename Type hangs"
   href="show_bug.cgi?id=98621">bug 98621</a>. The stack traces are different.
In this case the locking seems to come from third party code.</pre>
    </div>

    <div id="c27" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c27">Comment 27</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">John Arthorne</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=john.arthorne&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=john.arthorne&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-09 09:54:13 EDT
        </span>

      </div>




<pre class="bz_comment_text">Moving to runtime, although this deadlock appears to be caused by the harvest
plugin.</pre>
    </div>

    <div id="c28" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c28">Comment 28</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">TP</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=trevparks&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=trevparks&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-09 10:27:15 EDT
        </span>

      </div>




<pre class="bz_comment_text">This did work in 3.0 and 2.1.  While this might be specific to this plugin,
something has changed in 3.1.</pre>
    </div>

    <div id="c29" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c29">Comment 29</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Michael Valenta</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=valentam&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=valentam&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-09 11:22:25 EDT
        </span>

      </div>




<pre class="bz_comment_text">We've had a bit of a discussion about on <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED WONTFIX - IFileModificationValidator needs modificationComplete notification"
   href="show_bug.cgi?id=105834">bug 105834</a>. The problem seems to be 
that the call to the Harvest checkout native gives a callback to 
writeSignature in a separate thread. This leads to the following deadlock 
scenario:

- the Modal Context thread holds the workspace lock (i.e. it is my 
understanding that refactorings obtain the workspace lock. Dirk or John, 
please correct me if I am wrong). This thread performs a validateEdit which 
leads to the callback

- The callback happens in a separate thread and tries to obtain a resource 
lock. This blocks since the workspace lock is held by the Modal Context thus 
resulting in deadlock.

Trevor says that his code worked in 3.0 but no longer works in 3.1. Unless my 
understanding of how refactoring locking works is wrong, it doesn't look like 
this code should have ever worked (i.e. it should have always deadlocked). Jon 
or Dirk, has anything changed that may have introduced a deadlock here?

Trevor, there are a few options to handle this problem, all of which have 
drawbacks

1) Do not do the meta-data handling in a separate thread. This may or may not 
be possible depending on the API you are using.
2) Do not use the core synchronizer to persist your meta-data. This would free 
you from obtaining a resource lock but would require you to write your own 
meta-data cache.
3) Have the writeSignature callback queue up the meta-data and launch an 
asynchronous background job to populate the synchronizer. This looks the 
easiest but care must be taken to make sure that other Team operations wait 
until the synchrozaer population job is completed.</pre>
    </div>

    <div id="c30" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c30">Comment 30</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Michael Valenta</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=valentam&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=valentam&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-09 11:27:11 EDT
        </span>

      </div>




<pre class="bz_comment_text">OK, another post to <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED WONTFIX - IFileModificationValidator needs modificationComplete notification"
   href="show_bug.cgi?id=105834">bug 105834</a> has revealed that the sync info used to be set 
in an asyncExec. That explains why it used to work. And it may be <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [refactoring] [rename] Rename Type hangs"
   href="show_bug.cgi?id=98621">bug 98621</a> 
that is causing it to fail now (but I can't say for sure). I think the best 
solution would be option 3 I presented above. It is similar to waht you were 
doing before but is not tied to the UI thread. If you create your won 
background job, there will not be any lock contention between the refactoring 
thread or the UI Thread.</pre>
    </div>

    <div id="c31" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c31">Comment 31</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">TP</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=trevparks&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=trevparks&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-09 11:35:57 EDT
        </span>

      </div>




<pre class="bz_comment_text">Can you point me to an example that I can follow to setup solution 3?</pre>
    </div>

    <div id="c32" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c32">Comment 32</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">TP</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=trevparks&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=trevparks&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-09 11:41:33 EDT
        </span>

      </div>




<pre class="bz_comment_text">Here are the two methods that cause the hang.  The syncinfo is already set
within an async thread, shouldn't this suffice?



	public static void setWorkspaceSyncInfo(CAHFileSyncInfo newSyncInfo) throws
CAHException
	{
		IPath fullPath = new
CAHViewPath(newSyncInfo.getDirectory()).append(newSyncInfo.getFileName());
        String fileName = fullPath.toOSString();
        IPath file = new Path((String) fileName);
        IWorkspace workspace = CAHCorePlugin.getWorkspace();
        IWorkspaceRoot workspaceRoot = workspace.getRoot();
        final CAHFileSyncInfo syncInfo = newSyncInfo;
        final IResource res = workspaceRoot.getFileForLocation(file);
        Display display = Display.getDefault();
        display.asyncExec (new Runnable () {
            public void run () {                
                try
                {
                    CAHResourceUtil.setSyncInfo(res, syncInfo);
                }
                catch (CAHException e)
                {
                    CAHException.wrapException(e).appendToHarvestLog();
                }
             }
         });
	}


    /**
     * Sets the sync info to the corresponding resource.
     */
    public static void setSyncInfo(IResource resource, ICAHSyncInfo info) 
                                                            throws CAHException
    {
        try
        {
//            ResourceInfo newinfo =
((Workspace)resource.getProject().getWorkspace()).getResourceInfo(resource.getFullPath(),
false, true);
//            newinfo.setSyncInfo(ICAHConstants.HAR_SYNC_KEY, info.getBytes());
            getSynchronizer().setSyncInfo(ICAHConstants.HAR_SYNC_KEY, resource,
info.getBytes());
        } // end try
        catch (CoreException e)
        {
            throw CAHException.wrapException(e); 
        } // end catch
    } // end setSyncInfo
</pre>
    </div>

    <div id="c33" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c33">Comment 33</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Michael Valenta</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=valentam&#64;ca.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=valentam&#64;ca.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-09 11:52:58 EDT
        </span>

      </div>




<pre class="bz_comment_text">For general information on jobs, you can read this article:

<a href="http://www.eclipse.org/articles/Article-Concurrency/jobs-api.html">http://www.eclipse.org/articles/Article-Concurrency/jobs-api.html</a>

As for the last code snipet you've provided, I don't see why it wouldn't work. 
Perhaps the reason is related to <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [refactoring] [rename] Rename Type hangs"
   href="show_bug.cgi?id=98621">bug 98621</a>. However, I would never do it that 
way simply because, for a large operation you will be bombarding the UI thread 
with many small asyncExecs which will lead to possible UI freezes. It would be 
far better to accumulate all the sync updates in an array and have a 
background job add them.</pre>
    </div>

    <div id="c34" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c34">Comment 34</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">TP</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=trevparks&#64;yahoo.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=trevparks&#64;yahoo.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-09 12:38:47 EDT
        </span>

      </div>




<pre class="bz_comment_text">I ran with the patch attached to <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [refactoring] [rename] Rename Type hangs"
   href="show_bug.cgi?id=98621">bug 98621</a>, and it did not fix the problem.  Not
sure if the patch works, or if this is a different bug.</pre>
    </div>

    <div id="c35" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c35">Comment 35</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dirk Baeumer</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=dirk_baeumer&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=dirk_baeumer&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-10 05:18:02 EDT
        </span>

      </div>




<pre class="bz_comment_text">In response to <a href="show_bug.cgi?id=105872#c26">comment #26</a>:

John I am pretty sure that the VM dump provided in <a href="show_bug.cgi?id=105872#c8">comment #8</a> is a dup of <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [refactoring] [rename] Rename Type hangs"
   href="show_bug.cgi?id=98621">bug
98621</a>. The reason are as follows:

- the main thread is processing a async runnable from the block code in
  ModalContext thread. This runnable tries to aquire the workspace lock (and
  it makes no difference that this is third party code).

- the ModalContext thread isn't active anymore

- there is no other thread holding the workspace lock. All worker threads
  are idle.

These are the same characteristics as in <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [refactoring] [rename] Rename Type hangs"
   href="show_bug.cgi?id=98621">bug 98621</a>.

The VM dump in <a href="show_bug.cgi?id=105872#c18">comment #18</a> however is different. There the ModalContext is still
active. Since document manipulations have to take place in the UI thread
refactoring executes change execution in the UI by posting a sync runnable.
However the UIPerformChangeOperation transfers the workspace lock back to the UI
thread before executing the sync exec. So the modal context thread is no longer
holding the lock. I have no idea why this hangs in
om.ca.harvest.jhsdk.JCaCheckout.execute. This indeed looks like a problem in the
third party code.</pre>
    </div>

    <div id="c36" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c36">Comment 36</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">John Arthorne</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=john.arthorne&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=john.arthorne&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-10 12:37:09 EDT
        </span>

      </div>




<pre class="bz_comment_text">Re: <a href="show_bug.cgi?id=105872#c35">comment #35</a> - the VM dump looks similar, but it is likely for a different
reason.  If a modal context thread owns a lock, and then performs a asyncExec
(or other thread forking) that tries to acquire the same lock in another thread,
I would expect deadlock and I consider this an error in user code. In the
refactoring case (<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [refactoring] [rename] Rename Type hangs"
   href="show_bug.cgi?id=98621">bug 98621</a>), I understand that you are using the transferRule
API to move the scheduling rule into the UI thread before doing the asyncExec. 
In this case, it should work.  I believe the originator of this bug is not using
transferRule, hence I would expect the deadlock.  I believe the correct fix in
this case is to NOT acquire the rule from within an asyncExec. The code being
run in the asyncExec in this case should probably be run directly in the modal
context thread (or else the asyncExec shouldn't be performed within an
IWorkspaceRunnable).  I consider access to text API in refactoring an exception
because it requires locking AND it requires running in the UI thread (a bad
combination, but one we have to live with).</pre>
    </div>

    <div id="c37" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c37">Comment 37</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dirk Baeumer</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=dirk_baeumer&#64;ch.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=dirk_baeumer&#64;ch.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-11 06:05:51 EDT
        </span>

      </div>




<pre class="bz_comment_text">In the VM dump provided in <a href="show_bug.cgi?id=105872#c8">comment #8</a>, the modal context thread has already
finished (it doesn't show up in the dump at all). So it can't own a lock. This
scenario is the same as in <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [refactoring] [rename] Rename Type hangs"
   href="show_bug.cgi?id=98621">bug 98621</a>. What happens here is that when the modal
context thread finished it transfers the workspace lock back to the UI thread.
The UI thread is already waiting for this lock, but doesn't wake up again. This
might be a subtle timing issues as well.

The scenario is different for the dump in <a href="show_bug.cgi?id=105872#c18">comment #18</a>. Here the modal context
thread is still active and the UIPerformChangeOperation has transfered the rule
to the UI thread to make sure the sync exec can be executed. And the refactoring
code can execute the workspace runnable taking the workspace lock to modify the
text content without any problem (see
PerformChangeOperation.executeChange(PerformChangeOperation.java:280)). So the
UI thread already successfully aquired the workspace lock. So the client code in
 com.ca.harvest.core.CAHarvestProvider is definitelly not block by a workspace lock.</pre>
    </div>

    <div id="c38" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=105872#c38">Comment 38</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">John Arthorne</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=john.arthorne&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=john.arthorne&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-15 13:01:03 EDT
        </span>

      </div>




<pre class="bz_comment_text">Ok, I will mark as a duplicate again.  Some of the stack traces listed in this
bug are unrelated, but seem to be caused by problems in client code.

*** This bug has been marked as a duplicate of <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [refactoring] [rename] Rename Type hangs"
   href="show_bug.cgi?id=98621">98621</a> ***</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=105872">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=105872">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=105872">Clone This Bug</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>

<br>
</div>

    <div id="footer">
      <div class="intro"></div>
<ul id="useful-links">
  <li id="links-actions"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_bottom" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_bottom");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_bottom" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_bottom"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_bottom">
  <span class="separator">| </span>
  <a id="login_link_bottom" href="show_bug.cgi?id=105872&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_bottom')">Log In</a>

  <form action="show_bug.cgi?id=105872" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_bottom">
    <input id="Bugzilla_login_bottom" required
           name="Bugzilla_login" class="bz_login"
        placeholder="Login">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_bottom" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_bottom">
    <a href="#" onclick="return hide_mini_login_form('_bottom')">[x]</a>
  </form>
</li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
</ul>
  </li>

  




  
</ul>

      <div class="outro"></div>
    </div>

  </body>
</html>